<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-arrowjs/usage-guide/mesharrow" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">MeshArrow: Storing Meshes in Arrow Tables | loaders.gl</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://loaders.gl/docs/arrowjs/usage-guide/mesharrow"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="MeshArrow: Storing Meshes in Arrow Tables | loaders.gl"><meta data-rh="true" name="description" content="arrow-logo"><meta data-rh="true" property="og:description" content="arrow-logo"><link data-rh="true" rel="icon" href="/favicon.png"><link data-rh="true" rel="canonical" href="https://loaders.gl/docs/arrowjs/usage-guide/mesharrow"><link data-rh="true" rel="alternate" href="https://loaders.gl/docs/arrowjs/usage-guide/mesharrow" hreflang="en"><link data-rh="true" rel="alternate" href="https://loaders.gl/docs/arrowjs/usage-guide/mesharrow" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5b440129.css">
<script src="/assets/js/runtime~main.00999819.js" defer="defer"></script>
<script src="/assets/js/main.333b1451.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/visgl-logo-dark.png" alt="vis.gl Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src="/images/visgl-logo-dark.png" alt="vis.gl Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">loaders.gl</b></a><a class="navbar__item navbar__link" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/examples">Examples</a><a class="navbar__item navbar__link" href="/showcase">Showcases</a><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item"><a href="https://openvisualization.org" target="_blank" style="content: ''; height: 80px; width: 100px; margin-top: -30px; background-image: url('/images/openjs-foundation.svg'); background-repeat: no-repeat;  background-size: 80px 110px; display: flex"></a></div><a href="https://github.com/visgl/loaders.gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/specifications/category-json">Loader Catalog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/formats">Formats</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/developer-guide/using-loaders">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/modules/i3s/recipes/building-scene-layer">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/modules/core">Submodule API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/modules/tile-converter/cli-reference/tile-converter">Command-Line Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/arrowjs">Arrow JS API Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/arrowjs">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/arrowjs/get-started">Get Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/arrowjs/usage-guide/tables">Usage Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/arrowjs/usage-guide/tables">General Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/arrowjs/usage-guide/geoarrow">Storing Geospatial Features in Arrow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/arrowjs/usage-guide/mesharrow">MeshArrow: Storing Meshes in Arrow Tables</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/arrowjs/developer-guide/data-types">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/arrowjs/api-reference">API Reference</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Arrow JS API Reference</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Usage Guide</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">MeshArrow: Storing Meshes in Arrow Tables</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>MeshArrow: Storing Meshes in Arrow Tables</h1></header>
<p><img decoding="async" loading="lazy" alt="arrow-logo" src="data:image/png;base64,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" width="200" height="73" class="img_SS3x"></p>
<p>This page describes &quot;MeshArrow&quot;, a set of conventions for storing binary GPU geometries
(point clouds and meshes) in Apache Arrow tables.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="design-goals">Design Goals<a href="#design-goals" class="hash-link" aria-label="Direct link to Design Goals" title="Direct link to Design Goals">​</a></h2>
<p>To be able to store 3D meshes in arrow tables in a well-defined way.</p>
<p>A key realization is that each row can have all its vertices in a <code>POSITIONS</code> column in a <code>List&lt;FixedSizeList&lt;3, double&gt;&gt;</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="relationship-to-geoarrow">Relationship to GeoArrow<a href="#relationship-to-geoarrow" class="hash-link" aria-label="Direct link to Relationship to GeoArrow" title="Direct link to Relationship to GeoArrow">​</a></h2>
<p><em>Mesharrow</em></p>
<ul>
<li>
<p>was inspired by GeoArrow, in terms of being a set of column type and metadata conventions for Apache Arrow.</p>
</li>
<li>
<p>In contrast to GeoArrow which focuses on storing simple 2D geospatial features, MeshArrow focuses on storing GPU renderable geometries (meshes).</p>
</li>
<li>
<p>is independent and can be used separately or together with GeoArrow.</p>
</li>
<li>
<p>GeoArrow allows for simple 2D geometries (points, lines and polygons) to be stored in binary columnar form in Apache Arrow (and Parquet) tables.</p>
</li>
<li>
<p>However, the stored geometries are not GPU renderable (in particular, for polygon fills)</p>
</li>
<li>
<p>GeoArrow objects must often be transformed (e.g. through triangulation) into a form that can be rendered by GPUs, and the resulting format is often no longer stored in Arrow.</p>
</li>
</ul>
<p>Mesharrow allows GeoArrow derived, renderable geometries to be stored in Apache Arrow format, even appended as an additional &quot;MeshArrow&quot; column to the source GeoArrow table.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="relationship-to-geoparquet">Relationship to GeoParquet<a href="#relationship-to-geoparquet" class="hash-link" aria-label="Direct link to Relationship to GeoParquet" title="Direct link to Relationship to GeoParquet">​</a></h2>
<p>All the conventions defined by &quot;MeshArrow&quot; can be applied to Parquet tables, so feel free to store mesharrow data in Parquet and think of it as &quot;MeshParquet&quot;.
In contrast to GeoParquet/GeoArrow, MeshArrow is not a standard. Mesharrow is being defined as a set of conventions for the vis.gl frameworks (loaders.gl, luma.gl, deck.gl etc). If defacto standards similar to &quot;mesharrow&quot; were to emerge, expect vis.gl to adopt and favor those over MeshArrow.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="design-goals-1">Design Goals<a href="#design-goals-1" class="hash-link" aria-label="Direct link to Design Goals" title="Direct link to Design Goals">​</a></h2>
<p>A key realization is that each row can have all its vertices in a <code>POSITIONS</code> column in a <code>List&lt;FixedSizeList&lt;3, double&gt;&gt;</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="one-mesh">One mesh<a href="#one-mesh" class="hash-link" aria-label="Direct link to One mesh" title="Direct link to One mesh">​</a></h4>
<p>A mesh typically is separated into of a number of primitives with different &quot;materials&quot;</p>
<ul>
<li>&quot;One-mesh-primitive-per-row&quot; approach.</li>
<li>&quot;One-mesh-per-row&quot; approach.</li>
<li>One-mesh-per-record-batch?<!-- -->
<ul>
<li>Record Batches - The Apache Arrow record batch structure can certainly be used to wrap each mesh in its own record batch. An advantage is that each RecordBatch has its own <code>Data</code> object so there is no need to concatenate all the array buffers from the different meshes being combined into a table.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="feature-ids">Feature Ids<a href="#feature-ids" class="hash-link" aria-label="Direct link to Feature Ids" title="Direct link to Feature Ids">​</a></h3>
<p>Tracking feature ids in geometries is very important</p>
<table><thead><tr><th>Id type</th><th>Description</th></tr></thead><tbody><tr><td>row index</td><td>primary feature id for a one-mesh-per-row-table is naturally the row index.</td></tr><tr><td>&quot;global&quot; id</td><td>An additional column can be added to the table to contain an &quot;arbitrary&quot; global feature id for the row.</td></tr><tr><td>Vertex based</td><td>An additional <code>List&lt;Uint32&gt;</code> can contain a per vertex feature id. Not that shader interpolation should be disabled.</td></tr><tr><td>Texture based</td><td>If the geometry has <code>uvs</code> a <code>featureTexture</code> can be added, see e.g. <code>EXT_mesh_features</code>.</td></tr></tbody></table>
<p>The <a href="https://github.com/CesiumGS/glTF/tree/3d-tiles-next/extensions/2.0/Vendor/EXT_mesh_features" target="_blank" rel="noopener noreferrer"><code>EXT_mesh_features</code></a> glTF extension gives some details around advanced feature id specification.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="meshes-that-do-not-fit-well-into-mesharrow">Meshes that do not fit well into MeshArrow<a href="#meshes-that-do-not-fit-well-into-mesharrow" class="hash-link" aria-label="Direct link to Meshes that do not fit well into MeshArrow" title="Direct link to Meshes that do not fit well into MeshArrow">​</a></h3>
<ul>
<li>Heavily indexed meshes, where mesh primitives share vertices via indices.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="materials">Materials<a href="#materials" class="hash-link" aria-label="Direct link to Materials" title="Direct link to Materials">​</a></h4>
<p>Full Handling of materials is outside the scope of this MeshArrow proposal. A material involved a bunch of settings that can be JSON encoded, however it also involves a number of a textures that typically need to be parsed into a browser specific object.</p>
<p>Binary data required to create images can be stored in a separate Apache Arrow table. However, textures typically need to be parsed into browser specific objects.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="vertexes">Vertexes<a href="#vertexes" class="hash-link" aria-label="Direct link to Vertexes" title="Direct link to Vertexes">​</a></h3>
<p>This MeshArrow proposal currently only supports interleaved 3 component, 32 bit floating point vertexes.</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">VertexArrowType</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">FixedSizeList</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Float</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="attributes">Attributes<a href="#attributes" class="hash-link" aria-label="Direct link to Attributes" title="Direct link to Attributes">​</a></h3>
<p>A binary geometry suitable for GPU rendering typically has a number of &quot;attributes&quot;, which are just binary columns, suitable as columns in an Apache Arrow table.</p>
<ul>
<li><code>positions</code></li>
<li><code>normals</code></li>
<li><code>uvs</code></li>
<li><code>colors</code></li>
<li>...</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="topologies">Topologies<a href="#topologies" class="hash-link" aria-label="Direct link to Topologies" title="Direct link to Topologies">​</a></h2>
<p>A topology describes how vertexes are interpreted (how primitives are formed) during rendering.
Topology is stored in mesharrow metadata for a column.
All columns with attribute layout will need to be la</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="column-conventions">Column Conventions<a href="#column-conventions" class="hash-link" aria-label="Direct link to Column Conventions" title="Direct link to Column Conventions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="row-modes">Row Modes<a href="#row-modes" class="hash-link" aria-label="Direct link to Row Modes" title="Direct link to Row Modes">​</a></h3>
<p>Mesharrow identifies several modes in which geometries can be stored in tables</p>
<ul>
<li>One position vertex per Arrow Table row.</li>
<li>One mesh (list of position vertexes) per Arrow Table row.</li>
</ul>
<table><thead><tr><th>Row Mode</th><th>POSITIONS column type</th><th>Topology</th></tr></thead><tbody><tr><td><code>vertex</code></td><td><code>FixedSizeList&lt;3, Float*&gt;</code></td><td>One vertex per table row</td></tr><tr><td><code>primitive</code></td><td><code>List&lt;FixedSizeList&lt;3, Float*&gt;&gt;</code></td><td>One primitive per arrow table row</td></tr><tr><td><code>mesh</code></td><td><code>List&lt;List&lt;FixedSizeList&lt;3, Float*&gt;&gt;&gt;</code></td><td>Multiple primitives per arrow table row</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="indexes">Indexes<a href="#indexes" class="hash-link" aria-label="Direct link to Indexes" title="Direct link to Indexes">​</a></h3>
<p>An index column can be defined, it will be a list of indexes into the POSITIONS column</p>
<ul>
<li>Indexes <code>List&lt;Uint32&gt;</code></li>
</ul>
<p>Note: Indexes are not always well supported.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="mesharrow-metadata-conventions">Mesharrow Metadata Conventions<a href="#mesharrow-metadata-conventions" class="hash-link" aria-label="Direct link to Mesharrow Metadata Conventions" title="Direct link to Mesharrow Metadata Conventions">​</a></h2>
<p>Table / Schema Metadata Conventions include:</p>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;geometryColumns&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;...&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;attributeColumns&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;...&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;rowMode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vertex/primitive/mesh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Field Metadata</p>
<ul>
<li>Whether a column represents positions, normals, etc well known attributes</li>
</ul>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;semantic?&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;POSITION&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Whether a column is quantized</li>
</ul>
<div class="language-json codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-json codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;quantization?&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;scale&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;offset&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Whether a transform should be applied (e.g. UVs)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="considerations">Considerations<a href="#considerations" class="hash-link" aria-label="Direct link to Considerations" title="Direct link to Considerations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="expandingduplicating-rows-to-match-geometry">Expanding/duplicating rows to match geometry<a href="#expandingduplicating-rows-to-match-geometry" class="hash-link" aria-label="Direct link to Expanding/duplicating rows to match geometry" title="Direct link to Expanding/duplicating rows to match geometry">​</a></h3>
<p>For a table where each row has its own variable length geometry, the GPU either needs other columns to match the length, or it needs to use indirection through row ids.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="row-ids">Row Ids<a href="#row-ids" class="hash-link" aria-label="Direct link to Row Ids" title="Direct link to Row Ids">​</a></h3>
<p>As each GPU shader can see only the current triangle and its vertices, it is useful to be able to know which row in the arrow table a specific vertex belongs to.</p>
<p>a simple process is to generate a</p>
<p><code>List&lt;FixedSizeList&lt;Float&gt;&gt;</code> =&gt; <code>List&lt;Uint32&gt;</code></p>
<p>This creates a columnar array where each vertex index references the current row index, and additional looups can be done.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="draw">Draw<a href="#draw" class="hash-link" aria-label="Direct link to Draw" title="Direct link to Draw">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="instanced-draws">Instanced Draws<a href="#instanced-draws" class="hash-link" aria-label="Direct link to Instanced Draws" title="Direct link to Instanced Draws">​</a></h3>
<p>Instanced draws are very useful in data visualization since many visualizations
draw a copy of the same geometry (a circle, hexagon, line etc) for each row in the input table.
For instanced draws, the geometry is often separated from the data table.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="multidraw-support">MultiDraw Support<a href="#multidraw-support" class="hash-link" aria-label="Direct link to MultiDraw Support" title="Direct link to MultiDraw Support">​</a></h3>
<p>GPU APIs often support MultiDraw operations (typically as an optional extension)
<a href="https://developer.chrome.com/blog/new-in-webgpu-131#experimental_support_for_multi-draw_indirect" target="_blank" rel="noopener noreferrer">https://developer.chrome.com/blog/new-in-webgpu-131#experimental_support_for_multi-draw_indirect</a></p>
<p>As for multidraw, my understanding is that it is an optimized way to draw all the mesh primitives that share materials etc in a single lower overhead call.</p>
<p>If we store one mesh per row, we could just filter out all the Arrow Table rows that were using the same material, and get the start and end indices from the underlying arrow.Data offsets, and populate the multidraw parameter buffer.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="library-functionality">Library Functionality<a href="#library-functionality" class="hash-link" aria-label="Direct link to Library Functionality" title="Direct link to Library Functionality">​</a></h2>
<p>A mesharrow library can provide a number of transformations to make</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="getrowindexattributecolumn">getRowIndexAttributeColumn<a href="#getrowindexattributecolumn" class="hash-link" aria-label="Direct link to getRowIndexAttributeColumn" title="Direct link to getRowIndexAttributeColumn">​</a></h3>
<p>Create a column</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">getRowIndexAttributeColumn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> columnName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">List</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Uint32</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="getvertexattribute">getVertexAttribute<a href="#getvertexattribute" class="hash-link" aria-label="Direct link to getVertexAttribute" title="Direct link to getVertexAttribute">​</a></h3>
<p>Map a normal column to a vertex attribute by duplicating</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">getVertexAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> columnName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">List</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">...</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="geoarrow-functions">&quot;GeoArrow&quot; functions<a href="#geoarrow-functions" class="hash-link" aria-label="Direct link to &quot;GeoArrow&quot; functions" title="Direct link to &quot;GeoArrow&quot; functions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="triangulation">Triangulation<a href="#triangulation" class="hash-link" aria-label="Direct link to Triangulation" title="Direct link to Triangulation">​</a></h3>
<p>Mesharrow is designed to hold triangulated geometries. Sometimes these geometries need to be generated (triangulated) from other, more complex geometries.</p>
<p>An important example is GeoArrow polygons (these can be very complex with an outer hull and multiple complex holes).
A computationally expensive triangulation process needs to be performed that converts the &quot;abstract&quot; polygon hull geometry into a simple list
of triangles that a GPU can render.</p>
<p>It is useful to offer support for GeoArrow to MeshArrow triangulation, preserving the full GeoArrow table.</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">triangulateGeoArrowToMeshArrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> arrow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Table</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/visgl/loaders.gl/tree/master/website/../docs/arrowjs/usage-guide/mesharrow.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/arrowjs/usage-guide/geoarrow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Storing Geospatial Features in Arrow</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/arrowjs/developer-guide/data-types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#design-goals" class="table-of-contents__link toc-highlight">Design Goals</a></li><li><a href="#relationship-to-geoarrow" class="table-of-contents__link toc-highlight">Relationship to GeoArrow</a></li><li><a href="#relationship-to-geoparquet" class="table-of-contents__link toc-highlight">Relationship to GeoParquet</a></li><li><a href="#design-goals-1" class="table-of-contents__link toc-highlight">Design Goals</a><ul><li><a href="#feature-ids" class="table-of-contents__link toc-highlight">Feature Ids</a></li><li><a href="#meshes-that-do-not-fit-well-into-mesharrow" class="table-of-contents__link toc-highlight">Meshes that do not fit well into MeshArrow</a></li></ul></li><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a><ul><li><a href="#vertexes" class="table-of-contents__link toc-highlight">Vertexes</a></li><li><a href="#attributes" class="table-of-contents__link toc-highlight">Attributes</a></li></ul></li><li><a href="#topologies" class="table-of-contents__link toc-highlight">Topologies</a></li><li><a href="#column-conventions" class="table-of-contents__link toc-highlight">Column Conventions</a><ul><li><a href="#row-modes" class="table-of-contents__link toc-highlight">Row Modes</a></li><li><a href="#indexes" class="table-of-contents__link toc-highlight">Indexes</a></li></ul></li><li><a href="#mesharrow-metadata-conventions" class="table-of-contents__link toc-highlight">Mesharrow Metadata Conventions</a></li><li><a href="#considerations" class="table-of-contents__link toc-highlight">Considerations</a><ul><li><a href="#expandingduplicating-rows-to-match-geometry" class="table-of-contents__link toc-highlight">Expanding/duplicating rows to match geometry</a></li><li><a href="#row-ids" class="table-of-contents__link toc-highlight">Row Ids</a></li></ul></li><li><a href="#draw" class="table-of-contents__link toc-highlight">Draw</a><ul><li><a href="#instanced-draws" class="table-of-contents__link toc-highlight">Instanced Draws</a></li><li><a href="#multidraw-support" class="table-of-contents__link toc-highlight">MultiDraw Support</a></li></ul></li><li><a href="#library-functionality" class="table-of-contents__link toc-highlight">Library Functionality</a><ul><li><a href="#getrowindexattributecolumn" class="table-of-contents__link toc-highlight">getRowIndexAttributeColumn</a></li><li><a href="#getvertexattribute" class="table-of-contents__link toc-highlight">getVertexAttribute</a></li></ul></li><li><a href="#geoarrow-functions" class="table-of-contents__link toc-highlight">&quot;GeoArrow&quot; functions</a><ul><li><a href="#triangulation" class="table-of-contents__link toc-highlight">Triangulation</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Other vis.gl Libraries</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://vis.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">vis.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://deck.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">deck.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://luma.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">luma.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://math.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">math.gl<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.openvisualization.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open Visualization<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/deckgl/shared_invite/zt-7oeoqie8-NQqzSp5SLTFMDeNSPxi7eg" target="_blank" rel="noopener noreferrer" class="footer__link-item">deck.gl slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">vis.gl blog on Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/visgl/loaders.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OpenJS Foundation</div></div></div></footer></div>
</body>
</html>