(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+w+S":function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var r=n("rePB"),i=n("1OyB"),a=n("vuIU"),o=n("ReuC"),s=n("Ji7U"),c=n("md7G"),u=n("foSv"),l=n("Jh/b"),f=n("K4gp"),p=n("DAeo"),h=n("BQ9P"),d=n("K7jV"),b=n("0i8A"),v=n("DvX1"),g=n("f5Sf"),m=n("ykdB"),y=n("d3kR"),O=n("tMmZ"),_=n("HIr8");function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function x(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),l.a.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function A(t,e){if(t.attributes)return x(t.attributes,e),t instanceof b.a?t:new b.a(t);if(t.positions||t.POSITION)return x(t,e),new b.a({attributes:t});throw Error("Invalid mesh")}var P={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},E=function(t){Object(s.a)(n,t);var e=w(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"getShaders",value:function(){var t=!Object(v.e)(this.context.gl),e={};return Object(y.b)(this.context.gl,O.a.GLSL_DERIVATIVES)&&(e.DERIVATIVES_AVAILABLE=1),Object(o.a)(Object(u.a)(n.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[f.a,p.b,h.a],transpileToGLSL100:t,defines:e})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:_.a}),this.setState({emptyTexture:new g.a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;if(Object(o.a)(Object(u.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),e.mesh!==r.mesh||i.extensionsChanged){var a;if(null===(a=this.state.model)||void 0===a||a.delete(),e.mesh){this.state.model=this.getModel(e.mesh);var s=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(s.NORMAL||s.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==r.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){Object(o.a)(Object(u.a)(n.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete()}},{key:"draw",value:function(t){var e=t.uniforms;if(this.state.model){var n=this.context.viewport,r=this.props,i=r.sizeScale,a=r.coordinateSystem,o=r._instanced;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!o||Object(_.b)(n,a),flatShading:!this.state.hasNormals}).draw()}}},{key:"getModel",value:function(t){var e=new m.a(this.context.gl,S(S({},this.getShaders()),{},{id:this.props.id,geometry:A(t,this.props._useMeshColors),isInstanced:!0})),n=this.props.texture,r=this.state.emptyTexture;return e.setUniforms({sampler:n||r,hasTexture:Boolean(n)}),e}},{key:"setTexture",value:function(t){var e=this.state,n=e.emptyTexture,r=e.model;null==r||r.setUniforms({sampler:t||n,hasTexture:Boolean(t)})}}]),n}(d.a);E.layerName="SimpleMeshLayer",E.defaultProps=P},"2lZV":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));"undefined"!=typeof window&&window,void 0!==t||window;var r="undefined"!=typeof document?document:{}}).call(this,n("yLpj"))},"3SJd":function(t,e,n){"use strict";function r(t){for(var e in t)return!1;return!0}function i(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}))},"5lV4":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("rePB"),i=n("1OyB"),a=n("vuIU"),o=n("ReuC"),s=n("Ji7U"),c=n("md7G"),u=n("foSv"),l=n("K7jV"),f=n("hZZG"),p=n("Zk56");function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(t){Object(s.a)(n,t);var e=g(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Object(o.a)(Object(u.a)(n.prototype),"isLoaded",this)&&this.getSubLayers().every((function(t){return t.isLoaded}))}},{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(t){Object(o.a)(Object(u.a)(n.prototype),"setState",this).call(this,t),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(t){var e=t.info,n=e.object;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}},{key:"renderLayers",value:function(){return null}},{key:"filterSubLayer",value:function(t){return!0}},{key:"shouldRenderSubLayer",value:function(t,e){var n=this.props._subLayerProps;return e&&e.length||n&&n[t]}},{key:"getSubLayerClass",value:function(t,e){var n=this.props._subLayerProps;return n&&n[t]&&n[t].type||e}},{key:"getSubLayerRow",value:function(t,e,n){return t.__source={parent:this,object:e,index:n},t}},{key:"getSubLayerAccessor",value:function(t){if("function"==typeof t){var e={data:this.props.data,target:[]};return function(n,r){return n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}}return t}},{key:"getSubLayerProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,n=e.opacity,r=e.pickable,i=e.visible,a=e.parameters,o=e.getPolygonOffset,s=e.highlightedObjectIndex,c=e.autoHighlight,u=e.highlightColor,l=e.coordinateSystem,f=e.coordinateOrigin,p=e.wrapLongitude,d=e.positionFormat,b=e.modelMatrix,g=e.extensions,m=e.fetch,y=e._subLayerProps,O={opacity:n,pickable:r,visible:i,parameters:a,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:c,highlightColor:u,coordinateSystem:l,coordinateOrigin:f,wrapLongitude:p,positionFormat:d,modelMatrix:b,extensions:g,fetch:m},_=y&&y[t.id],j=_&&_.updateTriggers,S=t.id||"sublayer";if(_){var w=this.constructor._propTypes,x=t.type?t.type._propTypes:{};for(var A in _){var P=x[A]||w[A];P&&"accessor"===P.type&&(_[A]=this.getSubLayerAccessor(_[A]))}}Object.assign(O,t,_),O.id="".concat(this.props.id,"-").concat(S),O.updateTriggers=v(v({all:this.props.updateTriggers.all},t.updateTriggers),j);var E,T=h(g);try{for(T.s();!(E=T.n()).done;){var I=E.value,M=I.getSubLayerProps.call(this,I);M&&Object.assign(O,M,{updateTriggers:Object.assign(O.updateTriggers,M.updateTriggers)})}}catch(R){T.e(R)}finally{T.f()}return O}},{key:"_updateAutoHighlight",value:function(t){var e,n=h(this.getSubLayers());try{for(n.s();!(e=n.n()).done;){e.value.updateAutoHighlight(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var t=this.internalState.subLayers,e=!t||this.needsUpdate();e&&(t=this.renderLayers(),t=Object(p.b)(t,Boolean),this.internalState.subLayers=t),Object(f.a)("compositeLayer.renderLayers",this,e,t);var n,r=h(t);try{for(r.s();!(n=r.n()).done;){n.value.parent=this}}catch(i){r.e(i)}finally{r.f()}}}]),n}(l.a);m.layerName="CompositeLayer"},"6pOq":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n("1OyB"),i=n("vuIU"),a=n("rePB"),o=n("17x9"),s=n("2lZV"),c=n("gYLD");var u={container:o.object,gl:o.object,mapboxApiAccessToken:o.string,mapboxApiUrl:o.string,attributionControl:o.bool,preserveDrawingBuffer:o.bool,reuseMaps:o.bool,transformRequest:o.func,mapOptions:o.object,mapStyle:o.oneOfType([o.string,o.object]),preventStyleDiffing:o.bool,visible:o.bool,asyncRender:o.bool,onLoad:o.func,onError:o.func,width:o.number,height:o.number,viewState:o.object,longitude:o.number,latitude:o.number,zoom:o.number,bearing:o.number,pitch:o.number,altitude:o.number},l={container:s.a.body,mapboxApiAccessToken:function(){var e=null;if("undefined"!=typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);e=n&&n[1]}e||void 0===t||(e=e||{}.MapboxAccessToken||{}.REACT_APP_MAPBOX_ACCESS_TOKEN);return e||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:function(){},onError:function(t){t&&console.error(t.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&o.checkPropTypes(u,t,"prop",e)}var p=function(){function t(e){var n=this;if(Object(r.a)(this,t),Object(a.a)(this,"props",l),Object(a.a)(this,"width",0),Object(a.a)(this,"height",0),Object(a.a)(this,"_fireLoadEvent",(function(){n.props.onLoad({type:"load",target:n._map})})),!e.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=e.mapboxgl,t.initialized||(t.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(e)}return Object(i.a)(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"redraw",value:function(){var t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(e){this._map=t.savedMap;var n=this._map.getContainer(),r=e.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,t.savedMap=null,e.mapStyle&&this._map.setStyle(Object(c.a)(e.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(e){if(e.reuseMaps&&t.savedMap)this._reuse(e);else{if(e.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,e.gl}}var r={container:e.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:Object(c.a)(e.mapStyle),interactive:!1,trackResize:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(r.transformRequest=e.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},r,e.mapOptions)),this._map.once("load",e.onLoad),this._map.on("error",e.onError)}return this}},{key:"_destroy",value:function(){this._map&&(t.savedMap?this._map.remove():(t.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function(t){var e=this;f(t=Object.assign({},l,t),"Mapbox"),this.mapboxgl.accessToken=t.mapboxApiAccessToken||l.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=t.mapboxApiUrl,this._create(t);var n=t.container;Object.defineProperty(n,"offsetWidth",{get:function(){return e.width}}),Object.defineProperty(n,"clientWidth",{get:function(){return e.width}}),Object.defineProperty(n,"offsetHeight",{get:function(){return e.height}}),Object.defineProperty(n,"clientHeight",{get:function(){return e.height}});var r=this._map.getCanvas();r&&(r.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t}},{key:"_update",value:function(t,e){if(this._map){f(e=Object.assign({},this.props,e),"Mapbox");var n=this._updateMapViewport(t,e),r=this._updateMapSize(t,e);this._updateMapStyle(t,e),e.asyncRender||!n&&!r||this.redraw(),this.props=e}}},{key:"_updateMapStyle",value:function(t,e){t.mapStyle!==e.mapStyle&&this._map.setStyle(Object(c.a)(e.mapStyle),{diff:!e.preventStyleDiffing})}},{key:"_updateMapSize",value:function(t,e){var n=t.width!==e.width||t.height!==e.height;return n&&(this.width=e.width,this.height=e.height,this._map.resize()),n}},{key:"_updateMapViewport",value:function(t,e){var n=this._getViewState(t),r=this._getViewState(e),i=r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude;return i&&(this._map.jumpTo(this._viewStateToMapboxProps(r)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude)),i}},{key:"_getViewState",value:function(t){var e=t.viewState||t,n=e.longitude,r=e.latitude,i=e.zoom,a=e.pitch,o=void 0===a?0:a,s=e.bearing,c=void 0===s?0:s,u=e.altitude;return{longitude:n,latitude:r,zoom:i,pitch:o,bearing:c,altitude:void 0===u?1.5:u}}},{key:"_checkStyleSheet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==s.a)try{var e=s.a.createElement("div");e.className="mapboxgl-map",e.style.display="none",s.a.body.appendChild(e);var n="static"!==window.getComputedStyle(e).position;if(!n){var r=s.a.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(t,"/mapbox-gl.css")),s.a.head.appendChild(r)}}catch(i){}}},{key:"_viewStateToMapboxProps",value:function(t){return{center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}}}]),t}();Object(a.a)(p,"initialized",!1),Object(a.a)(p,"propTypes",u),Object(a.a)(p,"defaultProps",l),Object(a.a)(p,"savedMap",null)}).call(this,n("8oxB"))},"9N29":function(t,e,n){"use strict";var r=n("I+eb"),i=n("1Y/n").right,a=n("pkCn"),o=n("rkAj"),s=n("LQDL"),c=n("YF1G"),u=a("reduceRight"),l=o("reduce",{1:0});r({target:"Array",proto:!0,forced:!u||!l||!c&&s>79&&s<83},{reduceRight:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"9Q0L":function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return b}));var r=n("1OyB"),i=n("vuIU"),a=n("rp2x"),o=n("gXd2"),s=n("Vyni"),c=n("3SJd");function u(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function l(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var o=n.apply(void 0,[t.state._updateCache].concat(i)),s=o.valueChanged,c=o.oldValue;return s&&r.apply(void 0,i),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function f(t){var e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}var p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,s=void 0!==i&&i,c=n.log,u=void 0===c?function(){}:c;Object(r.a)(this,t),this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=s?Object(o.a)(e):Object.assign({},a.c),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];Object(o.b)(this.gl,t),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t){Object(s.a)(void 0!==i);var a=t[i],o=this.cache[i];Object(c.a)(a,o)||(n=!0,e=o,r&&!(i in r)&&(r[i]=o),this.cache[i]=a)}return{valueChanged:n,oldValue:e}}}]),t}();function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(s.a)(void 0!==o),!e.state){var c=void 0!==t?t:window,h=c.polyfillContext;for(var d in h&&h(e),e.state=new p(e,{copyState:o}),f(e),a.b){var b=a.b[d];l(e,d,b)}u(e,"getParameter"),u(e,"isEnabled")}return e.state.enable=i,e}function d(t){t.state||h(t,{copyState:!1}),t.state.push()}function b(t){Object(s.a)(t.state),t.state.pop()}}).call(this,n("yLpj"))},G8qk:function(t,e,n){"use strict";n.d(e,"a",(function(){return Ut}));var r=n("o0o1"),i=n.n(r),a=n("rePB"),o=(n("ls82"),n("HaE+")),s=n("1OyB"),c=n("vuIU"),u=n("Ji7U"),l=n("md7G"),f=n("foSv"),p=n("0i8A"),h=n("V3d6"),d=n("5lV4"),b=n("FR1t"),v=n("ReuC"),g=n("K4gp"),m=n("BQ9P"),y=n("Jh/b"),O=n("K7jV"),_=n("DvX1"),j="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";function S(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var x={lightSources:{}};function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?[0,0,0]:e,r=t.intensity,i=void 0===r?1:r;return n.map((function(t){return t*i/255}))}function P(t){var e=t.ambientLight,n=t.pointLights,r=void 0===n?[]:n,i=t.directionalLights,a=void 0===i?[]:i,o={};return o["lighting_uAmbientLight.color"]=e?A(e):[0,0,0],r.forEach((function(t,e){o["lighting_uPointLight[".concat(e,"].color")]=A(t),o["lighting_uPointLight[".concat(e,"].position")]=t.position,o["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),o.lighting_uPointLightCount=r.length,a.forEach((function(t,e){o["lighting_uDirectionalLight[".concat(e,"].color")]=A(t),o["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),o.lighting_uDirectionalLightCount=a.length,o}var E={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[{name:"lights",vs:j,fs:j,getUniforms:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;if("lightSources"in e){var n=e.lightSources||{},r=n.ambientLight,i=n.pointLights,a=n.directionalLights,o=r||i&&i.length>0||a&&a.length>0;return o?Object.assign({},P({ambientLight:r,pointLights:i,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){var s,c={pointLights:[],directionalLights:[]},u=S(e.lights||[]);try{for(u.s();!(s=u.n()).done;){var l=s.value;switch(l.type){case"ambient":c.ambientLight=l;break;case"directional":c.directionalLights.push(l);break;case"point":c.pointLights.push(l)}}}catch(f){u.e(f)}finally{u.f()}return t({lightSources:c})}return{}},defines:{MAX_LIGHTS:3}}]},T=n("zXfU"),I=n("Nw31"),M=n("VdrS"),R=n("CxzY"),L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t);var n=e.id;this.id=n||Object(M.c)(this.constructor.name),this.display=!0,this.position=new T.a,this.rotation=new T.a,this.scale=new T.a(1,1,1),this.matrix=new I.a,this.userData={},this.props={},this._setScenegraphNodeProps(e)}return Object(c.a)(t,[{key:"delete",value:function(){}},{key:"setProps",value:function(t){return this._setScenegraphNodeProps(t),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(t){return Object(R.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return Object(R.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return Object(R.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrix",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.matrix.copy(t):this.matrix=t}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,r=t.scale,i=t.update,a=void 0===i||i;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,r=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){Object(R.a)(t),e=e||this.matrix;var n=new I.a(t).multiplyRight(e),r=n.invert(),i=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"_setScenegraphNodeProps",value:function(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}]),t}(),C=n("LNPn"),N=n("sc/6"),k=n("T2Hy"),D=n("KQm4");function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var F=function(t){Object(u.a)(n,t);var e=V(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,n);var i=r=Array.isArray(r)?{children:r}:r,a=i.children,o=void 0===a?[]:a;return C.e.assert(o.every((function(t){return t instanceof L})),"every child must an instance of ScenegraphNode"),(t=e.call(this,r)).children=o,t}return Object(c.a)(n,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];Array.isArray(a)?this.add.apply(this,Object(D.a)(a)):this.children.push(a)}return this}},{key:"remove",value:function(t){var e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach((function(t){return t.delete()})),this.removeAll(),Object(v.a)(Object(f.a)(n.prototype),"delete",this).call(this)}},{key:"traverse",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.worldMatrix,a=void 0===i?new I.a:i,o=new I.a(a).multiplyRight(this.matrix),s=B(this.children);try{for(s.s();!(e=s.n()).done;){var c=e.value;c instanceof n?c.traverse(t,{worldMatrix:o}):t(c,{worldMatrix:o})}}catch(u){s.e(u)}finally{s.f()}}}]),n}(L),z=n("Xjzu"),H={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},G={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Z(t){if(!t._animation){var e=G[t.componentType],n=H[t.type],r=n*t.count,i=t.bufferView.data,a=new e(i.buffer,i.byteOffset+(t.byteOffset||0),r);if(1===n)t._animation=Array.from(a);else{for(var o=[],s=0;s<a.length;s+=n)o.push(Array.from(a.slice(s,s+n)));t._animation=o}}return t._animation}var q=new I.a;var X=new z.a;function W(t,e,n,r){var i=e.input,a=e.interpolation,o=e.output,s=t%i[i.length-1],c=i.findIndex((function(t){return t>=s})),u=Math.max(0,c-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:C.e.warn("Bad animation path ".concat(r))()}Object(R.a)(n[r].length===o[u].length);var l=i[u],f=i[c];switch(a){case"STEP":!function(t,e,n){for(var r=0;r<n.length;r++)t[e][r]=n[r]}(n,r,o[u]);break;case"LINEAR":if(f>l){var p=(s-l)/(f-l);!function(t,e,n,r,i){if("rotation"===e){X.slerp({start:n,target:r,ratio:i});for(var a=0;a<X.length;a++)t[e][a]=X[a]}else for(var o=0;o<n.length;o++)t[e][o]=i*r[o]+(1-i)*n[o]}(n,r,o[u],o[c],p)}break;case"CUBICSPLINE":if(f>l){var h=(s-l)/(f-l),d=f-l;!function(t,e,n){for(var r=n.p0,i=n.outTangent0,a=n.inTangent1,o=n.p1,s=n.tDiff,c=n.ratio,u=0;u<t[e].length;u++){var l=i[u]*s,f=a[u]*s;t[e][u]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*r[u]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*l+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[u]+(Math.pow(c,3)-Math.pow(c,2))*f}}(n,r,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*c+0],p1:o[3*c+1],tDiff:d,ratio:h})}break;default:C.e.warn("Interpolation ".concat(a," not supported"))()}}var K=function(){function t(e){Object(s.a)(this,t),this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}return Object(c.a)(t,[{key:"animate",value:function(t){if(this.playing){var e=(t/1e3-this.startTime)*this.speed;this.channels.forEach((function(t){var n=t.sampler,r=t.target,i=t.path;W(e,n,r,i),function(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){var n=q.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(r,r._node)}))}}}]),t}(),J=function(){function t(e){Object(s.a)(this,t),this.animations=e.animations.map((function(t,n){var r=t.name||"Animation-".concat(n),i=t.samplers.map((function(t){var n=t.input,r=t.interpolation,i=void 0===r?"LINEAR":r,a=t.output;return{input:Z(e.accessors[n]),interpolation:i,output:Z(e.accessors[a])}})),a=t.channels.map((function(t){var n=t.sampler,r=t.target;return{sampler:i[n],target:e.nodes[r.node],path:r.path}}));return new K({name:r,channels:a})}))}return Object(c.a)(t,[{key:"animate",value:function(t){this.setTime(t)}},{key:"setTime",value:function(t){this.animations.forEach((function(e){return e.animate(t)}))}},{key:"getAnimations",value:function(){return this.animations}}]),t}(),Y=(new(n("d3wX").a)({id:"luma.gl"}),n("oJMS")),Q=(n("Hogv"),n("gXd2"),n("9Q0L"),n("xSaR"));n("Vyni");var $=Object(Q.isBrowser)();var tt=n("ykdB");function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var nt=function(t){Object(u.a)(n,t);var e=et(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,n),(r=e.call(this,i)).onBeforeRender=null,r.AfterRender=null,t instanceof tt.a?(r.model=t,r._setModelNodeProps(i)):r.model=new tt.a(t,i),r.managedResources=i.managedResources||[],r}return Object(c.a)(n,[{key:"setProps",value:function(t){return Object(v.a)(Object(f.a)(n.prototype),"setProps",this).call(this,t),this._setModelNodeProps(t),this}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach((function(t){return t.delete()})),this.managedResources=[]}},{key:"draw",value:function(){var t;return(t=this.model).draw.apply(t,arguments)}},{key:"setUniforms",value:function(){var t;return(t=this.model).setUniforms.apply(t,arguments),this}},{key:"setAttributes",value:function(){var t;return(t=this.model).setAttributes.apply(t,arguments),this}},{key:"updateModuleSettings",value:function(){var t;return(t=this.model).updateModuleSettings.apply(t,arguments),this}},{key:"_setModelNodeProps",value:function(t){this.model.setProps(t)}}]),n}(L),rt=n("d3kR"),it=n("tMmZ"),at=n("f5Sf");function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct=function(){function t(e,n){var r=n.attributes,i=n.material,a=n.pbrDebug,o=n.imageBasedLightingEnvironment,c=n.lights,u=n.useTangents;Object(s.a)(this,t),this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Object(rt.b)(e,it.a.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),a&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&u,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(c,"USE_LIGHTS"),this.defineIfPresent(a,"PBR_DEBUG"),i&&this.parseMaterial(i)}return Object(c.a)(t,[{key:"defineIfPresent",value:function(t,e){t&&(this.defines[e]=1)}},{key:"parseTexture",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},o=t.texture.source.image,s={};o.compressed?(n=o,s=Object(a.a)({},this.gl.TEXTURE_MIN_FILTER,o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR)):n={data:o};var c=new at.a(this.gl,st({id:t.name||t.id,parameters:st(st({},i),s),pixelStore:Object(a.a)({},this.gl.UNPACK_FLIP_Y_WEBGL,!1)},n));this.uniforms[e]=c,this.defineIfPresent(r,r),this.generatedTextures.push(c)}},{key:"parsePbrMetallicRoughness",value:function(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var e=t.metallicFactor,n=void 0===e?1:e,r=t.roughnessFactor,i=void 0===r?1:r;this.uniforms.u_MetallicRoughnessValues=[n,i]}},{key:"parseMaterial",value:function(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var e=t.normalTexture.scale,n=void 0===e?1:e;this.uniforms.u_NormalScale=n}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var r=t.occlusionTexture.strength,i=void 0===r?1:r;this.uniforms.u_OcclusionStrength=i}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){var a=t.alphaCutoff,o=void 0===a?.5:a;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=o}else"BLEND"===t.alphaMode&&(C.e.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}]),t}();function ut(t,e){return Object(Y.b)(t)?"#version 300 es\n".concat(e):e}var lt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ft={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},pt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),this.gl=e,this.options=Object.assign({},ft,n)}return Object(c.a)(t,[{key:"instantiate",value:function(t){var e=this;return this.gltf=t,(t.scenes||[]).map((function(t){return e.createScene(t)}))}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new J(this.gltf):null}},{key:"createScene",value:function(t){var e=this,n=(t.nodes||[]).map((function(t){return e.createNode(t)}));return new F({id:t.name||t.id,children:n})}},{key:"createNode",value:function(t){var e=this;if(!t._node){var n=(t.children||[]).map((function(t){return e.createNode(t)}));t.mesh&&n.push(this.createMesh(t.mesh));var r=new F({id:t.name||t.id,children:n});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){var i=(new I.a).fromQuaternion(t.rotation);r.matrix.multiplyRight(i)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}},{key:"createMesh",value:function(t){var e=this;if(!t._mesh){var n=(t.primitives||[]).map((function(n,r){return e.createPrimitive(n,r,t)})),r=new F({id:t.name||t.id,children:n});t._mesh=r}return t._mesh}},{key:"getVertexCount",value:function(t){C.e.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(t,e,n){return function(t,e){var n=e.id,r=e.drawMode,i=e.vertexCount,a=e.attributes,o=e.modelOptions,s=new ct(t,e);C.e.info(4,"createGLTFModel defines: ",s.defines)();var c=[];c.push.apply(c,Object(D.a)(s.generatedTextures)),c.push.apply(c,Object(D.a)(Object.values(a).map((function(t){return t.buffer}))));var u=new nt(t,Object.assign({id:n,drawMode:r,vertexCount:i,modules:[E],defines:s.defines,parameters:s.parameters,vs:ut(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:ut(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},o));return u.setProps({attributes:a}),u.setUniforms(s.uniforms),u}(this.gl,Object.assign({id:t.name||"".concat(n.name||n.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options))}},{key:"createAttributes",value:function(t,e){var n=this,r={};return Object.keys(t).forEach((function(e){r[e]=n.createAccessor(t[e],n.createBuffer(t[e],n.gl.ARRAY_BUFFER))})),e&&(r.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),C.e.info(4,"glTF Attributes",{attributes:t,indices:e,generated:r})(),r}},{key:"createBuffer",value:function(t,e){t.bufferView||(t.bufferView={});var n=t.bufferView;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[e]||(n.lumaBuffers[e]=new N.a(this.gl,{id:"from-".concat(n.id),data:n.data||t.value,target:e})),n.lumaBuffers[e]}},{key:"createAccessor",value:function(t,e){return new k.a({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:lt[t.type]})}},{key:"createSampler",value:function(t){return t}},{key:"needsPOT",value:function(){return!1}}]),t}();var ht=n("p/I1");function dt(){return(dt=Object(o.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.scenes.forEach((function(t){t.traverse((function(t){Object.values(t.model.getUniforms()).forEach((function(t){!1===t.loaded&&n.push(t)}))}))})),t.next=4,bt((function(){return n.some((function(t){return!t.loaded}))}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t){return vt.apply(this,arguments)}function vt(){return(vt=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e()){t.next=5;break}return t.next=3,new Promise((function(t){return requestAnimationFrame(t)}));case 3:t.next=0;break;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gt=n("HIr8");function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var _t=[255,255,255,255],jt={scenegraph:{type:"object",value:null,async:!0},getScene:function(t){return t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t},getAnimator:function(t){return t&&t.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:_t},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[ht.a]},St=function(t){Object(u.a)(n,t);var e=Ot(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getShaders",value:function(){var t=[g.a,m.a];return"pbr"===this.props._lighting&&t.push(E),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:_t,transition:!0},instanceModelMatrix:gt.a})}},{key:"updateState",value:function(t){Object(v.a)(Object(f.a)(n.prototype),"updateState",this).call(this,t);var e=t.props,r=t.oldProps;e.scenegraph!==r.scenegraph?this._updateScenegraph(e):e._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,e._animations)}},{key:"finalizeState",value:function(){Object(v.a)(Object(f.a)(n.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(t){var e=this,n=this.context.gl,r=null;if(t.scenegraph instanceof L)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){var i=t.scenegraph,a=function(t,e,n){var r=new pt(t,n);return{scenes:r.instantiate(e),animator:r.createAnimator()}}(n,i,this._getModelOptions());r=yt({gltf:i},a),function(t){return dt.apply(this,arguments)}(a).then((function(){return e.setNeedsRedraw()}))}else t.scenegraph&&(y.a.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);var o={layer:this,gl:n},s=t.getScene(r,o),c=t.getAnimator(r,o);s instanceof L?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,c,t._animations),this.setState({scenegraph:s,animator:c})):null!==s&&y.a.warn("invalid scenegraph:",s)()}},{key:"_applyAllAttributes",value:function(t){var e=this;if(this.state.attributesAvailable){var n=this.getAttributeManager().getAttributes();t.traverse((function(t){e._setModelAttributes(t.model,n)}))}}},{key:"_applyAnimationsProp",value:function(t,e,n){if(t&&e&&n){var r=e.getAnimations();Object.keys(n).sort().forEach((function(t){var e=n[t];if("*"===t)r.forEach((function(t){Object.assign(t,e)}));else if(Number.isFinite(Number(t))){var i=Number(t);i>=0&&i<r.length?Object.assign(r[i],e):y.a.warn("animation ".concat(t," not found"))()}else{var a=r.find((function(e){return e.name===t}));a?Object.assign(a,e):y.a.warn("animation ".concat(t," not found"))()}}))}}},{key:"_deleteScenegraph",value:function(){var t=this.state.scenegraph;t instanceof L&&t.delete()}},{key:"_getModelOptions",value:function(){var t=this.props._imageBasedLightingEnvironment,e=null;return t&&(e="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:e,modelOptions:yt({isInstanced:!0,transpileToGLSL100:!Object(_.e)(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(t){var e=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((function(n){e._setModelAttributes(n.model,t)}))}},{key:"draw",value:function(t){var e=t.moduleParameters,n=void 0===e?null:e,r=t.parameters,i=void 0===r?{}:r,a=t.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(a.timeline.getTime()),this.setNeedsRedraw());var o=this.context.viewport,s=this.props,c=s.sizeScale,u=s.sizeMinPixels,l=s.sizeMaxPixels,f=s.opacity,p=s.coordinateSystem,h=this.getNumInstances();this.state.scenegraph.traverse((function(t,e){var r=e.worldMatrix;t.model.setInstanceCount(h),t.updateModuleSettings(n),t.draw({parameters:i,uniforms:{sizeScale:c,opacity:f,sizeMinPixels:u,sizeMaxPixels:l,composeModelMatrix:Object(gt.b)(o,p),sceneModelMatrix:r,u_Camera:t.model.getUniforms().project_uCameraPosition}})}))}}}]),n}(O.a);St.layerName="ScenegraphLayer",St.defaultProps=jt;var wt={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[n("SfzV").a]},xt=n("+w+S");function At(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Tt=function(t){Object(u.a)(n,t);var e=Et(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"getShaders",value:function(){var t=Object(v.a)(Object(f.a)(n.prototype),"getShaders",this).call(this);return t.modules.push(wt),Pt(Pt({},t),{},{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nuniform bool u_pickFeatureIds;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec4 uvRegions;\nin vec3 featureIdsPickingColors;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  vec2 uv = fract(texCoords) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;\n\n  geometry.uv = uv;\n  geometry.uv = texCoords;\n\n  if (u_pickFeatureIds) {\n    geometry.pickingColor = featureIdsPickingColors;\n  } else {\n    geometry.pickingColor = instancePickingColors;\n  }\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * normals);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = uv;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vTexCoord = uv;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale;\n  vec3 projectedPosition = project_position(positions);\n  position_commonspace = vec4(projectedPosition, 1.0);\n  gl_Position = project_common_position_to_clipspace(position_commonspace);\n\n  geometry.position = position_commonspace;\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  \n#ifdef MODULE_PBR\n\n  fragColor = vColor * pbr_filterColor(vec4(0));\n  geometry.uv = pbr_vUV;\n  fragColor.a *= opacity;\n\n#else\n\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n#endif\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"})}},{key:"initializeState",value:function(){var t=this.props.featureIds;Object(v.a)(Object(f.a)(n.prototype),"initializeState",this).call(this),t&&this.state.attributeManager.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}},{key:"updateState",value:function(t){var e=t.props,r=t.oldProps,i=t.changeFlags;Object(v.a)(Object(f.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:r,changeFlags:i}),e.pbrMaterial!==r.pbrMaterial&&this.updatePbrMaterialUniforms(e.pbrMaterial)}},{key:"draw",value:function(t){var e=this.props.featureIds;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,u_pickFeatureIds:Boolean(e)}),Object(v.a)(Object(f.a)(n.prototype),"draw",this).call(this,t))}},{key:"getModel",value:function(t){var e,n=this.props,r=n.id,i=n.pbrMaterial,a=this.parseMaterial(i,t),o=this.getShaders();return(e=t.attributes).COLOR_0||e.colors||(e.colors={constant:!0,value:new Float32Array([1,1,1])}),e.uvRegions||(e.uvRegions={constant:!0,value:new Float32Array([0,0,1,1])}),new tt.a(this.context.gl,Pt(Pt({},this.getShaders()),{},{id:r,geometry:t,defines:Pt(Pt({},o.defines),null==a?void 0:a.defines),parameters:null==a?void 0:a.parameters,isInstanced:!0}))}},{key:"updatePbrMaterialUniforms",value:function(t){var e=this.state.model;if(e){var n=this.props.mesh,r=this.parseMaterial(t,n);e.setUniforms(r.uniforms)}}},{key:"parseMaterial",value:function(t,e){var n=Boolean(t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorTexture);return new ct(this.context.gl,{attributes:{NORMAL:e.attributes.normals,TEXCOORD_0:e.attributes.texCoords},material:Pt({unlit:n},t),pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}},{key:"calculateFeatureIdsPickingColors",value:function(t){for(var e=this.props.featureIds,n=new Uint8ClampedArray(e.length*t.size),r=[],i=0;i<e.length;i++)this.encodePickingColor(e[i],r),n[3*i]=r[0],n[3*i+1]=r[1],n[3*i+2]=r[2];t.value=n}}]),n}(xt.a);Tt.layerName="_MeshLayer",Tt.defaultProps={pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}};var It=n("xszv"),Mt=n("Fqdk"),Rt=n("FJ6+"),Lt=n("q1ac");function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Dt=[0],Bt={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:null,loader:Lt.a,onTilesetLoad:{type:"function",value:function(t){},compare:!1},onTileLoad:{type:"function",value:function(t){},compare:!1},onTileUnload:{type:"function",value:function(t){},compare:!1},onTileError:{type:"function",value:function(t,e,n){},compare:!1},_getMeshColor:{type:"function",value:function(t){return[255,255,255]},compare:!1}},Ut=function(t){Object(u.a)(r,t);var e,n=kt(r);function r(){return Object(s.a)(this,r),n.apply(this,arguments)}return Object(c.a)(r,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&y.a.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}},{key:"isLoaded",get:function(){var t=this.state.tileset3d;return t&&t.isLoaded()}},{key:"shouldUpdateState",value:function(t){return t.changeFlags.somethingChanged}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags;if(e.data&&e.data!==n.data&&this._loadTileset(e.data),r.viewportChanged){var i=this.state.activeViewports;Object.keys(i).length&&(this._updateTileset(i),this.state.lastUpdatedViewports=i,this.state.activeViewports={})}if(r.propsChanged){var a=this.state.layerMap;for(var o in a)a[o].needsUpdate=!0}}},{key:"activateViewport",value:function(t){var e=this.state,n=e.activeViewports,r=e.lastUpdatedViewports;this.internalState.viewport=t,n[t.id]=t;var i=null==r?void 0:r[t.id];i&&t.equals(i)||(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}},{key:"getPickingInfo",value:function(t){var e=t.info,n=t.sourceLayer,r=this.state.layerMap,i=n&&n.id;if(i){var a=i.substring(this.id.length+1),o=a.substring(a.indexOf("-")+1);e.object=r[o]&&r[o].tile}return e}},{key:"filterSubLayer",value:function(t){var e=t.layer,n=t.viewport,r=e.props.tile,i=n.id;return r.viewportIds.includes(i)}},{key:"_updateAutoHighlight",value:function(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}},{key:"_loadTileset",value:(e=Object(o.a)(i.a.mark((function t(e){var n,r,a,o,s,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props.loadOptions,r=void 0===n?{}:n,a=this.props.loader||this.props.loaders,Array.isArray(a)&&(a=a[0]),o={loadOptions:Nt({},r)},!a.preload){t.next=10;break}return t.next=7,a.preload(e,r);case 7:(s=t.sent).headers&&(o.loadOptions.fetch=Nt(Nt({},o.loadOptions.fetch),{},{headers:s.headers})),Object.assign(o,s);case 10:return t.next=12,Object(It.a)(e,a,o.loadOptions);case 12:c=t.sent,u=new Mt.a(c,Nt({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileLoadFail:this.props.onTileError},o)),this.setState({tileset3d:u,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(u);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_onTileLoad",value:function(t){var e=this.state.lastUpdatedViewports;this.props.onTileLoad(t),this._updateTileset(e),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(t){delete this.state.layerMap[t.id],this.props.onTileUnload(t)}},{key:"_updateTileset",value:function(t){var e=this.state.tileset3d,n=this.context.timeline,r=Object.keys(t).length;if(n&&r&&e){var i=e.update(Object.values(t));this.state.frameNumber!==i&&this.setState({frameNumber:i})}}},{key:"_getSubLayer",value:function(t,e){if(!t.content)return null;switch(t.type){case Rt.f.POINTCLOUD:return this._makePointCloudLayer(t,e);case Rt.f.SCENEGRAPH:return this._make3DModelLayer(t,e);case Rt.f.MESH:return this._makeSimpleMeshLayer(t,e);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(t.content.type))}}},{key:"_makePointCloudLayer",value:function(t,e){var n=t.content,r=n.attributes,i=n.pointCount,a=n.constantRGBA,o=n.cartographicOrigin,s=n.modelMatrix,c=r.positions,u=r.normals,l=r.colors;if(!c)return null;var f=e&&e.props.data||{header:{vertexCount:i},attributes:{POSITION:c,NORMAL:u,COLOR_0:l}},p=this.props,d=p.pointSize,v=p.getPointColor;return new(this.getSubLayerClass("pointcloud",b.a))({pointSize:d},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(t.id),tile:t,data:f,coordinateSystem:h.a.METER_OFFSETS,coordinateOrigin:o,modelMatrix:s,getColor:a||v})}},{key:"_make3DModelLayer",value:function(t){var e=t.content,n=e.gltf,r=e.instances,i=e.cartographicOrigin,a=e.modelMatrix;return new(this.getSubLayerClass("scenegraph",St))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(t.id),tile:t,data:r||Dt,scenegraph:n,coordinateSystem:h.a.METER_OFFSETS,coordinateOrigin:i,modelMatrix:a,getTransformMatrix:function(t){return t.modelMatrix},getPosition:[0,0,0]})}},{key:"_makeSimpleMeshLayer",value:function(t,e){var n=t.content,r=n.attributes,i=n.indices,a=n.modelMatrix,o=n.cartographicOrigin,s=n.material,c=n.featureIds,u=this.props._getMeshColor,l=e&&e.props.mesh||new p.a({drawMode:4,attributes:Vt(r),indices:i});return new(this.getSubLayerClass("mesh",Tt))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(t.id),tile:t,mesh:l,data:Dt,getColor:u(t),pbrMaterial:s,modelMatrix:a,coordinateOrigin:o,coordinateSystem:h.a.METER_OFFSETS,featureIds:c})}},{key:"renderLayers",value:function(){var t=this,e=this.state,n=e.tileset3d,r=e.layerMap;return n?n.tiles.map((function(e){var n=r[e.id]=r[e.id]||{tile:e},i=n.layer;return e.selected?i?n.needsUpdate?(i=t._getSubLayer(e,i),n.needsUpdate=!1):i.props.visible||(i=i.clone({visible:!0})):i=t._getSubLayer(e):i&&i.props.visible&&(i=i.clone({visible:!1})),n.layer=i,i})).filter(Boolean):null}}]),r}(d.a);function Vt(t){var e={};return e.positions=Nt(Nt({},t.positions),{},{value:new Float32Array(t.positions.value)}),t.normals&&(e.normals=t.normals),t.texCoords&&(e.texCoords=t.texCoords),t.colors&&(e.colors=t.colors),t.uvRegions&&(e.uvRegions=t.uvRegions),e}Ut.layerName="Tile3DLayer",Ut.defaultProps=Bt},HIr8:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return h}));var r=n("rpwb"),i=n("V3d6");function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=Math.PI/180,c=new Float32Array(16),u=new Float32Array(12);function l(t,e,n){var r=e[0]*s,i=e[1]*s,a=e[2]*s,o=Math.sin(a),c=Math.sin(r),u=Math.sin(i),l=Math.cos(a),f=Math.cos(r),p=Math.cos(i),h=n[0],d=n[1],b=n[2];t[0]=h*p*f,t[1]=h*u*f,t[2]=h*-c,t[3]=d*(-u*l+p*c*o),t[4]=d*(p*l+u*c*o),t[5]=d*f*o,t[6]=b*(u*o+p*c*l),t[7]=b*(-p*o+u*c*l),t[8]=b*f*l}function f(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var p={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(t,e){var n=e.startRow,i=e.endRow,o=this.props,s=o.data,p=o.getOrientation,h=o.getScale,d=o.getTranslation,b=o.getTransformMatrix,v=Array.isArray(b),g=v&&16===b.length,m=Array.isArray(h),y=Array.isArray(p),O=Array.isArray(d),_=g||!v&&Boolean(b(s[0]));t.constant=_?g:y&&m&&O;var j=t.value;if(t.constant){var S;if(_)c.set(b),S=f(c);else l(S=u,p,h),S.set(d,9);t.value=new Float32Array(S)}else{var w,x=n*t.size,A=Object(r.a)(s,n,i),P=A.iterable,E=A.objectInfo,T=a(P);try{for(T.s();!(w=T.n()).done;){var I=w.value;E.index++;var M=void 0;if(_)c.set(g?b:b(I,E)),M=f(c);else l(M=u,y?p:p(I,E),m?h:h(I,E)),M.set(O?d:d(I,E),9);j[x++]=M[0],j[x++]=M[1],j[x++]=M[2],j[x++]=M[3],j[x++]=M[4],j[x++]=M[5],j[x++]=M[6],j[x++]=M[7],j[x++]=M[8],j[x++]=M[9],j[x++]=M[10],j[x++]=M[11]}}catch(R){T.e(R)}finally{T.f()}}}};function h(t,e){return e===i.a.CARTESIAN||e===i.a.METER_OFFSETS||e===i.a.DEFAULT&&!t.isGeospatial}},Hogv:function(t,e,n){"use strict";(function(t){var e=n("JrVf"),r=n("Vyni"),i=n("P5C6");function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n=e.extension,a=e.target,o=e.target2,s=i.b[n];Object(r.a)(s);for(var c=s.meta,u=(void 0===c?{}:c).suffix,l=void 0===u?"":u,f=t.getExtension(n),p=function(){var e=d[h],n="".concat(e).concat(l),r=null;"meta"===e||"function"==typeof t[e]||(f&&"function"==typeof f[n]?r=function(){return f[n].apply(f,arguments)}:"function"==typeof s[e]&&(r=s[e].bind(a))),r&&(a[e]=r,o[e]=r)},h=0,d=Object.keys(s);h<d.length;h++)p()}(void 0!==t?t:window).polyfillContext=function(t){t.luma=t.luma||{};var n=t.luma;return n.polyfilled||(Object(e.a)(t),function(t){t.luma.extensions={};var e,n=a(t.getSupportedExtensions()||[]);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.luma[r]=t.getExtension(r)}}catch(i){n.e(i)}finally{n.f()}}(t),function(t,e){var n,r=a(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"overrides"!==i&&s(t,{extension:i,target:t.luma,target2:t})}}catch(o){r.e(o)}finally{r.f()}}(t,i.b),function(t,e){var n=e.target,r=e.target2;Object.keys(i.a).forEach((function(e){if("function"==typeof i.a[e]){var a=t[e]?t[e].bind(t):function(){},o=i.a[e].bind(null,t,a);n[e]=o,r[e]=o}}))}(t,{target:n,target2:t}),n.polyfilled=!0),t}}).call(this,n("yLpj"))},J4mz:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n("1OyB"),i=n("vuIU"),a=1048576,o=1024*a;function s(t){var e,n,r;return t<1?(e=1e3*t,n="s",r=0):t<1e3?(e=t,n="ms",r=2):(e=t/1e3,n="s",r=2),"".concat(e.toFixed(r)).concat(n)}var c=n("VwXc"),u=function(){function t(e,n){Object(r.a)(this,t),this.name=e,this.type=n,this.sampleSize=1,this.reset()}return Object(i.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(c.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(c.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),l=function(){function t(e){var n=e.id,i=e.stats;Object(r.a)(this,t),this.id=n,this.stats={},this._initializeStats(i),Object.seal(this)}return Object(i.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof u?t:new u(e,n)),this.stats[e]}}]),t}(),f={position:"fixed",zIndex:1e4,color:"#ccc",background:"#000",fontFamily:"Helvetica,Arial,sans-serif",padding:"8px",fontSize:"12px",lineSpacing:6},p={fontSize:"16px"},h={paddingLeft:"8px"},d={count:function(t){return"".concat(t.name,": ").concat(t.count)},averageTime:function(t){return"".concat(t.name,": ").concat(s(t.getAverageTime()))},totalTime:function(t){return"".concat(t.name,": ").concat(s(t.time))},fps:function(t){return"".concat(t.name,": ").concat(Math.round(t.getHz()),"fps")},memory:function(t){return"".concat(t.name,": ").concat(((e=t.count)<1024?(n=e,r=" bytes",i=0):e<a?(n=e/1024,r="kB",i=2):e<o?(n=e/a,r="MB",i=2):(n=e/o,r="GB",i=2),"".concat(n.toFixed(i)).concat(r)));var e,n,r,i}},b=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.stats=e,this.title=n.title,this._framesPerUpdate=Math.round(Math.max(n.framesPerUpdate||1,1)),this._formatters=d,this._resetOnUpdate={},this._counter=0,this._initializeFormatters(n),this._initializeUpdateConfigs(n),this._css=Object.assign({},f,n.css),this._headerCSS=Object.assign({},p,this._css.header),this._itemCSS=Object.assign({},h,this._css.item),delete this._css.header,delete this._css.item,this._container=null,this._header=null,this._items={},this._createDOM(n.container),this._createDOMHeader(),this._createDOMStats()}return Object(i.a)(t,[{key:"setStats",value:function(t){this.stats=t,this._createDOMStats(this._container),this._setHeaderContent(t.id),this.update()}},{key:"update",value:function(){var t=this.stats&&this.stats.stats;t&&0!==Object.keys(t).length&&this._counter++%this._framesPerUpdate==0&&this._update()}},{key:"_update",value:function(){var t=this;this.stats.forEach((function(e){t._createDOMItem(e.name),t._items[e.name].innerHTML=t._getLines(e).join("<BR>"),t._resetOnUpdate[e.name]&&e.reset()}))}},{key:"_initializeFormatters",value:function(t){if(t.formatters)for(var e in t.formatters){var n=t.formatters[e];"string"==typeof n&&(n=d[n]),this._formatters[e]=n}}},{key:"_initializeUpdateConfigs",value:function(t){if(t.resetOnUpdate)for(var e in t.resetOnUpdate)this._resetOnUpdate[e]=t.resetOnUpdate[e]}},{key:"_createDOM",value:function(t){if("undefined"!=typeof document&&document&&(this._container=t,!this._container)){for(var e in this._container=document.createElement("div"),this._css)this._container.style[e]=this._css[e];document.body.appendChild(this._container)}}},{key:"_createDOMHeader",value:function(){if(!this._header){for(var t in this._header=document.createElement("div"),this._headerCSS)this._header.style[t]=this._headerCSS[t];this._container.appendChild(this._header)}this._setHeaderContent()}},{key:"_setHeaderContent",value:function(t){this._header&&(this._header.innerText=t||this.title||this.stats&&this.stats.id||"")}},{key:"_createDOMStats",value:function(){var t=this;this.stats instanceof l&&this.stats.forEach((function(e){t._createDOMItem(e.name)}))}},{key:"_createDOMItem",value:function(t){if(this._container&&!this._items[t]){for(var e in this._items[t]=document.createElement("div"),this._itemCSS)this._items[t].style[e]=this._itemCSS[e];this._container.appendChild(this._items[t])}}},{key:"_getLines",value:function(t){return(this._formatters[t.name]||this._formatters[t.type]||d.count)(this.stats.get(t.name)).split("\n")}}]),t}()},JrVf:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("xSaR"),i={};function a(t,e){var n;i[t]=!0,void 0!==e&&(n=e,r.global.console&&r.global.console.error&&r.global.console.error(n))}var o=function t(e){var n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(var r=0;r<this.attribs.length;r++){var i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};(o.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var s=function(t){var e=this;this.gl=t,function(t){var e=t.getError;t.getError=function(){var n;do{0!==(n=e.apply(t))&&(i[n]=!0)}while(0!==n);for(n in i)if(i[n])return delete i[n],parseInt(n,10);return 0}}(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);var i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){var i=e.currentVertexArrayObject,a=i.attribs[t];switch(r){case 34975:return a.buffer;case 34338:return a.enabled;case 34339:return a.size;case 34340:return a.stride;case 34341:return a.type;case 34922:return a.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,a,o,s){var c=e.currentVertexArrayObject;c.maxAttrib=Math.max(c.maxAttrib,t);var u=c.attribs[t];return u.buffer=e.currentArrayBuffer,u.size=r,u.type=i,u.normalized=a,u.stride=o,u.offset=s,u.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(function(){var t;t="OESVertexArrayObject emulation library context restored",r.global.console&&r.global.console.log&&r.global.console.log(t),e.reset_()}),!0),this.reset_()};function c(t){if("function"!=typeof t.createVertexArray){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var n=t.getExtension;t.getExtension=function(e){var r=n.call(this,e);return r||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new s(this)),this.__OESVertexArrayObject))}}}s.prototype.VERTEX_ARRAY_BINDING_OES=34229,s.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(34921),this.defaultVertexArrayObject=new o(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},s.prototype.createVertexArrayOES=function(){var t=new o(this);return this.vertexArrayObjects.push(t),t},s.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},s.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof o&&t.hasBeenBound&&t.ext===this)},s.prototype.bindVertexArrayOES=function(t){var e=this.gl;if(!t||t.isAlive){var n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var i=this.currentVertexArrayObject;if(r!==i){r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);for(var o=this.currentArrayBuffer,s=Math.max(r?r.maxAttrib:0,i.maxAttrib),c=0;c<=s;c++){var u=i.attribs[c],l=r?r.attribs[c]:null;if(r&&u.enabled===l.enabled||(u.enabled?n.enableVertexAttribArray.call(e,c):n.disableVertexAttribArray.call(e,c)),u.enabled){var f=!1;r&&u.buffer===l.buffer||(o!==u.buffer&&(n.bindBuffer.call(e,34962,u.buffer),o=u.buffer),f=!0),(f||u.cached!==l.cached)&&n.vertexAttribPointer.call(e,c,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}}else a(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")}},"Oz/4":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("md7G"),s=n("foSv"),c=n("sYR6"),u=n("a3TU"),l=n("+H0l"),f=n("ZxFD"),p=n("sSh/");function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var d=function(t){Object(a.a)(n,t);var e=h(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,n),t=e.call(this,2),Object(u.f)(i)&&1===arguments.length?t.copy(i):(u.b.debug&&(Object(l.a)(i),Object(l.a)(a)),t[0]=i,t[1]=a),t}return Object(i.a)(n,[{key:"set",value:function(t,e){return this[0]=t,this[1]=e,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this.check()}},{key:"fromObject",value:function(t){return u.b.debug&&(Object(l.a)(t.x),Object(l.a)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return f.j(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return Object(p.a)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return f.i(this,this,t),this.check()}},{key:"transformByMatrix2x3",value:function(t){return f.h(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return f.g(this,this,t),this.check()}}]),n}(c.a)},P5C6:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f}));var r,i,a=n("rePB"),o=n("Vyni"),s=n("oJMS"),c=function(t){return Object(s.b)(t)?void 0:0},u=(r={},Object(a.a)(r,3074,(function(t){return Object(s.b)(t)?void 0:36064})),Object(a.a)(r,35723,(function(t){return Object(s.b)(t)?void 0:4352})),Object(a.a)(r,35977,c),Object(a.a)(r,32937,c),Object(a.a)(r,36795,(function(t,e){var n=Object(s.b)(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0})),Object(a.a)(r,37445,(function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(a.a)(r,37446,(function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(a.a)(r,34047,(function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(a.a)(r,32883,c),Object(a.a)(r,35071,c),Object(a.a)(r,37447,c),Object(a.a)(r,36063,(function(t,e){if(!Object(s.b)(t)){var n=t.getExtension("WEBGL_draw_buffers");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(a.a)(r,35379,c),Object(a.a)(r,35374,c),Object(a.a)(r,35377,c),Object(a.a)(r,34852,(function(t){if(!Object(s.b)(t)){var e=t.getExtension("WEBGL_draw_buffers");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(a.a)(r,36203,(function(t){return t.getExtension("OES_element_index")?2147483647:65535})),Object(a.a)(r,33001,(function(t){return t.getExtension("OES_element_index")?16777216:65535})),Object(a.a)(r,33e3,(function(t){return 16777216})),Object(a.a)(r,37157,c),Object(a.a)(r,35373,c),Object(a.a)(r,35657,c),Object(a.a)(r,36183,c),Object(a.a)(r,37137,c),Object(a.a)(r,34045,c),Object(a.a)(r,35978,c),Object(a.a)(r,35979,c),Object(a.a)(r,35968,c),Object(a.a)(r,35376,c),Object(a.a)(r,35375,c),Object(a.a)(r,35659,c),Object(a.a)(r,37154,c),Object(a.a)(r,35371,c),Object(a.a)(r,35658,c),Object(a.a)(r,35076,c),Object(a.a)(r,35077,c),Object(a.a)(r,35380,c),r);var l=(i={},Object(a.a)(i,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(o.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(i,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){Object(o.a)(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},getQueryObject:function(){}}),i),f={readBuffer:function(t,e,n){Object(s.b)(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,a=function(t,e){return{webgl2:Object(s.b)(t),ext:t.getExtension(e)}}(t,"ANGLE_instanced_arrays"),o=a.webgl2,c=a.ext;switch(r){case 35069:i=!!o&&void 0;break;case 35070:i=o||c?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!Object(s.b)(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){if(!Object(s.b)(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter:function(t,e,n,r){switch(r){case 34046:var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){var r=u[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:function(t,e,n,r){return e(n,r)}}},TYJr:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n("Qk7e");function i(t,e){return Object(r.a)(t>=0),Object(r.a)(e>0),t+(e-1)&~(e-1)}function a(t,e,n){var r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{var a=t.byteOffset,o=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,a,o)}return e.set(r,n),n+i(r.byteLength,4)}},UP1k:function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return yt}));var i=n("KQm4"),a=n("rePB"),o=n("q1tI"),s=n("17x9"),c=n("ODXe"),u=n("1OyB"),l=n("vuIU"),f=n("bl9R");function p(t,e){var n=f.n([],e,t);return f.k(n,n,1/n[3]),n}function h(t,e){var n=t%e;return n<0?e+n:n}function d(t,e,n){return n*e+(1-n)*t}var b=n("ZaHm"),v=n("ZxFD"),g=n("n+fv");function m(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var y=Math.PI,O=y/4,_=y/180,j=180/y;function S(t){return Math.pow(2,t)}function w(t){return Math.log2(t)}function x(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];m(Number.isFinite(n)),m(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var i=r*_;return[512*(n*_+y)/(2*y),512*(y+Math.log(Math.tan(O+.5*i)))/(2*y)]}function A(t){var e=Object(c.a)(t,2),n=e[0],r=e[1],i=n/512*(2*y)-y,a=2*(Math.atan(Math.exp(r/512*(2*y)-y))-O);return[i*j,a*j]}function P(t){var e=t.latitude,n=t.longitude,r=t.highPrecision,i=void 0!==r&&r;m(Number.isFinite(e)&&Number.isFinite(n));var a={},o=Math.cos(e*_),s=512/360/o,c=512/4003e4/o;if(a.unitsPerMeter=[c,c,c],a.metersPerUnit=[1/c,1/c,1/c],a.unitsPerDegree=[512/360,s,c],a.degreesPerUnit=[.703125,1/s,1/c],i){var u=_*Math.tan(e*_)/o,l=512/360*u/2,f=512/4003e4*u,p=f/s*c;a.unitsPerDegree2=[0,l,f],a.unitsPerMeter2=[p,0,p]}return a}function E(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,a=t.scale,o=t.center,s=void 0===o?null:o,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return b.p(c,c,[0,0,-i]),b.l(c,c,-n*_),b.n(c,c,r*_),a/=e,b.o(c,c,[a,a,a]),s&&b.p(c,c,g.j([],s)),c}function T(t){var e=t.width,n=t.height,r=t.pitch,i=function(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?1.5:r,a=t.pitch,o=void 0===a?0:a,s=t.nearZMultiplier,c=void 0===s?1:s,u=t.farZMultiplier,l=void 0===u?1:u,f=o*_,p=Math.atan(.5/i),h=Math.sin(p)*i/Math.sin(Math.min(Math.max(Math.PI/2-f-p,.01),Math.PI-.01));return{fov:2*p,aspect:e/n,focalDistance:i,near:c,far:(Math.sin(f)*h+i)*l}}({width:e,height:n,altitude:t.altitude,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),a=i.fov,o=i.aspect,s=i.near,c=i.far;return b.j([],a,o,s,c)}function I(t,e){var n=Object(c.a)(t,3),r=n[0],i=n[1],a=n[2],o=void 0===a?0:a;return m(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o)),p(e,[r,i,o,1])}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(c.a)(t,3),i=r[0],a=r[1],o=r[2];if(m(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=p(e,[i,a,o,1]);return s}var u=p(e,[i,a,0,1]),l=p(e,[i,a,1,1]),f=u[2],h=l[2],d=f===h?0:((n||0)-f)/(h-f);return v.c([],u,l,d)}function R(t){var e=t.width,n=t.height,r=t.bounds,i=t.minExtent,a=void 0===i?0:i,o=t.maxZoom,s=void 0===o?24:o,u=t.padding,l=void 0===u?0:u,f=t.offset,p=void 0===f?[0,0]:f,h=Object(c.a)(r,2),d=Object(c.a)(h[0],2),b=d[0],v=d[1],g=Object(c.a)(h[1],2),y=g[0],O=g[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else m(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var _=new k({width:e,height:n,longitude:0,latitude:0,zoom:0}),j=_.project([b,O]),S=_.project([y,v]),w=[Math.max(Math.abs(S[0]-j[0]),a),Math.max(Math.abs(S[1]-j[1]),a)],x=[e-l.left-l.right-2*Math.abs(p[0]),n-l.top-l.bottom-2*Math.abs(p[1])];m(x[0]>0&&x[1]>0);var A=x[0]/w[0],P=x[1]/w[1],E=(l.right-l.left)/2/A,T=(l.bottom-l.top)/2/P,I=[(S[0]+j[0])/2+E,(S[1]+j[1])/2+T],M=_.unproject(I),R=Math.min(s,_.zoom+Math.log2(Math.abs(Math.min(A,P))));return m(Number.isFinite(R)),{longitude:M[0],latitude:M[1],zoom:R}}var L=Math.PI/180;function C(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.width,a=t.height,o=t.unproject,s={targetZ:r},c=o([0,a],s),u=o([i,a],s),l=Math.atan(.5/t.altitude),f=(90-t.pitch)*L;return l>f-.01?(e=N(t,0,r),n=N(t,i,r)):(e=o([0,0],s),n=o([i,0],s)),[c,u,n,e]}function N(t,e,n){var r=t.pixelUnprojectionMatrix,i=p(r,[e,0,1,1]),a=p(r,[e,t.height,1,1]),o=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(a[2]-i[2]),s=A(v.c([],i,a,o));return s[2]=n,s}var k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},n=e.width,r=e.height,i=e.latitude,a=void 0===i?0:i,o=e.longitude,s=void 0===o?0:o,c=e.zoom,l=void 0===c?0:c,f=e.pitch,p=void 0===f?0:f,h=e.bearing,d=void 0===h?0:h,b=e.altitude,v=void 0===b?1.5:b,g=e.nearZMultiplier,m=void 0===g?.02:g,y=e.farZMultiplier,O=void 0===y?1.01:y;Object(u.a)(this,t),n=n||1,r=r||1;var _=S(l);v=Math.max(.75,v);var j=x([s,a]);j[2]=0,this.projectionMatrix=T({width:n,height:r,pitch:p,altitude:v,nearZMultiplier:m,farZMultiplier:O}),this.viewMatrix=E({height:r,scale:_,center:j,pitch:p,bearing:d,altitude:v}),this.width=n,this.height=r,this.scale=_,this.latitude=a,this.longitude=s,this.zoom=l,this.pitch=p,this.bearing=d,this.altitude=v,this.center=j,this.distanceScales=P(this),this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}return Object(l.a)(t,[{key:"_initMatrices",value:function(){var t=this.width,e=this.height,n=this.projectionMatrix,r=this.viewMatrix,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.h(i,i,n),b.h(i,i,r),this.viewProjectionMatrix=i;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.o(a,a,[t/2,-e/2,1]),b.p(a,a,[1,-1,0]),b.h(a,a,i);var o=b.f([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a);if(!o)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=a,this.pixelUnprojectionMatrix=o}},{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&b.b(e.projectionMatrix,this.projectionMatrix)&&b.b(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),a=I(i,this.pixelProjectionMatrix),o=Object(c.a)(a,2),s=o[0],u=o[1],l=r?u:this.height-u;return 2===t.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,a=void 0===i?void 0:i,o=Object(c.a)(t,3),s=o[0],u=o[1],l=o[2],f=r?u:this.height-u,p=a&&a*this.distanceScales.unitsPerMeter[2],h=M([s,f,l],this.pixelUnprojectionMatrix,p),d=this.unprojectPosition(h),b=Object(c.a)(d,3),v=b[0],g=b[1],m=b[2];return Number.isFinite(l)?[v,g,m]:Number.isFinite(a)?[v,g,a]:[v,g]}},{key:"projectPosition",value:function(t){var e=x(t),n=Object(c.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=A(t),n=Object(c.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return x(t)}},{key:"unprojectFlat",value:function(t){return A(t)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=M(t.pos,this.pixelUnprojectionMatrix),r=x(e),i=v.a([],r,v.d([],n));return A(v.a([],this.center,i))}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=R(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,s=a.latitude,c=a.zoom;return new t({width:r,height:i,longitude:o,latitude:s,zoom:c})}},{key:"getBounds",value:function(t){var e=this.getBoundingRegion(t),n=Math.min.apply(Math,Object(i.a)(e.map((function(t){return t[0]})))),r=Math.max.apply(Math,Object(i.a)(e.map((function(t){return t[0]}))));return[[n,Math.min.apply(Math,Object(i.a)(e.map((function(t){return t[1]}))))],[r,Math.max.apply(Math,Object(i.a)(e.map((function(t){return t[1]}))))]]}},{key:"getBoundingRegion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C(this,t.z||0)}}]),t}();function D(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var U=["longitude","latitude","zoom"],V={curve:1.414,speed:1.2};function F(t,e,n){var r=(n=Object.assign({},V,n)).curve,i=t.zoom,a=[t.longitude,t.latitude],o=S(i),s=e.zoom,c=[e.longitude,e.latitude],u=S(s-i),l=x(a),f=x(c),p=v.f([],f,l),h=Math.max(t.width,t.height),d=h/u,b=v.b(p)*o,g=Math.max(b,.01),m=r*r,y=(d*d-h*h+m*m*g*g)/(2*h*m*g),O=(d*d-h*h-m*m*g*g)/(2*d*m*g),_=Math.log(Math.sqrt(y*y+1)-y),j=Math.log(Math.sqrt(O*O+1)-O);return{startZoom:i,startCenterXY:l,uDelta:p,w0:h,u1:b,S:(j-_)/r,rho:r,rho2:m,r0:_,r1:j}}var z=n("bdgK"),H=n("6pOq"),G=n("4ZJM"),Z=n.n(G);function q(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function X(t,e){if(t===e)return!0;if(q(t)&&q(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!X(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=1e-7}function W(t,e,n){return Math.max(e,Math.min(n,t))}function K(t,e,n){return q(t)?t.map((function(t,r){return K(t,e[r],n)})):n*e+(1-n)*t}function J(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},tt=0,et=0,nt=1.5,rt=function(){function t(e){var n=e.width,r=e.height,i=e.latitude,a=e.longitude,o=e.zoom,s=e.bearing,c=void 0===s?et:s,l=e.pitch,f=void 0===l?tt:l,p=e.altitude,h=void 0===p?nt:p,d=e.maxZoom,b=void 0===d?$.maxZoom:d,v=e.minZoom,g=void 0===v?$.minZoom:v,m=e.maxPitch,y=void 0===m?$.maxPitch:m,O=e.minPitch,_=void 0===O?$.minPitch:O,j=e.transitionDuration,S=e.transitionEasing,w=e.transitionInterpolator,x=e.transitionInterruption,A=e.startPanLngLat,P=e.startZoomLngLat,E=e.startRotatePos,T=e.startBearing,I=e.startPitch,M=e.startZoom;Object(u.a)(this,t),J(Number.isFinite(n),"`width` must be supplied"),J(Number.isFinite(r),"`height` must be supplied"),J(Number.isFinite(a),"`longitude` must be supplied"),J(Number.isFinite(i),"`latitude` must be supplied"),J(Number.isFinite(o),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:i,longitude:a,zoom:o,bearing:c,pitch:f,altitude:h,maxZoom:b,minZoom:g,maxPitch:y,minPitch:_,transitionDuration:j,transitionEasing:S,transitionInterpolator:w,transitionInterruption:x}),this._state={startPanLngLat:A,startZoomLngLat:P,startRotatePos:E,startBearing:T,startPitch:I,startZoom:M}}return Object(l.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:e}),a=Object(c.a)(i,2),o=a[0],s=a[1];return this._getUpdatedMapState({longitude:o,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,i=void 0===r?0:r,a=t.deltaAngleY,o=void 0===a?0:a,s=this._state,c=s.startRotatePos,u=s.startBearing,l=s.startPitch;return Number.isFinite(u)&&Number.isFinite(l)?(e=n?this._calculateNewPitchAndBearing(Q(Q({},this._getRotationParams(n,c)),{},{startBearing:u,startPitch:l})):{bearing:u+i,pitch:l+o},this._getUpdatedMapState(e)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale;J(r>0,"`scale` must be a positive number");var i=this._state,a=i.startZoom,o=i.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,o=this._unproject(n)||this._unproject(e)),J(o,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:a||0}),u=new k(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:o,pos:e}),l=Object(c.a)(u,2),f=l[0],p=l[1];return this._getUpdatedMapState({zoom:s,longitude:f,latitude:p})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._state,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=W(r,n,e);var i=t.maxPitch,a=t.minPitch,o=t.pitch;return t.pitch=W(o,a,i),Object.assign(t,function(t){var e=t.width,n=t.height,r=t.longitude,i=t.latitude,a=t.zoom,o=t.pitch,s=void 0===o?0:o,c=t.bearing,u=void 0===c?0:c;(r<-180||r>180)&&(r=h(r+180,360)-180),(u<-180||u>180)&&(u=h(u+180,360)-180);var l=new k({width:e,height:n,longitude:r,latitude:i,zoom:a}),f=l.project([r,85.05113])[1],p=l.project([r,-85.05113])[1],d=0;return p-f<n&&(a+=Math.log2(n/(p-f)),f=(l=new k({width:e,height:n,longitude:r,latitude:i,zoom:a})).project([r,85.05113])[1],p=l.project([r,-85.05113])[1]),f>0?d=f:p<n&&(d=p-n),d&&(i=l.unproject([e/2,n/2+d])[1]),{width:e,height:n,longitude:r,latitude:i,zoom:a,pitch:s,bearing:u}}(t)),t}},{key:"_unproject",value:function(t){var e=new k(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new k(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom;return W(n+Math.log2(e),a,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=W(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,c=i;return n>0?c=i+n*(s-i):n<0&&(c=i-n*(o-i)),{pitch:c,bearing:r+180*e}}},{key:"_getRotationParams",value:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[1],a=e[1],o=this._viewportProps,s=o.width,c=o.height,u=n/s,l=0;return r>0?Math.abs(c-a)>5&&(l=r/(a-c)*1.2):r<0&&a>5&&(l=1-i/a),{deltaScaleX:u,deltaScaleY:l=Math.min(1,Math.max(-1,l))}}}]),t}();function it(t){return t[0].toLowerCase()+t.slice(1)}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var st=Object(o.createContext)({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),ct=st.Provider;st.Provider=function(t){var e=t.value,n=t.children,r=Object(o.useState)(null),i=Object(c.a)(r,2),a=i[0],s=i[1],u=Object(o.useContext)(st);return e=ot(ot({setMap:s},u),{},{map:u&&u.map||a},e),o.createElement(ct,{value:e},n)};var ut=st,lt="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht="A valid API access token is required to use Mapbox data";var dt={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},bt=Object.assign({},H.a.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:$});function vt(){return o.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},o.createElement("h3",{key:"header"},ht),o.createElement("div",{key:"text"},"For information on setting up your basemap, read"),o.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}function gt(t){t.target.scrollTo(0,0)}var mt=Object(o.forwardRef)((function(t,e){var n=Object(o.useState)(!0),r=Object(c.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)([0,0]),u=Object(c.a)(s,2),l=u[0],f=u[1],p=Object(o.useRef)(null),h=Object(o.useRef)(null),d=Object(o.useRef)(null),b=Object(o.useContext)(ut);lt((function(){if(mt.supported()){var e=new H.a(pt(pt({},t),{},{mapboxgl:Z.a,width:l[0],height:l[1],container:h.current,onError:function(e){401===(e.error&&e.error.status||e.status)&&i&&(console.error(ht),a(!1)),t.onError(e)}}));p.current=e,b&&b.setMap&&b.setMap(e.getMap());var n=new z.a((function(e){if(e[0].contentRect){var n=e[0].contentRect,r=n.width,i=n.height;f([r,i]),t.onResize({width:r,height:i})}}));return n.observe(d.current),function(){e.finalize(),p.current=null,n.disconnect()}}}),[]),lt((function(){p.current&&p.current.setProps(Object.assign({},t,{width:l[0],height:l[1]}))}));var v=p.current&&p.current.getMap();Object(o.useImperativeHandle)(e,(function(){return function(t){return{getMap:function(){return t.current&&t.current.getMap()},queryRenderedFeatures:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.current&&t.current.getMap();return r&&r.queryRenderedFeatures(e,n)}}}(p)}),[]);var g=v&&o.createElement(ct,{value:pt(pt({},b),{},{viewport:b.viewport||new k(pt(pt(pt({},t),t.viewState),{},{width:l[0],height:l[1]})),map:v,container:b.container||d.current})},o.createElement("div",{key:"map-overlays",className:"overlays",style:dt,onScroll:gt},t.children)),m=t.className,y=t.width,O=t.height,_=t.style,j=t.visibilityConstraints,S=Object.assign({position:"relative"},_,{width:y,height:O}),w=t.visible&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;for(var n in e){var r=n.slice(0,3),i=it(n.slice(3));if("min"===r&&t[i]<e[n])return!1;if("max"===r&&t[i]>e[n])return!1}return!0}(t.viewState||t,j),x=Object.assign({},dt,{visibility:w?"inherit":"hidden"});return o.createElement("div",{key:"map-container",ref:d,style:S},o.createElement("div",{key:"map-mapbox",ref:h,style:x,className:m}),g,!i&&!t.disableTokenWarning&&o.createElement(vt,null))}));mt.supported=function(){return Z.a&&Z.a.supported()},mt.defaultProps=bt;var yt=mt;function Ot(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var jt=function(){function t(){Object(u.a)(this,t),Object(a.a)(this,"propNames",[])}return Object(l.a)(t,[{key:"arePropsEqual",value:function(t,e){var n,r=Ot(this.propNames||[]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!X(t[i],e[i]))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(t,e,n){J(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(t,e){return e.transitionDuration}}]),t}(),St=n("JX7q"),wt=n("Ji7U"),xt=n("md7G"),At=n("foSv"),Pt={longitude:1,bearing:1};function Et(t){return Number.isFinite(t)||Array.isArray(t)}function Tt(t,e,n){return function(t){return t in Pt}(t)&&Math.abs(n-e)>180&&(n=n<0?n+360:n-360),n}function It(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(At.a)(t);if(e){var i=Object(At.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(xt.a)(this,n)}}var Lt=["longitude","latitude","zoom","bearing","pitch"],Ct=["latitude","longitude","zoom","width","height"],Nt=["bearing","pitch"],kt={speed:1.2,curve:1.414};!function(t){Object(wt.a)(n,t);var e=Rt(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),t=e.call(this),Object(a.a)(Object(St.a)(t),"propNames",Lt),t.props=Object.assign({},kt,r),t}Object(l.a)(n,[{key:"initializeProps",value:function(t,e){var n,r={},i={},a=It(Ct);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=t[o],c=e[o];J(Et(s)&&Et(c),"".concat(o," must be supplied for transition")),r[o]=s,i[o]=Tt(o,s,c)}}catch(d){a.e(d)}finally{a.f()}var u,l=It(Nt);try{for(l.s();!(u=l.n()).done;){var f=u.value,p=t[f]||0,h=e[f]||0;r[f]=p,i[f]=Tt(f,p,h)}}catch(d){l.e(d)}finally{l.f()}return{start:r,end:i}}},{key:"interpolateProps",value:function(t,e,n){var r,i=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},a=F(t,e,r),o=a.startZoom,s=a.startCenterXY,c=a.uDelta,u=a.w0,l=a.u1,f=a.S,p=a.rho,h=a.rho2,b=a.r0;if(l<.01){var g,m=D(U);try{for(m.s();!(g=m.n()).done;){var y=g.value,O=t[y],_=e[y];i[y]=d(O,_,n)}}catch(M){m.e(M)}finally{m.f()}return i}var j=n*f,S=Math.cosh(b)/Math.cosh(b+p*j),x=u*((Math.cosh(b)*Math.tanh(b+p*j)-Math.sinh(b))/h)/l,P=1/S,E=o+w(P),T=v.e([],c,x);v.a(T,T,s);var I=A(T);return i.longitude=I[0],i.latitude=I[1],i.zoom=E,i}(t,e,n,this.props),a=It(Nt);try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o]=K(t[o],e[o],n)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"getDuration",value:function(t,e){var n=e.transitionDuration;return"auto"===n&&(n=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=Object.assign({},V,r),a=i.screenSpeed,o=i.speed,s=i.maxDuration,c=F(t,e,r),u=c.S,l=c.rho,f=1e3*u;return n=Number.isFinite(a)?f/(a/l):f/o,Number.isFinite(s)&&n>s?0:n}(t,e,this.props)),n}}])}(jt);function Dt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(At.a)(t);if(e){var i=Object(At.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(xt.a)(this,n)}}var Vt=["longitude","latitude","zoom","bearing","pitch"],Ft=function(t){Object(wt.a)(n,t);var e=Ut(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),t=e.call(this),Array.isArray(r)&&(r={transitionProps:r}),t.propNames=r.transitionProps||Vt,r.around&&(t.around=r.around),t}return Object(l.a)(n,[{key:"initializeProps",value:function(t,e){var n={},r={};if(this.around){n.around=this.around;var i=new k(t).unproject(this.around);Object.assign(r,e,{around:new k(e).project(i),aroundLngLat:i})}var a,o=Dt(this.propNames);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=t[s],u=e[s];J(Et(c)&&Et(u),"".concat(s," must be supplied for transition")),n[s]=c,r[s]=Tt(s,c,u)}}catch(l){o.e(l)}finally{o.f()}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){var r,i={},a=Dt(this.propNames);try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o]=K(t[o],e[o],n)}}catch(p){a.e(p)}finally{a.f()}if(e.around){var s=new k(Object.assign({},e,i)).getMapCenterByLngLatPosition({lngLat:e.aroundLngLat,pos:K(t.around,e.around,n)}),u=Object(c.a)(s,2),l=u[0],f=u[1];i.longitude=l,i.latitude=f}return i}}]),n}(jt),zt=function(){};var Ht=1,Gt=2,Zt=3,qt=4,Xt={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new Ft,transitionInterruption:Ht,onTransitionStart:zt,onTransitionInterrupt:zt,onTransitionEnd:zt,onViewportChange:zt,onStateChange:zt},Wt=function(){function t(e,n){var r=this;Object(u.a)(this,t),Object(a.a)(this,"_animationFrame",null),Object(a.a)(this,"_onTransitionFrame",(function(){r._animationFrame=requestAnimationFrame(r._onTransitionFrame),r._updateViewport()})),this.props=e,this.onViewportChange=e.onViewportChange||zt,this.onStateChange=e.onStateChange||zt,this.time=n||Date.now}return Object(l.a)(t,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(t){var e=this.props;if(this.props=t,this._shouldIgnoreViewportChange(e,t))return!1;if(this._isTransitionEnabled(t)){var n=Object.assign({},e),r=Object.assign({},t);if(this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this.state.interruption===Gt?Object.assign(n,this.state.endProps):Object.assign(n,this.state.propsInTransition),this.state.interruption===qt)){var i=this.time(),a=(i-this.state.startTime)/this.state.duration;r.transitionDuration=this.state.duration-(i-this.state.startTime),r.transitionEasing=function(t,e){var n=t(e);return function(r){return 1/(1-n)*(t(r*(1-e)+e)-n)}}(this.state.easing,a),r.transitionInterpolator=n.transitionInterpolator}return r.onTransitionStart(),this._triggerTransition(n,r),!0}return this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return!t||(this._isTransitionInProgress()?this.state.interruption===Zt||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e))}},{key:"_triggerTransition",value:function(t,e){J(this._isTransitionEnabled(e)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var n=e.transitionInterpolator,r=n.getDuration?n.getDuration(t,e):e.transitionDuration;if(0!==r){var i=e.transitionInterpolator.initializeProps(t,e),a={inTransition:!0,isZooming:t.zoom!==e.zoom,isPanning:t.longitude!==e.longitude||t.latitude!==e.latitude,isRotating:t.bearing!==e.bearing||t.pitch!==e.pitch};this.state={duration:r,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:this.time(),startProps:i.start,endProps:i.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(a)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var t=this.time(),e=this.state,n=e.startTime,r=e.duration,i=e.easing,a=e.interpolator,o=e.startProps,s=e.endProps,c=!1,u=(t-n)/r;u>=1&&(u=1,c=!0),u=i(u);var l=a.interpolateProps(o,s,u),f=new rt(Object.assign({},this.props,l));this.state.propsInTransition=f.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),c&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();Object(a.a)(Wt,"defaultProps",Xt);var Kt=n("ei+1");function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qt={transitionDuration:0},$t={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Ft,transitionInterruption:Ht},te=function(t){return 1-(1-t)*(1-t)},ee=["wheel"],ne=["panstart","panmove","panend"],re=["pinchstart","pinchmove","pinchend"],ie=["tripanstart","tripanmove","tripanend"],ae=["doubletap"],oe=["keydown"],se=function(){function t(){var e=this;Object(u.a)(this,t),Object(a.a)(this,"events",[]),Object(a.a)(this,"scrollZoom",!0),Object(a.a)(this,"dragPan",!0),Object(a.a)(this,"dragRotate",!0),Object(a.a)(this,"doubleClickZoom",!0),Object(a.a)(this,"touchZoom",!0),Object(a.a)(this,"touchRotate",!1),Object(a.a)(this,"keyboard",!0),Object(a.a)(this,"_interactionState",{isDragging:!1}),Object(a.a)(this,"_events",{}),Object(a.a)(this,"_setInteractionState",(function(t){Object.assign(e._interactionState,t),e.onStateChange&&e.onStateChange(e._interactionState)})),Object(a.a)(this,"_onTransition",(function(t,n){e.onViewportChange(t,e._interactionState,n)})),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new Wt({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return Object(l.a)(t,[{key:"handleEvent",value:function(t){this.mapState=this.getMapState();var e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"blockEvents",value:function(t){var e=this,n=setTimeout((function(){e._eventStartBlocked===n&&(e._eventStartBlocked=null)}),t);this._eventStartBlocked=n}},{key:"updateViewport",value:function(t,e,n){var r=this.mapState instanceof rt?this.mapState.getViewportProps():this.mapState,i=Yt(Yt({},t.getViewportProps()),e),a=Object.keys(i).some((function(t){return r[t]!==i[t]}));this._state=t.getState(),this._setInteractionState(n),a&&this.onViewportChange(i,this._interactionState,r)}},{key:"getMapState",value:function(t){return new rt(Yt(Yt(Yt({},this.mapStateProps),this._state),t))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(t){var e=t.onViewportChange,n=t.onStateChange,r=t.eventManager,i=void 0===r?this.eventManager:r,a=t.isInteractive,o=void 0===a||a,s=t.scrollZoom,c=void 0===s?this.scrollZoom:s,u=t.dragPan,l=void 0===u?this.dragPan:u,f=t.dragRotate,p=void 0===f?this.dragRotate:f,h=t.doubleClickZoom,d=void 0===h?this.doubleClickZoom:h,b=t.touchZoom,v=void 0===b?this.touchZoom:b,g=t.touchRotate,m=void 0===g?this.touchRotate:g,y=t.keyboard,O=void 0===y?this.keyboard:y;this.onViewportChange=e,this.onStateChange=n;var _=this.mapStateProps||{},j=_.height!==t.height||_.width!==t.width;this.mapStateProps=t,j&&(this.mapState=_,this.updateViewport(new rt(t))),this._transitionManager.processViewportChange(t),this.eventManager!==i&&(this.eventManager=i,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(ee,o&&Boolean(c)),this.toggleEvents(ne,o&&Boolean(l||p)),this.toggleEvents(re,o&&Boolean(v||m)),this.toggleEvents(ie,o&&Boolean(m)),this.toggleEvents(ae,o&&Boolean(d)),this.toggleEvents(oe,o&&Boolean(O)),this.scrollZoom=c,this.dragPan=l,this.dragRotate=p,this.doubleClickZoom=d,this.touchZoom=v,this.touchRotate=m,this.keyboard=O}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);this._panRotate=this.isFunctionKeyPressed(t)||t.rightButton;var n=this._panRotate?this.mapState.rotateStart({pos:e}):this.mapState.panStart({pos:e});return this.updateViewport(n,Qt,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotate(t):this._onPanMove(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotateEnd(t):this._onPanMoveEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.mapState.pan({pos:e});return this.updateViewport(n,Qt,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){if(this.dragPan){var e=this.dragPan.inertia,n=void 0===e?300:e;if(n&&t.velocity){var r=this.getCenter(t),i=[r[0]+t.velocityX*n/2,r[1]+t.velocityY*n/2],a=this.mapState.pan({pos:i}).panEnd();return this.updateViewport(a,Yt(Yt({},$t),{},{transitionDuration:n,transitionEasing:te}),{isDragging:!1,isPanning:!0}),!0}}var o=this.mapState.panEnd();return this.updateViewport(o,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=this.getCenter(t),n=this.mapState.rotate({pos:e});return this.updateViewport(n,Qt,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){if(this.dragRotate){var e=this.dragRotate.inertia,n=void 0===e?300:e;if(n&&t.velocity){var r=this.getCenter(t),i=[r[0]+t.velocityX*n/2,r[1]+t.velocityY*n/2],a=this.mapState.rotate({pos:i}).rotateEnd();return this.updateViewport(a,Yt(Yt({},$t),{},{transitionDuration:n,transitionEasing:te}),{isDragging:!1,isRotating:!0}),!0}}var o=this.mapState.panEnd();return this.updateViewport(o,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;var e=this.scrollZoom,n=e.speed,r=void 0===n?.01:n,i=e.smooth,a=void 0!==i&&i;t.preventDefault();var o=this.getCenter(t),s=t.delta,c=2/(1+Math.exp(-Math.abs(s*r)));s<0&&0!==c&&(c=1/c);var u=this.mapState.zoom({pos:o,scale:c});return this.updateViewport(u,Yt(Yt({},$t),{},{transitionInterpolator:new Ft({around:o}),transitionDuration:a?250:1}),{isPanning:!0,isZooming:!0}),!0}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(n,Qt,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.isDragging())return!1;if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation;e=e.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(e,Qt,{isDragging:!0,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:Boolean(this.touchRotate)}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchZoom){var e=this.touchZoom.inertia,n=void 0===e?300:e,r=this._lastPinchEvent;if(n&&r&&t.scale!==r.scale){var i=this.getCenter(t),a=this.mapState.rotateEnd(),o=Math.log2(t.scale),s=(o-Math.log2(r.scale))/(t.deltaTime-r.deltaTime),c=Math.pow(2,o+s*n/2);return a=a.zoom({pos:i,scale:c}).zoomEnd(),this.updateViewport(a,Yt(Yt({},$t),{},{transitionInterpolator:new Ft({around:i}),transitionDuration:n,transitionEasing:te}),{isDragging:!1,isPanning:Boolean(this.touchZoom),isZooming:Boolean(this.touchZoom),isRotating:!1}),this.blockEvents(n),!0}}var u=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(u,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(t){var e=this.getCenter(t),n=this.mapState.rotateStart({pos:e});return this.updateViewport(n,Qt,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.isDragging())return!1;if(!this.touchRotate)return!1;var e=this.getCenter(t);e[0]-=t.deltaX;var n=this.mapState.rotate({pos:e});return this.updateViewport(n,Qt,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchRotate){var e=this.touchRotate.inertia,n=void 0===e?300:e;if(n&&t.velocityY){var r=this.getCenter(t),i=[r[0],r[1]+=t.velocityY*n/2],a=this.mapState.rotate({pos:i});return this.updateViewport(a,Yt(Yt({},$t),{},{transitionDuration:n,transitionEasing:te}),{isDragging:!1,isRotating:!0}),this.blockEvents(n),!1}}var o=this.mapState.rotateEnd();return this.updateViewport(o,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),r=this.mapState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,Object.assign({},$t,{transitionInterpolator:new Ft({around:e})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.keyboard,i=r.zoomSpeed,a=void 0===i?2:i,o=r.moveSpeed,s=void 0===o?100:o,c=r.rotateSpeedX,u=void 0===c?15:c,l=r.rotateSpeedY,f=void 0===l?10:l,p=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=n?this.getMapState({zoom:p.zoom-Math.log2(a)-1}):this.getMapState({zoom:p.zoom-Math.log2(a)});break;case 187:e=n?this.getMapState({zoom:p.zoom+Math.log2(a)+1}):this.getMapState({zoom:p.zoom+Math.log2(a)});break;case 37:e=n?this.getMapState({bearing:p.bearing-u}):this.mapState.pan({pos:[s,0],startPos:[0,0]});break;case 39:e=n?this.getMapState({bearing:p.bearing+u}):this.mapState.pan({pos:[-s,0],startPos:[0,0]});break;case 38:e=n?this.getMapState({pitch:p.pitch+f}):this.mapState.pan({pos:[0,s],startPos:[0,0]});break;case 40:e=n?this.getMapState({pitch:p.pitch-f}):this.mapState.pan({pos:[0,-s],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,$t)}}]),t}();function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var le=Object.assign({},yt.propTypes,{maxZoom:s.number,minZoom:s.number,maxPitch:s.number,minPitch:s.number,onViewStateChange:s.func,onViewportChange:s.func,onInteractionStateChange:s.func,transitionDuration:s.oneOfType([s.number,s.string]),transitionInterpolator:s.object,transitionInterruption:s.number,transitionEasing:s.func,onTransitionStart:s.func,onTransitionInterrupt:s.func,onTransitionEnd:s.func,scrollZoom:s.oneOfType([s.bool,s.object]),dragPan:s.oneOfType([s.bool,s.object]),dragRotate:s.oneOfType([s.bool,s.object]),doubleClickZoom:s.bool,touchZoom:s.oneOfType([s.bool,s.object]),touchRotate:s.oneOfType([s.bool,s.object]),keyboard:s.oneOfType([s.bool,s.object]),onHover:s.func,onClick:s.func,onDblClick:s.func,onContextMenu:s.func,onMouseDown:s.func,onMouseMove:s.func,onMouseUp:s.func,onTouchStart:s.func,onTouchMove:s.func,onTouchEnd:s.func,onMouseEnter:s.func,onMouseLeave:s.func,onMouseOut:s.func,onWheel:s.func,touchAction:s.string,eventRecognizerOptions:s.object,clickRadius:s.number,interactiveLayerIds:s.array,getCursor:s.func,controller:s.instanceOf(se)}),fe=Object.assign({},yt.defaultProps,$,Wt.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:function(t){var e=t.isDragging,n=t.isHovering;return e?"grabbing":n?"pointer":"grab"}});function pe(t){if(t.lngLat||!t.offsetCenter)return t;var e=t.offsetCenter,n=[e.x,e.y],r=new k(Object.assign({},this.props,{width:this.width,height:this.height}));return t.point=n,t.lngLat=r.unproject(n),t}function he(t){var e=this.map;if(!e||!t)return null;var n={},r=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return e.queryRenderedFeatures(r?[[t[0]-r,t[1]+r],[t[0]+r,t[1]-r]]:t,n)}catch(i){return null}}function de(t,e){var n=this.props[t];n&&n(pe.call(this,e))}function be(t){de.call(this,"touch"===t.pointerType?"onTouchStart":"onMouseDown",t)}function ve(t){de.call(this,"touch"===t.pointerType?"onTouchEnd":"onMouseUp",t)}function ge(t){if(de.call(this,"touch"===t.pointerType?"onTouchMove":"onMouseMove",t),!this.state.isDragging){var e,n=this.props,r=n.onHover,i=n.interactiveLayerIds;t=pe.call(this,t),(i||r)&&(e=he.call(this,t.point)),r&&(t.features=e,r(t));var a=Boolean(i&&e&&e.length>0),o=a&&!this.state.isHovering,s=!a&&this.state.isHovering;o&&de.call(this,"onMouseEnter",t),s&&de.call(this,"onMouseLeave",t),(o||s)&&this.setState({isHovering:a})}}function me(t){var e=this.props,n=e.onClick,r=e.onNativeClick,i=e.onDblClick,a=e.doubleClickZoom,o=[],s=i||a;switch(t.type){case"anyclick":o.push(r),s||o.push(n);break;case"click":s&&o.push(n)}(o=o.filter(Boolean)).length&&((t=pe.call(this,t)).features=he.call(this,t.point),o.forEach((function(e){return e(t)})))}var ye=Object(o.forwardRef)((function(t,e){var n=Object(o.useContext)(ut),a=Object(o.useMemo)((function(){return t.controller||new se}),[]),s=Object(o.useMemo)((function(){return new Kt.a(null,{touchAction:t.touchAction,recognizerOptions:t.eventRecognizerOptions})}),[]),c=Object(o.useRef)(null),u=Object(o.useRef)(null),l=Object(o.useRef)({width:0,height:0,state:{isHovering:!1,isDragging:!1}}).current;l.props=t,l.map=u.current&&u.current.getMap(),l.setState=function(e){l.state=ue(ue({},l.state),e),c.current.style.cursor=t.getCursor(l.state)};var f,p,h=!0,d=function(t,e,n){if(h)f=[t,e,n];else{var r=l.props,i=r.onViewStateChange,a=r.onViewportChange;i&&i({viewState:t,interactionState:e,oldViewState:n}),a&&a(t,e,n)}};Object(o.useImperativeHandle)(e,(function(){return function(t){return{getMap:t.current&&t.current.getMap,queryRenderedFeatures:t.current&&t.current.queryRenderedFeatures}}(u)}),[]);var b=Object(o.useMemo)((function(){return ue(ue({},n),{},{eventManager:s,container:n.container||c.current})}),[n,c.current]);b.onViewportChange=d;var v=function(t){var e=t.isDragging,n=void 0!==e&&e;if(n!==l.state.isDragging&&l.setState({isDragging:n}),h)p=t;else{var r=l.props.onInteractionStateChange;r&&r(t)}},g=function(){l.width&&l.height&&a.setOptions(ue(ue(ue({},l.props),l.props.viewState),{},{isInteractive:Boolean(l.props.onViewStateChange||l.props.onViewportChange),onViewportChange:d,onStateChange:v,eventManager:s,width:l.width,height:l.height}))};Object(o.useEffect)((function(){return s.setElement(c.current),s.on({pointerdown:be.bind(l),pointermove:ge.bind(l),pointerup:ve.bind(l),pointerleave:de.bind(l,"onMouseOut"),click:me.bind(l),anyclick:me.bind(l),dblclick:de.bind(l,"onDblClick"),wheel:de.bind(l,"onWheel"),contextmenu:de.bind(l,"onContextMenu")}),function(){s.destroy()}}),[]),lt((function(){f&&d.apply(void 0,Object(i.a)(f)),p&&v(p)})),g();var m=t.width,y=t.height,O=t.style,_=t.getCursor,j=Object(o.useMemo)((function(){return ue(ue({position:"relative"},O),{},{width:m,height:y,cursor:_(l.state)})}),[O,m,y,_,l.state]);return f&&l._child||(l._child=o.createElement(ct,{value:b},o.createElement("div",{key:"event-canvas",ref:c,style:j},o.createElement(yt,r({},t,{width:"100%",height:"100%",style:null,onResize:function(t){var e=t.width,n=t.height;l.width=e,l.height=n,g(),l.props.onResize({width:e,height:n})},ref:u}))))),h=!1,l._child}));ye.supported=yt.supported,ye.propTypes=le,ye.defaultProps=fe;var Oe=n("U8pU");function _e(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!_e(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===Object(Oe.a)(t)&&"object"===Object(Oe.a)(e)){var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a];if(!e.hasOwnProperty(s))return!1;if(!_e(t[s],e[s]))return!1}return!0}return!1}var je=n("zLVn");function Se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xe={type:s.oneOf(["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade"]).isRequired,id:s.string,source:s.string,beforeId:s.string};function Ae(t,e,n,r){var i=n.layout,a=void 0===i?{}:i,o=n.paint,s=void 0===o?{}:o,c=n.filter,u=n.minzoom,l=n.maxzoom,f=n.beforeId,p=function(t,e){if(null==t)return{};var n,r,i=Object(je.a)(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(n,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(f!==r.beforeId&&t.moveLayer(e,f),a!==r.layout){var h=r.layout||{};for(var d in a)_e(a[d],h[d])||t.setLayoutProperty(e,d,a[d]);for(var b in h)a.hasOwnProperty(b)||t.setLayoutProperty(e,b,void 0)}if(s!==r.paint){var v=r.paint||{};for(var g in s)_e(s[g],v[g])||t.setPaintProperty(e,g,s[g]);for(var m in v)s.hasOwnProperty(m)||t.setPaintProperty(e,m,void 0)}for(var y in _e(c,r.filter)||t.setFilter(e,c),u===r.minzoom&&l===r.maxzoom||t.setLayerZoomRange(e,u,l),p)_e(p[y],r[y])||t.setLayerProperty(e,y,p[y])}var Pe=0;function Ee(t){var e=Object(o.useContext)(ut),n=Object(o.useRef)({id:t.id,type:t.type}),r=Object(o.useState)(0),i=Object(c.a)(r,2)[1],a=Object(o.useMemo)((function(){return t.id||"jsx-layer-".concat(Pe++)}),[]),s=e.map;return Object(o.useEffect)((function(){if(s){var t=function(){return i((function(t){return t+1}))};return s.on("styledata",t),function(){s.off("styledata",t),s.style&&s.style._loaded&&s.removeLayer(a)}}}),[s]),s&&s.style&&s.getLayer(a)?function(t,e,n,r){J(n.id===r.id,"layer id changed"),J(n.type===r.type,"layer type changed");try{Ae(t,e,n,r)}catch(i){console.warn(i)}}(s,a,t,n.current):function(t,e,n){if(t.style&&t.style._loaded){var r=we(we({},n),{},{id:e});delete r.beforeId,t.addLayer(r,n.beforeId)}}(s,a,t),n.current=t,null}Ee.propTypes=xe;var Te={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},Ie={captureScroll:s.bool,captureDrag:s.bool,captureClick:s.bool,captureDoubleClick:s.bool,capturePointerMove:s.bool};function Me(t){var e=t.containerRef.current,n=t.context.eventManager;if(e&&n){var r={wheel:function(e){var n=t.props;n.captureScroll&&e.stopPropagation(),n.onScroll&&n.onScroll(e,t)},panstart:function(e){var n=t.props;n.captureDrag&&e.stopPropagation(),n.onDragStart&&n.onDragStart(e,t)},anyclick:function(e){var n=t.props;n.captureClick&&e.stopPropagation(),n.onClick&&n.onClick(e,t)},click:function(e){var n=t.props;n.captureClick&&e.stopPropagation(),n.onClick&&n.onClick(e,t)},dblclick:function(e){var n=t.props;n.captureDoubleClick&&e.stopPropagation(),n.onDoubleClick&&n.onDoubleClick(e,t)},pointermove:function(e){var n=t.props;n.capturePointerMove&&e.stopPropagation(),n.onPointerMove&&n.onPointerMove(e,t)}};return n.watch(r,e),function(){n.off(r)}}}function Re(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(o.useContext)(ut),n=Object(o.useRef)(null),r=Object(o.useRef)({props:t,state:{},context:e,containerRef:n}),i=r.current;return i.props=t,i.context=e,Object(o.useEffect)((function(){return Me(i)}),[e.eventManager]),i}function Le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(At.a)(t);if(e){var i=Object(At.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(xt.a)(this,n)}}function Ce(t){var e=t.instance,n=Re(t),r=n.context,i=n.containerRef;return e._context=r,e._containerRef=i,e._render()}var Ne=function(t){Object(wt.a)(n,t);var e=Le(n);function n(){var t;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i)),Object(a.a)(Object(St.a)(t),"_context",{}),Object(a.a)(Object(St.a)(t),"_containerRef",Object(o.createRef)()),Object(a.a)(Object(St.a)(t),"_onScroll",(function(t){})),Object(a.a)(Object(St.a)(t),"_onDragStart",(function(t){})),Object(a.a)(Object(St.a)(t),"_onDblClick",(function(t){})),Object(a.a)(Object(St.a)(t),"_onClick",(function(t){})),Object(a.a)(Object(St.a)(t),"_onPointerMove",(function(t){})),t}return Object(l.a)(n,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return o.createElement(Ce,r({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),n}(o.PureComponent);function ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Object(a.a)(Ne,"propTypes",Ie),Object(a.a)(Ne,"defaultProps",Te);Object.assign({},Ie,{draggable:s.bool,onDrag:s.func,onDragEnd:s.func,onDragStart:s.func,offsetLeft:s.number,offsetTop:s.number});var Be=Object.assign({},Te,{draggable:!1,offsetLeft:0,offsetTop:0});function Ue(t){var e=t.offsetCenter;return[e.x,e.y]}function Ve(t,e,n,r){var i=t[0]+e[0]-n.offsetLeft,a=t[1]+e[1]-n.offsetTop;return r.viewport.unproject([i,a])}function Fe(t,e){var n=e.props,r=e.callbacks,i=e.state,a=e.context,o=e.containerRef;if(n.draggable){t.stopPropagation();var s=Ue(t),c=function(t,e){var n=t.center,r=n.x,i=n.y;if(e){var a=e.getBoundingClientRect();return[a.left-r,a.top-i]}return null}(t,o.current);if(i.setDragPos(s),i.setDragOffset(c),r.onDragStart&&c){var u=Object.assign({},t);u.lngLat=Ve(s,c,n,a),r.onDragStart(u)}}}function ze(t){var e=t.context.eventManager;if(e&&t.state.dragPos){var n={panmove:function(e){return function(t,e){var n=e.props,r=e.callbacks,i=e.state,a=e.context;t.stopPropagation();var o=Ue(t);i.setDragPos(o);var s=i.dragOffset;if(r.onDrag&&s){var c=Object.assign({},t);c.lngLat=Ve(o,s,n,a),r.onDrag(c)}}(e,t)},panend:function(e){return function(t,e){var n=e.props,r=e.callbacks,i=e.state,a=e.context;t.stopPropagation();var o=i.dragPos,s=i.dragOffset;if(i.setDragPos(null),i.setDragOffset(null),r.onDragEnd&&o&&s){var c=Object.assign({},t);c.lngLat=Ve(o,s,n,a),r.onDragEnd(c)}}(e,t)},pancancel:function(e){return n=e,r=t.state,n.stopPropagation(),r.setDragPos(null),void r.setDragOffset(null);var n,r}};return e.watch(n),function(){e.off(n)}}}var He="undefined"!=typeof window&&window.devicePixelRatio||1,Ge=function(t){return Math.round(t*He)/He},Ze=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===t)return e;var r="x"===n?t.offsetWidth:t.offsetHeight;return Ge(e/100*r)/r*100},qe=Object.assign({},Be,{className:""});function Xe(t){var e=function(t){var e=Object(o.useState)(null),n=Object(c.a)(e,2),r=n[0],i=n[1],a=Object(o.useState)(null),s=Object(c.a)(a,2),u=s[0],l=s[1],f=Re(De(De({},t),{},{onDragStart:Fe}));return f.callbacks=t,f.state.dragPos=r,f.state.setDragPos=i,f.state.dragOffset=u,f.state.setDragOffset=l,Object(o.useEffect)((function(){return ze(f)}),[f.context.eventManager,Boolean(r)]),f}(t),n=e.state,r=e.containerRef,i=t.children,a=t.className,s=t.draggable,u=n.dragPos,l=function(t){var e=t.props,n=t.state,r=t.context,i=e.longitude,a=e.latitude,o=e.offsetLeft,s=e.offsetTop,u=n.dragPos,l=n.dragOffset;if(u&&l)return[u[0]+l[0],u[1]+l[1]];var f=r.viewport.project([i,a]),p=Object(c.a)(f,2),h=p[0],d=p[1];return[h+=o,d+=s]}(e),f=Object(c.a)(l,2),p=f[0],h=f[1],d="translate(".concat(Ge(p),"px, ").concat(Ge(h),"px)"),b=s?u?"grabbing":"grab":"auto",v=Object(o.useMemo)((function(){var t={position:"absolute",left:0,top:0,transform:d,cursor:b};return o.createElement("div",{className:"mapboxgl-marker ".concat(a),ref:e.containerRef,style:t},i)}),[i,a]),g=r.current;return g&&(g.style.transform=d,g.style.cursor=b),v}Xe.defaultProps=qe;o.memo(Xe);var We={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},Ke=Object.keys(We);function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qe=Object.assign({},Te,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function $e(t,e,n,r){var i=Object(c.a)(r,2),a=i[0],o=i[1],s=t.anchor,u=t.dynamicPosition,l=t.tipSize;return n&&u?function(t){var e=t.x,n=t.y,r=t.width,i=t.height,a=t.selfWidth,o=t.selfHeight,s=t.anchor,c=t.padding,u=void 0===c?0:c,l=We[s],f=l.x,p=l.y,h=n-p*o,d=h+o,b=Math.max(0,u-h)+Math.max(0,d-i+u);if(b>0){var v=p,g=b;for(p=0;p<=1;p+=.5)d=(h=n-p*o)+o,(b=Math.max(0,u-h)+Math.max(0,d-i+u))<g&&(g=b,v=p);p=v}var m=.5;.5===p&&(f=Math.floor(f),m=1);var y=e-f*a,O=y+a,_=Math.max(0,u-y)+Math.max(0,O-r+u);if(_>0){var j=f,S=_;for(f=0;f<=1;f+=m)O=(y=e-f*a)+a,(_=Math.max(0,u-y)+Math.max(0,O-r+u))<S&&(S=_,j=f);f=j}return Ke.find((function(t){var e=We[t];return e.x===f&&e.y===p}))||s}({x:a,y:o,anchor:s,padding:l,width:e.width,height:e.height,selfWidth:n.clientWidth,selfHeight:n.clientHeight}):s}function tn(t,e){var n=e.props,r=e.context;(n.closeOnClick||"mapboxgl-popup-close-button"===t.target.className)&&(n.onClose(),r.eventManager&&r.eventManager.once("click",(function(t){return t.stopPropagation()}),t.target))}function en(t){var e=Object(o.useRef)(null),n=Re(Ye(Ye({},t),{},{onClick:tn})),r=n.context,i=n.containerRef,a=Object(o.useState)(!1),s=Object(c.a)(a,2)[1];Object(o.useEffect)((function(){s(!0)}),[e.current]);var u=r.viewport,l=t.className,f=t.longitude,p=t.latitude,h=t.altitude,d=t.tipSize,b=t.closeButton,v=t.children,g=u.project([f,p,h]),m=$e(t,u,e.current,g),y=function(t,e,n,r,i){var a=Object(c.a)(r,3),o=a[0],s=a[1],u=a[2],l=t.offsetLeft,f=t.offsetTop,p=t.sortByDepth,h=We[i],d=o+l,b=s+f,v=Ze(n,100*-h.x),g=Ze(n,100*-h.y,"y"),m={position:"absolute",transform:"\n      translate(".concat(v,"%, ").concat(g,"%)\n      translate(").concat(Ge(d),"px, ").concat(Ge(b),"px)\n    "),display:void 0,zIndex:void 0};return p?(u>1||u<-1||o<0||o>e.width||s<0||s>e.height?m.display="none":m.zIndex=Math.floor((1-u)/2*1e5),m):m}(t,u,i.current,g,m),O=r.eventManager?null:tn;return o.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(m," ").concat(l),style:y,ref:i},o.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:d}}),o.createElement("div",{key:"content",ref:e,className:"mapboxgl-popup-content",onClick:O},b&&o.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},""),v))}en.defaultProps=Qe;o.memo(en);function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var rn=Object.assign({},Te,{className:"",toggleLabel:"Toggle Attribution"});function an(t){var e=Re(t),n=e.context,r=e.containerRef,i=Object(o.useRef)(null),s=Object(o.useState)(!1),u=Object(c.a)(s,2),l=u[0],f=u[1];Object(o.useEffect)((function(){var e;return n.map&&(e=function(t,e,n,r){var i=new Z.a.AttributionControl(t);return i._map=e,i._container=n,i._innerContainer=r,i._updateAttributions(),i._updateEditLink(),e.on("styledata",i._updateData),e.on("sourcedata",i._updateData),i}({customAttribution:t.customAttribution},n.map,r.current,i.current)),function(){return e&&function(t){t._map.off("styledata",t._updateData),t._map.off("sourcedata",t._updateData)}(e)}}),[n.map]);var p=void 0===t.compact?n.viewport.width<=640:t.compact;Object(o.useEffect)((function(){!p&&l&&f(!1)}),[p]);var h=Object(o.useCallback)((function(){return f((function(t){return!t}))}),[]),d=Object(o.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return o.createElement("div",{style:d,className:t.className},o.createElement("div",{ref:r,"aria-pressed":l,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(p?"mapboxgl-compact":""," ").concat(l?"mapboxgl-compact-show":"")},o.createElement("button",{className:"mapboxgl-ctrl-attrib-button",title:t.toggleLabel,onClick:h}),o.createElement("div",{ref:i,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}an.defaultProps=rn;o.memo(an);var on=n("2lZV");function sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var cn=Object.assign({},Te,{className:"",container:null,label:"Toggle fullscreen"});function un(t){var e=Re(t),n=e.context,r=e.containerRef,i=Object(o.useState)(!1),s=Object(c.a)(i,2),u=s[0],l=s[1],f=Object(o.useState)(!1),p=Object(c.a)(f,2),h=p[0],d=p[1],b=Object(o.useState)(null),v=Object(c.a)(b,2),g=v[0],m=v[1];Object(o.useEffect)((function(){var e=t.container||n.container,r=new Z.a.FullscreenControl({container:e});m(r),d(r._checkFullscreenSupport());var i=function(){var t=!r._fullscreen;r._fullscreen=t,l(t)};return on.a.addEventListener(r._fullscreenchange,i),function(){on.a.removeEventListener(r._fullscreenchange,i)}}),[]);var y=Object(o.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);if(!h)return null;var O=t.className,_=t.label,j=u?"shrink":"fullscreen";return o.createElement("div",{style:y,className:O},o.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},o.createElement("button",{key:j,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(j),type:"button",title:_,onClick:function(){g&&g._onClickFullscreen()}},o.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}un.defaultProps=cn;var ln;o.memo(un);function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var pn=Object.assign({},Wt.defaultProps,{transitionDuration:500}),hn=function(){},dn=Object.assign({},Te,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showAccuracyCircle:!0,onGeolocate:function(){}});function bn(t,e){var n=e.context,r=e.props,i=function(t){var e=new Z.a.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,r=e.toBounds(n);return[[r._ne.lng,r._ne.lat],[r._sw.lng,r._sw.lat]]}(t),a=n.viewport.fitBounds(i,r.fitBoundsOptions),o=a.longitude,s=a.latitude,c=a.zoom,u=Object.assign({},n.viewport,{longitude:o,latitude:s,zoom:c}),l=new rt(u),f=Object.assign({},l.getViewportProps(),pn),p=r.onViewportChange||n.onViewportChange||hn;(r.onViewStateChange||n.onViewStateChange||hn)({viewState:f}),p(f)}function vn(t){var e=Re(t),n=e.context,r=e.containerRef,i=Object(o.useRef)(null),s=Object(o.useState)(null),u=Object(c.a)(s,2),l=u[0],f=u[1],p=Object(o.useState)(!1),h=Object(c.a)(p,2),d=h[0],b=h[1];Object(o.useEffect)((function(){var r;return n.map&&(void 0!==ln?Promise.resolve(ln):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(t){return ln="denied"!==t.state})):(ln=Boolean(window.navigator.geolocation),Promise.resolve(ln))).then((function(a){b(a),i.current&&((r=function(t,e,n){var r=new Z.a.GeolocateControl(e);r._container=on.a.createElement("div"),r._map={on:function(){},_getUIString:function(){return""}},r._setupUI(!0),r._map=t.map,r._geolocateButton=n;var i=t.eventManager;return r.options.trackUserLocation&&i&&i.on("panstart",(function(){"ACTIVE_LOCK"===r._watchState&&(r._watchState="BACKGROUND",n.classList.add("mapboxgl-ctrl-geolocate-background"),n.classList.remove("mapboxgl-ctrl-geolocate-active"))})),r.on("geolocate",e.onGeolocate),r}(n,t,i.current))._updateCamera=function(t){return bn(t,e)},f(r))})),function(){r&&r._clearWatch()}}),[n.map]);var v=Object(o.useCallback)((function(){l&&(l.options=e.props,l.trigger())}),[l]);Object(o.useEffect)((function(){t.auto&&v()}),[l,t.auto]),Object(o.useEffect)((function(){l&&l._onZoom()}),[n.viewport.zoom]);var g=t.className,m=t.label,y=t.disabledLabel,O=t.trackUserLocation,_=Object(o.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return o.createElement("div",{style:_,className:g},o.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},o.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:i,disabled:!d,"aria-pressed":!O,type:"button",title:d?m:y,"aria-label":d?m:y,onClick:v},o.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}vn.defaultProps=dn;o.memo(vn);function gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var mn=function(){},yn=Object.assign({},Te,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function On(t){return function(t,e){for(var n=(t||"").split(".").map(Number),r=(e||"").split(".").map(Number),i=0;i<3;i++){var a=n[i]||0,o=r[i]||0;if(a<o)return-1;if(a>o)return 1}return 0}(t,"1.6.0")>=0?2:1}function _n(t,e,n){var r=t.viewport,i=new rt(Object.assign({},r,n)),a=Object.assign({},i.getViewportProps(),$t),o=e.onViewportChange||t.onViewportChange||mn;(e.onViewStateChange||t.onViewStateChange||mn)({viewState:a}),o(a)}function jn(t,e,n,r){return o.createElement("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n},r||o.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function Sn(t){var e=Re(t),n=e.context,r=e.containerRef,i=t.className,s=t.showCompass,c=t.showZoom,u=t.zoomInLabel,l=t.zoomOutLabel,f=t.compassLabel,p=Object(o.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return o.createElement("div",{style:p,className:i},o.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},c&&jn("zoom-in",u,(function(){_n(n,t,{zoom:n.viewport.zoom+1})})),c&&jn("zoom-out",l,(function(){_n(n,t,{zoom:n.viewport.zoom-1})})),s&&jn("compass",f,(function(){_n(n,t,{bearing:0,pitch:0})}),function(t){var e=Object(o.useMemo)((function(){return t.map?On(t.map.version):2}),[t.map]),n=t.viewport.bearing,r={transform:"rotate(".concat(-n,"deg)")};return 2===e?o.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:r}):o.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:r})}(n))))}Sn.defaultProps=yn;o.memo(Sn);function wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var xn=Object.assign({},Te,{className:"",maxWidth:100,unit:"metric"});function An(t){var e=Re(t),n=e.context,r=e.containerRef,i=Object(o.useState)(null),s=Object(c.a)(i,2),u=s[0],l=s[1];Object(o.useEffect)((function(){if(n.map){var t=new Z.a.ScaleControl;t._map=n.map,t._container=r.current,l(t)}}),[n.map]),u&&(u.options=t,u._onMove());var f=Object(o.useMemo)((function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute"},t.style)}),[t.style]);return o.createElement("div",{style:f,className:t.className},o.createElement("div",{ref:r,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}An.defaultProps=xn;o.memo(An);var Pn="undefined"!=typeof window&&window.devicePixelRatio||1;function En(t){var e=Re(t),n=e.context,r=e.containerRef,i=Object(o.useState)(null),a=Object(c.a)(i,2),s=a[0],u=a[1];Object(o.useEffect)((function(){u(r.current.getContext("2d"))}),[]);var l=n.viewport,f=n.isDragging;return s&&(s.save(),s.scale(Pn,Pn),t.redraw({width:l.width,height:l.height,ctx:s,isDragging:f,project:l.project,unproject:l.unproject}),s.restore()),o.createElement("canvas",{ref:r,width:l.width*Pn,height:l.height*Pn,style:{width:"".concat(l.width,"px"),height:"".concat(l.height,"px"),position:"absolute",left:0,top:0}})}En.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};function Tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function In(t){var e=Re(t),n=e.context,r=e.containerRef,i=n.viewport,s=n.isDragging,c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute",left:0,top:0,width:i.width,height:i.height},t.style);return o.createElement("div",{ref:r,style:c},t.redraw({width:i.width,height:i.height,isDragging:s,project:i.project,unproject:i.unproject}))}In.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};function Mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rn(t){var e=Re(t),n=e.context,r=e.containerRef,i=n.viewport,s=n.isDragging,c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mn(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({position:"absolute",left:0,top:0},t.style);return o.createElement("svg",{width:i.width,height:i.height,ref:r,style:c},t.redraw({width:i.width,height:i.height,isDragging:s,project:i.project,unproject:i.unproject}))}Rn.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};Z.a&&Z.a.setRTLTextPlugin},VwXc:function(t,e,n){"use strict";(function(t){function r(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return r}))}).call(this,n("8oxB"))},Vyni:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",(function(){return r}))},Wium:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("rePB"),i=n("1OyB"),a=n("vuIU"),o=n("Ji7U"),s=n("md7G"),c=n("foSv"),u=n("wldP"),l=n("c9N0"),f=n("v88f");function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var g=["bearing","pitch"],m={speed:1.2,curve:1.414},y=function(t){Object(o.a)(n,t);var e=v(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(this,n),(t=e.call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]})).props=b(b({},m),r),t}return Object(a.a)(n,[{key:"interpolateProps",value:function(t,e,n){var r,i=Object(f.c)(t,e,n,this.props),a=p(g);try{for(a.s();!(r=a.n()).done;){var o=r.value;i[o]=Object(l.e)(t[o]||0,e[o]||0,n)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"getDuration",value:function(t,e){var n=e.transitionDuration;return"auto"===n&&(n=Object(f.f)(t,e,this.props)),n}}]),n}(u.a)},bdgK:function(t,e,n){"use strict";(function(t){n("E9XD");var r=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function a(){n&&(n=!1,t()),r&&c()}function s(){o(a)}function c(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,e);i=t}return c}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;s.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),l=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},f=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||a},p=m(0,0,0,0);function h(t){return parseFloat(t)||0}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+h(t["border-"+n+"-width"])}),0)}function b(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return p;var r=f(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=t["padding-"+i];e[i]=h(a)}return e}(r),a=i.left+i.right,o=i.top+i.bottom,s=h(r.width),c=h(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==e&&(s-=d(r,"left","right")+a),Math.round(c+o)!==n&&(c-=d(r,"top","bottom")+o)),!function(t){return t===f(t).document.documentElement}(t)){var u=Math.round(s+a)-e,l=Math.round(c+o)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return m(i.left,i.top,s,c)}var v="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof f(t).SVGGraphicsElement}:function(t){return t instanceof f(t).SVGElement&&"function"==typeof t.getBBox};function g(t){return i?v(t)?function(t){var e=t.getBBox();return m(0,0,e.width,e.height)}(t):b(t):p}function m(t,e,n,r){return{x:t,y:e,width:n,height:r}}var y=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=g(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),O=function(t,e){var n,r,i,a,o,s,c,u=(r=(n=e).x,i=n.y,a=n.width,o=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:r,y:i,width:a,height:o,top:i,right:r+a,bottom:o+i,left:r}),c);l(this,{target:t,contentRect:u})},_=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new y(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new O(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),j="undefined"!=typeof WeakMap?new WeakMap:new r,S=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new _(e,n,this);j.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){S.prototype[t]=function(){var e;return(e=j.get(this))[t].apply(e,arguments)}}));var w=void 0!==a.ResizeObserver?a.ResizeObserver:S;e.a=w}).call(this,n("yLpj"))},gXd2:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("rp2x"),i=(n("9Q0L"),n("Vyni")),a=n("oJMS"),o=n("3SJd");function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(Object(i.a)(Object(a.a)(t),"setParameters requires a WebGL context"),!Object(o.b)(e)){var n={};for(var s in e){var c=Number(s),u=r.e[s];u&&("string"==typeof u?n[u]=!0:u(t,e[s],c))}var l=t.state&&t.state.cache;if(l)for(var f in n){(0,r.a[f])(t,e,l)}}}function l(t,e){if("number"==typeof(e=e||r.c)){var n=e,i=r.d[n];return i?i(t,n):t.getParameter(n)}var a,o={},c=s(Array.isArray(e)?e:Object.keys(e));try{for(c.s();!(a=c.n()).done;){var u=a.value,l=r.d[u];o[u]=l?l(t,Number(u)):t.getParameter(Number(u))}}catch(f){c.e(f)}finally{c.f()}return o}},gYLD:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("rePB");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function u(t){if(!t)return null;if("string"==typeof t)return t;t.toJS&&(t=t.toJS());var e,n={},r=o(t.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.id]=i}}catch(u){r.e(u)}finally{r.f()}var s=t.layers.map((function(t){var e=n[t.ref],r=null;if("interactive"in t&&delete(r=a({},t)).interactive,e){delete(r=r||a({},t)).ref;var i,s=o(c);try{for(s.s();!(i=s.n()).done;){var l=i.value;l in e&&(r[l]=e[l])}}catch(u){s.e(u)}finally{s.f()}}return r||t}));return a(a({},t),{},{layers:s})}},ltlc:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("rOaP");function i(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'+Object(r.a)(t)+'"')}}},oJMS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));n("Vyni");function r(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function i(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}},"p/I1":function(t,e,n){"use strict";n.d(e,"a",(function(){return te}));var r={};n.r(r),n.d(r,"decode",(function(){return G})),n.d(r,"encode",(function(){return q}));var i={};n.r(i),n.d(i,"decode",(function(){return tt})),n.d(i,"encode",(function(){return nt}));var a={};n.r(a),n.d(a,"decode",(function(){return at})),n.d(a,"encode",(function(){return st}));var o={};n.r(o),n.d(o,"decode",(function(){return ft})),n.d(o,"encode",(function(){return ht}));var s=n("o0o1"),c=n.n(s),u=n("rePB"),l=(n("wcNg"),n("HaE+")),f="undefined"!=typeof __VERSION__?__VERSION__:"latest",p=n("j7CB"),h=n("ltlc"),d=n("w0jg");function b(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function v(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;var n=e.baseUri||e.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url "+t);return n.substr(0,n.lastIndexOf("/")+1)+t}function g(t,e,n){var r=t.bufferViews[n];b(r);var i=e[r.buffer];b(i);var a=(r.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,a,r.byteLength)}var m=n("F2Cy"),y=n("vuIU"),O=n("vbYh"),_=n("TYJr"),j=["SCALAR","VEC2","VEC3","VEC4"],S=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],w=new Map(S),x={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},P={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function E(t){return j[t-1]||j[0]}function T(t){var e=w.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function I(t,e){var n=P[t.componentType],r=x[t.type],i=A[t.componentType],a=t.count*r,o=t.count*r*i;return b(o>=0&&o<=e.byteLength),{ArrayType:n,length:a,byteLength:o}}function M(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},k=function(){function t(t){this.gltf=t||{json:C({},N),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}var e=t.prototype;return e.getApplicationData=function(t){return this.json[t]},e.getExtraData=function(t){return(this.json.extras||{})[t]},e.getExtension=function(t){var e=this.getUsedExtensions().find((function(e){return e===t})),n=this.json.extensions||{};return e?n[t]||!0:null},e.getRequiredExtension=function(t){return this.getRequiredExtensions().find((function(e){return e===t}))?this.getExtension(t):null},e.getRequiredExtensions=function(){return this.json.extensionsRequired||[]},e.getUsedExtensions=function(){return this.json.extensionsUsed||[]},e.getObjectExtension=function(t,e){return(t.extensions||{})[e]},e.getScene=function(t){return this.getObject("scenes",t)},e.getNode=function(t){return this.getObject("nodes",t)},e.getSkin=function(t){return this.getObject("skins",t)},e.getMesh=function(t){return this.getObject("meshes",t)},e.getMaterial=function(t){return this.getObject("materials",t)},e.getAccessor=function(t){return this.getObject("accessors",t)},e.getTexture=function(t){return this.getObject("textures",t)},e.getSampler=function(t){return this.getObject("samplers",t)},e.getImage=function(t){return this.getObject("images",t)},e.getBufferView=function(t){return this.getObject("bufferViews",t)},e.getBuffer=function(t){return this.getObject("buffers",t)},e.getObject=function(t,e){if("object"==typeof e)return e;var n=this.json[t]&&this.json[t][e];if(!n)throw new Error("glTF file error: Could not find "+t+"["+e+"]");return n},e.getTypedArrayForBufferView=function(t){var e=(t=this.getBufferView(t)).buffer,n=this.gltf.buffers[e];b(n);var r=(t.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,r,t.byteLength)},e.getTypedArrayForAccessor=function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=I(t,e),i=r.ArrayType,a=r.length;return new i(n,e.byteOffset+t.byteOffset,a)},e.getTypedArrayForImageData=function(t){t=this.getAccessor(t);var e=this.getBufferView(t.bufferView),n=this.getBuffer(e.buffer).data,r=e.byteOffset||0;return new Uint8Array(n,r,e.byteLength)},e.addApplicationData=function(t,e){return this.json[t]=e,this},e.addExtraData=function(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this},e.addObjectExtension=function(t,e,n){return t.extensions=t.extensions||{},t.extensions[e]=n,this.registerUsedExtension(e),this},e.setObjectExtension=function(t,e,n){(t.extensions||{})[e]=n},e.removeObjectExtension=function(t,e){var n=t.extensions||{},r=n[e];return delete n[e],r},e.addExtension=function(t,e){return void 0===e&&(e={}),b(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e},e.addRequiredExtension=function(t,e){return void 0===e&&(e={}),b(e),this.addExtension(t,e),this.registerRequiredExtension(t),e},e.registerUsedExtension=function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((function(e){return e===t}))||this.json.extensionsUsed.push(t)},e.registerRequiredExtension=function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((function(e){return e===t}))||this.json.extensionsRequired.push(t)},e.removeExtension=function(t){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t]},e.setDefaultScene=function(t){this.json.scene=t},e.addScene=function(t){var e=t.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1},e.addNode=function(t){var e=t.meshIndex,n=t.matrix;this.json.nodes=this.json.nodes||[];var r={mesh:e};return n&&(r.matrix=n),this.json.nodes.push(r),this.json.nodes.length-1},e.addMesh=function(t){var e=t.attributes,n=t.indices,r=t.material,i=t.mode,a=void 0===i?4:i,o={primitives:[{attributes:this._addAttributes(e),mode:a}]};if(n){var s=this._addIndices(n);o.primitives[0].indices=s}return Number.isFinite(r)&&(o.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1},e.addPointCloud=function(t){var e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1},e.addImage=function(t,e){var n=Object(O.a)(t),r=e||(null==n?void 0:n.mimeType),i={bufferView:this.addBufferView(t),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1},e.addBufferView=function(t){var e=t.byteLength;b(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var n={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=Object(_.b)(e,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1},e.addAccessor=function(t,e){var n={bufferView:t,type:E(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1},e.addBinaryBuffer=function(t,e){void 0===e&&(e={size:3});var n=this.addBufferView(t),r={min:e.min,max:e.max};r.min&&r.max||(r=this._getAccessorMinMax(t,e.size));var i={size:e.size,componentType:T(t),count:Math.round(t.length/e.size),min:r.min,max:r.max};return this.addAccessor(n,Object.assign(i,e))},e.addTexture=function(t){var e={source:t.imageIndex};return this.json.textures=this.json.textures||[],this.json.textures.push(e),this.json.textures.length-1},e.addMaterial=function(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1},e.createBinaryChunk=function(){var t,e;this.gltf.buffers=[];for(var n,r=this.byteLength,i=new ArrayBuffer(r),a=new Uint8Array(i),o=0,s=M(this.sourceBuffers||[]);!(n=s()).done;){var c=n.value;o=Object(_.a)(c,a,o)}null!==(t=this.json)&&void 0!==t&&null!==(e=t.buffers)&&void 0!==e&&e[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]},e._removeStringFromArray=function(t,e){for(var n=!0;n;){var r=t.indexOf(e);r>-1?t.splice(r,1):n=!1}},e._addAttributes=function(t){void 0===t&&(t={});var e={};for(var n in t){var r=t[n],i=this._getGltfAttributeName(n),a=this.addBinaryBuffer(r.value,r);e[i]=a}return e},e._addIndices=function(t){return this.addBinaryBuffer(t,{size:1})},e._getGltfAttributeName=function(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}},e._getAccessorMinMax=function(t,e){var n={min:null,max:null};if(t.length<e)return n;n.min=[],n.max=[];for(var r,i=M(t.subarray(0,e));!(r=i()).done;){var a=r.value;n.min.push(a),n.max.push(a)}for(var o=e;o<t.length;o+=e)for(var s=0;s<e;s++)n.min[0+s]=Math.min(n.min[0+s],t[o+s]),n.max[0+s]=Math.max(n.max[0+s],t[o+s]);return n},Object(y.a)(t,[{key:"json",get:function(){return this.gltf.json}}]),t}();function D(t){var e={};for(var n in t){var r=t[n];if("indices"!==n){var i=B(r);e[n]=i}}return e}function B(t){var e=function(t){var e=t,n=1,r=0;t&&t.value&&(e=t.value,n=t.size||1);e&&(ArrayBuffer.isView(e)||(e=function(t,e,n){void 0===n&&(n=!1);if(!t)return null;if(Array.isArray(t))return new e(t);if(n&&!(t instanceof e))return new e(t);return t}(e,Float32Array)),r=e.length/n);return{buffer:e,size:n,count:r}}(t),n=e.buffer,r=e.size;return{value:n,size:r,byteOffset:0,count:e.count,type:E(r),componentType:T(n)}}function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=c.a.mark(Y);function z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(c.a.mark((function t(e,n,r){var i,a,o,s,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&null!==(i=n.gltf)&&void 0!==i&&i.decompressMeshes){t.next=2;break}return t.abrupt("return");case 2:for(a=new k(e),o=[],s=z(Y(a));!(u=s()).done;)l=u.value,a.getObjectExtension(l,"KHR_draco_mesh_compression")&&o.push(X(a,l,n,r));return t.next=7,Promise.all(o);case 7:a.removeExtension("KHR_draco_mesh_compression");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t,e){void 0===e&&(e={});for(var n,r=new k(t),i=z(r.json.meshes||[]);!(n=i()).done;){K(n.value,e),r.addRequiredExtension("KHR_draco_mesh_compression")}}function X(t,e,n,r){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(c.a.mark((function t(e,n,r,i){var a,o,s,u,l,f,p,h,b,v,g,y,O,_;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.getObjectExtension(n,"KHR_draco_mesh_compression")){t.next=3;break}return t.abrupt("return");case 3:return o=e.getTypedArrayForBufferView(a.bufferView),s=Object(d.c)(o.buffer,o.byteOffset),u=i.parse,delete(l=V({},r))["3d-tiles"],t.next=10,u(s,m.a,l,i);case 10:for(f=t.sent,p=D(f.attributes),h=0,b=Object.entries(p);h<b.length;h++)v=b[h],g=v[0],y=v[1],g in n.attributes&&(O=n.attributes[g],null!=(_=e.getAccessor(O))&&_.min&&null!=_&&_.max&&(y.min=_.min,y.max=_.max));n.attributes=p,f.indices&&(n.indices=B(f.indices)),J(n);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t,e,n,r,i){var a,o;if(void 0===n&&(n=4),!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var s=r.DracoWriter.encodeSync({attributes:t}),c=null==i||null===(a=i.parseSync)||void 0===a?void 0:a.call(i,{attributes:t}),u=r._addFauxAttributes(c.attributes),l=r.addBufferView(s);return{primitives:[{attributes:u,mode:n,extensions:(o={},o.KHR_draco_mesh_compression={bufferView:l,attributes:u},o)}]}}function J(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function Y(t){var e,n,r,i,a,o;return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=z(t.json.meshes||[]);case 1:if((n=e()).done){s.next=12;break}r=n.value,i=z(r.primitives);case 4:if((a=i()).done){s.next=10;break}return o=a.value,s.next=8,o;case 8:s.next=4;break;case 10:s.next=1;break;case 12:case"end":return s.stop()}}),F)}function Q(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tt(t){return et.apply(this,arguments)}function et(){return(et=Object(l.a)(c.a.mark((function t(e){var n,r,i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=new k(e),r=n.json,n.removeExtension("KHR_materials_unlit"),i=Q(r.materials||[]);!(a=i()).done;)o=a.value,o.extensions&&o.extensions.KHR_materials_unlit&&(o.unlit=!0),n.removeObjectExtension(o,"KHR_materials_unlit");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t){var e=new k(t),n=e.json;if(e.materials)for(var r,i=Q(n.materials||[]);!(r=i()).done;){var a=r.value;a.unlit&&(delete a.unlit,e.addObjectExtension(a,"KHR_materials_unlit",{}),e.addExtension("KHR_materials_unlit"))}}function rt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function at(t){return ot.apply(this,arguments)}function ot(){return(ot=Object(l.a)(c.a.mark((function t(e){var n,r,i,a,o,s,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=new k(e),r=n.json,(i=n.getExtension("KHR_lights_punctual"))&&(n.json.lights=i.lights,n.removeExtension("KHR_lights_punctual")),a=rt(r.nodes||[]);!(o=a()).done;)s=o.value,(u=n.getObjectExtension(s,"KHR_lights_punctual"))&&(s.light=u.light),n.removeObjectExtension(s,"KHR_lights_punctual");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t){return ct.apply(this,arguments)}function ct(){return(ct=Object(l.a)(c.a.mark((function t(e){var n,r,i,a,o,s,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new k(e),(r=n.json).lights&&(b(!(i=n.addExtension("KHR_lights_punctual")).lights),i.lights=r.lights,delete r.lights),n.json.lights){for(a=rt(n.json.lights);!(o=a()).done;)s=o.value,u=s.node,n.addObjectExtension(u,"KHR_lights_punctual",s);delete n.json.lights}case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ft(t){return pt.apply(this,arguments)}function pt(){return(pt=Object(l.a)(c.a.mark((function t(e){var n,r,i,a,o,s,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new k(e),r=n.json,i=n.getExtension("KHR_techniques_webgl")){for(a=bt(i,n),o=ut(r.materials||[]);!(s=o()).done;)u=s.value,(l=n.getObjectExtension(u,"KHR_techniques_webgl"))&&(u.technique=Object.assign({},l,a[l.technique]),u.technique.values=vt(u.technique,n)),n.removeObjectExtension(u,"KHR_techniques_webgl");n.removeExtension("KHR_techniques_webgl")}case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(t,e){return dt.apply(this,arguments)}function dt(){return(dt=Object(l.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t,e){var n=t.programs,r=void 0===n?[]:n,i=t.shaders,a=void 0===i?[]:i,o=t.techniques,s=void 0===o?[]:o,c=new TextDecoder;return a.forEach((function(t){if(!Number.isFinite(t.bufferView))throw new Error("KHR_techniques_webgl: no shader code");t.code=c.decode(e.getTypedArrayForBufferView(t.bufferView))})),r.forEach((function(t){t.fragmentShader=a[t.fragmentShader],t.vertexShader=a[t.vertexShader]})),s.forEach((function(t){t.program=r[t.program]})),s}function vt(t,e){var n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach((function(e){t.uniforms[e].value&&!(e in n)&&(n[e]=t.uniforms[e].value)})),Object.keys(n).forEach((function(t){"object"==typeof n[t]&&void 0!==n[t].index&&(n[t].texture=e.getTexture(n[t].index))})),n}var gt={KHR_draco_mesh_compression:r,KHR_materials_unlit:i,KHR_lights_punctual:a,KHR_techniques_webgl:o};function mt(t,e,n){return yt.apply(this,arguments)}function yt(){return(yt=Object(l.a)(c.a.mark((function t(e,n,r){var i,a,o,s,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===n&&(n={}),t.t0=c.a.keys(gt);case 2:if((t.t1=t.t0()).done){t.next=12;break}if(i=t.t1.value,s=(null===(a=n)||void 0===a||null===(o=a.gltf)||void 0===o?void 0:o.excludeExtensions)||{},i in s&&!s[i]){t.next=10;break}return u=gt[i],t.next=10,u.decode(e,n,r);case 10:t.next=2;break;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ot(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var wt={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},xt={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},At=function(){function t(t){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}var e=t.prototype;return e.normalize=function(t,e){this.json=t.json;var n=t.json;switch(n.asset&&n.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version "+n.asset.version)}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),function(t){for(var e,n=new k(t),r=n.json,i=Ot(r.images||[]);!(e=i()).done;){var a=e.value,o=n.removeObjectExtension(a,"KHR_binary_glTF");o&&Object.assign(a,o)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,n.removeExtension("KHR_binary_glTF")}(t),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n),this._updateMaterial(n)},e._addAsset=function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"},e._convertTopLevelObjectsToArrays=function(t){for(var e in wt)this._convertTopLevelObjectToArray(t,e)},e._convertTopLevelObjectToArray=function(t,e){var n=t[e];if(n&&!Array.isArray(n))for(var r in t[e]=[],n){var i=n[r];i.id=i.id||r;var a=t[e].length;t[e].push(i),this.idToIndexMap[e][r]=a}},e._convertObjectIdsToArrayIndices=function(t){for(var e in wt)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(var n,r=jt(t.textures);!(n=r()).done;){var i=n.value;this._convertTextureIds(i)}for(var a,o=jt(t.meshes);!(a=o()).done;){var s=a.value;this._convertMeshIds(s)}for(var c,u=jt(t.nodes);!(c=u()).done;){var l=c.value;this._convertNodeIds(l)}for(var f,p=jt(t.scenes);!(f=p()).done;){var h=f.value;this._convertSceneIds(h)}},e._convertTextureIds=function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))},e._convertMeshIds=function(t){for(var e,n=jt(t.primitives);!(e=n()).done;){var r=e.value,i=r.attributes,a=r.indices,o=r.material;for(var s in i)i[s]=this._convertIdToIndex(i[s],"accessor");a&&(r.indices=this._convertIdToIndex(a,"accessor")),o&&(r.material=this._convertIdToIndex(o,"material"))}},e._convertNodeIds=function(t){var e=this;t.children&&(t.children=t.children.map((function(t){return e._convertIdToIndex(t,"node")}))),t.meshes&&(t.meshes=t.meshes.map((function(t){return e._convertIdToIndex(t,"mesh")})))},e._convertSceneIds=function(t){var e=this;t.nodes&&(t.nodes=t.nodes.map((function(t){return e._convertIdToIndex(t,"node")})))},e._convertIdsToIndices=function(t,e){t[e]||(console.warn("gltf v1: json doesn't contain attribute "+e),t[e]=[]);for(var n,r=jt(t[e]);!(n=r()).done;){var i=n.value;for(var a in i){var o=i[a],s=this._convertIdToIndex(o,a);i[a]=s}}},e._convertIdToIndex=function(t,e){var n=xt[e];if(n in this.idToIndexMap){var r=this.idToIndexMap[n][t];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve "+e+" with id "+t);return r}return t},e._updateObjects=function(t){for(var e,n=jt(this.json.buffers);!(e=n()).done;){delete e.value.type}},e._updateMaterial=function(t){for(var e,n=function(){var n=e.value;n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var r=n.values&&n.values.tex,i=t.textures.findIndex((function(t){return t.id===r}));-1!==i&&(n.pbrMetallicRoughness.baseColorTexture={index:i})},r=jt(t.materials);!(e=r()).done;)n()},t}();function Pt(t,e){return void 0===e&&(e={}),(new At).normalize(t,e)}var Et;n("E9XD");function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Rt={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Lt={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},Ct={magFilter:Lt.TEXTURE_MAG_FILTER,minFilter:Lt.TEXTURE_MIN_FILTER,wrapS:Lt.TEXTURE_WRAP_S,wrapT:Lt.TEXTURE_WRAP_T},Nt=((Et={})[Lt.TEXTURE_MAG_FILTER]=Lt.LINEAR,Et[Lt.TEXTURE_MIN_FILTER]=Lt.NEAREST_MIPMAP_LINEAR,Et[Lt.TEXTURE_WRAP_S]=Lt.REPEAT,Et[Lt.TEXTURE_WRAP_]=Lt.REPEAT,Et);var kt=function(){function t(){}var e=t.prototype;return e.postProcess=function(t,e){void 0===e&&(e={});var n=t.json,r=t.buffers,i=void 0===r?[]:r,a=t.images,o=void 0===a?[]:a,s=t.baseUri,c=void 0===s?"":s;return b(n),this.baseUri=c,this.json=n,this.buffers=i,this.images=o,this._resolveTree(this.json,e),this.json},e._resolveTree=function(t,e){var n=this;void 0===e&&(e={}),t.bufferViews&&(t.bufferViews=t.bufferViews.map((function(t,e){return n._resolveBufferView(t,e)}))),t.images&&(t.images=t.images.map((function(t,e){return n._resolveImage(t,e)}))),t.samplers&&(t.samplers=t.samplers.map((function(t,e){return n._resolveSampler(t,e)}))),t.textures&&(t.textures=t.textures.map((function(t,e){return n._resolveTexture(t,e)}))),t.accessors&&(t.accessors=t.accessors.map((function(t,e){return n._resolveAccessor(t,e)}))),t.materials&&(t.materials=t.materials.map((function(t,e){return n._resolveMaterial(t,e)}))),t.meshes&&(t.meshes=t.meshes.map((function(t,e){return n._resolveMesh(t,e)}))),t.nodes&&(t.nodes=t.nodes.map((function(t,e){return n._resolveNode(t,e)}))),t.skins&&(t.skins=t.skins.map((function(t,e){return n._resolveSkin(t,e)}))),t.scenes&&(t.scenes=t.scenes.map((function(t,e){return n._resolveScene(t,e)}))),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])},e.getScene=function(t){return this._get("scenes",t)},e.getNode=function(t){return this._get("nodes",t)},e.getSkin=function(t){return this._get("skins",t)},e.getMesh=function(t){return this._get("meshes",t)},e.getMaterial=function(t){return this._get("materials",t)},e.getAccessor=function(t){return this._get("accessors",t)},e.getCamera=function(t){return null},e.getTexture=function(t){return this._get("textures",t)},e.getSampler=function(t){return this._get("samplers",t)},e.getImage=function(t){return this._get("images",t)},e.getBufferView=function(t){return this._get("bufferViews",t)},e.getBuffer=function(t){return this._get("buffers",t)},e._get=function(t,e){if("object"==typeof e)return e;var n=this.json[t]&&this.json[t][e];return n||console.warn("glTF file error: Could not find "+t+"["+e+"]"),n},e._resolveScene=function(t,e){var n=this;return t.id=t.id||"scene-"+e,t.nodes=(t.nodes||[]).map((function(t){return n.getNode(t)})),t},e._resolveNode=function(t,e){var n=this;return t.id=t.id||"node-"+e,t.children&&(t.children=t.children.map((function(t){return n.getNode(t)}))),void 0!==t.mesh?t.mesh=this.getMesh(t.mesh):void 0!==t.meshes&&t.meshes.length&&(t.mesh=t.meshes.reduce((function(t,e){var r=n.getMesh(e);return t.id=r.id,t.primitives=t.primitives.concat(r.primitives),t}),{primitives:[]})),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t},e._resolveSkin=function(t,e){return t.id=t.id||"skin-"+e,t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t},e._resolveMesh=function(t,e){var n=this;return t.id=t.id||"mesh-"+e,t.primitives&&(t.primitives=t.primitives.map((function(t){var e=(t=It({},t)).attributes;for(var r in t.attributes={},e)t.attributes[r]=n.getAccessor(e[r]);return void 0!==t.indices&&(t.indices=n.getAccessor(t.indices)),void 0!==t.material&&(t.material=n.getMaterial(t.material)),t}))),t},e._resolveMaterial=function(t,e){if(t.id=t.id||"material-"+e,t.normalTexture&&(t.normalTexture=It({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=It({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=It({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness=It({},t.pbrMetallicRoughness);var n=t.pbrMetallicRoughness;n.baseColorTexture&&(n.baseColorTexture=It({},n.baseColorTexture),n.baseColorTexture.texture=this.getTexture(n.baseColorTexture.index)),n.metallicRoughnessTexture&&(n.metallicRoughnessTexture=It({},n.metallicRoughnessTexture),n.metallicRoughnessTexture.texture=this.getTexture(n.metallicRoughnessTexture.index))}return t},e._resolveAccessor=function(t,e){var n,r;if(t.id=t.id||"accessor-"+e,void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=(n=t.componentType,Rt[n]),t.components=(r=t.type,Mt[r]),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var i=t.bufferView.buffer,a=I(t,t.bufferView),o=a.ArrayType,s=a.byteLength,c=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+i.byteOffset,u=i.arrayBuffer.slice(c,c+s);t.value=new o(u)}return t},e._resolveTexture=function(t,e){return t.id=t.id||"texture-"+e,t.sampler="sampler"in t?this.getSampler(t.sampler):Nt,t.source=this.getImage(t.source),t},e._resolveSampler=function(t,e){for(var n in t.id=t.id||"sampler-"+e,t.parameters={},t){var r=this._enumSamplerParameter(n);void 0!==r&&(t.parameters[r]=t[n])}return t},e._enumSamplerParameter=function(t){return Ct[t]},e._resolveImage=function(t,e){t.id=t.id||"image-"+e,void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));var n=this.images[e];return n&&(t.image=n),t},e._resolveBufferView=function(t,e){t.id=t.id||"bufferView-"+e;var n=t.buffer;t.buffer=this.buffers[n];var r=this.buffers[n].arrayBuffer,i=this.buffers[n].byteOffset||0;return"byteOffset"in t&&(i+=t.byteOffset),t.data=new Uint8Array(r,i,t.byteLength),t},e._resolveCamera=function(t,e){return t.id=t.id||"camera-"+e,t.perspective,t.orthographic,t},t}();function Dt(t,e){return(new kt).postProcess(t,e)}var Bt=n("Qk7e");function Ut(t,e,n){void 0===e&&(e=0),void 0===n&&(n={});var r=new DataView(t),i=n.magic,a=void 0===i?1735152710:i,o=r.getUint32(e,!1);return o===a||1735152710===o}function Vt(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r={});var i=new DataView(e),a=function(t,e){return void 0===e&&(e=0),""+String.fromCharCode(t.getUint8(e+0))+String.fromCharCode(t.getUint8(e+1))+String.fromCharCode(t.getUint8(e+2))+String.fromCharCode(t.getUint8(e+3))}(i,n+0),o=i.getUint32(n+4,!0),s=i.getUint32(n+8,!0);switch(Object.assign(t,{header:{byteOffset:n,byteLength:s,hasBinChunk:!1},type:a,version:o,json:{},binChunks:[]}),n+=12,t.version){case 1:return function(t,e,n){Object(Bt.a)(t.header.byteLength>20);var r=e.getUint32(n+0,!0),i=e.getUint32(n+4,!0);return n+=8,Object(Bt.a)(0===i),Ft(t,e,n,r),n+=r,n+=zt(t,e,n,t.header.byteLength)}(t,i,n);case 2:return function(t,e,n,r){return Object(Bt.a)(t.header.byteLength>20),function(t,e,n,r){for(;n+8<=t.header.byteLength;){var i=e.getUint32(n+0,!0),a=e.getUint32(n+4,!0);switch(n+=8,a){case 1313821514:Ft(t,e,n,i);break;case 5130562:zt(t,e,n,i);break;case 0:r.strict||Ft(t,e,n,i);break;case 1:r.strict||zt(t,e,n,i)}n+=Object(_.b)(i,4)}}(t,e,n,r),n+t.header.byteLength}(t,i,n,r={});default:throw new Error("Invalid GLB version "+t.version+". Only supports v1 and v2.")}}function Ft(t,e,n,r){var i=new Uint8Array(e.buffer,n,r),a=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(a),Object(_.b)(r,4)}function zt(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Object(_.b)(r,4)}function Ht(t,e,n,r,i){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(l.a)(c.a.mark((function t(e,n,r,i,a){var o,s,u,l,f,p,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r=0),Zt(e,n,r,i),Pt(e,{normalize:null==i||null===(o=i.gltf)||void 0===o?void 0:o.normalize}),f=[],null==i||null===(s=i.gltf)||void 0===s||!s.loadBuffers||!e.json.buffers){t.next=7;break}return t.next=7,qt(e,i,a);case 7:return null!=i&&null!==(u=i.gltf)&&void 0!==u&&u.loadImages&&(p=Wt(e,i,a),f.push(p)),h=mt(e,i,a),f.push(h),t.next=12,Promise.all(f);case 12:return t.abrupt("return",null!=i&&null!==(l=i.gltf)&&void 0!==l&&l.postProcess?Dt(e,i):e);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zt(t,e,n,r){(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!Ut(e,n,r))&&(e=(new TextDecoder).decode(e));if("string"==typeof e)t.json=Object(h.a)(e);else if(e instanceof ArrayBuffer){var i={};n=Vt(i,e,n,r.glb),b("glTF"===i.type,"Invalid GLB magic string "+i.type),t._glb=i,t.json=i.json}else b(!1,"GLTF: must be ArrayBuffer or string");var a=t.json.buffers||[];if(t.buffers=new Array(a.length).fill(null),t._glb&&t._glb.header.hasBinChunk){var o=t._glb.binChunks;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}var s=t.json.images||[];t.images=new Array(s.length).fill({})}function qt(t,e,n){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(l.a)(c.a.mark((function t(e,n,r){var i,a,o,s,u,l,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.json.buffers.length)){t.next=18;break}if(!(a=e.json.buffers[i]).uri){t.next=15;break}return b(r.fetch),u=v(a.uri,n),t.next=9,null==r||null===(o=r.fetch)||void 0===o?void 0:o.call(r,u);case 9:return l=t.sent,t.next=12,null==l||null===(s=l.arrayBuffer)||void 0===s?void 0:s.call(l);case 12:f=t.sent,e.buffers[i]={arrayBuffer:f,byteOffset:0,byteLength:f.byteLength},delete a.uri;case 15:++i,t.next=1;break;case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wt(t,e,n){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(l.a)(c.a.mark((function t(e,n,r){var i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.json.images||[],a=[],o=0;o<i.length;++o)a.push(Jt(e,i[o],o,n,r));return t.next=5,Promise.all(a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jt(t,e,n,r,i){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(l.a)(c.a.mark((function t(e,n,r,i,a){var o,s,u,l,f,h,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.fetch,s=a.parse,!n.uri){t.next=9;break}return l=v(n.uri,i),t.next=5,o(l);case 5:return f=t.sent,t.next=8,f.arrayBuffer();case 8:u=t.sent;case 9:return Number.isFinite(n.bufferView)&&(h=g(e.json,e.buffers,n.bufferView),u=Object(d.c)(h.buffer,h.byteOffset,h.byteLength)),b(u,"glTF image has no data"),t.next=13,s(u,p.a,{},a);case 13:m=t.sent,e.images[r]=m;case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(n),!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var te={name:"glTF",id:"gltf",module:"gltf",version:f,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(t,e,n){return ee.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function ee(){return(ee=Object(l.a)(c.a.mark((function t(e,n,r){var i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),(n=$t($t({},te.options),n)).gltf=$t($t({},te.options.gltf),n.gltf),i=n.byteOffset,a=void 0===i?0:i,o={},t.next=7,Ht(o,e,a,n,r);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},q1ac:function(t,e,n){"use strict";n.d(e,"a",(function(){return kt}));var r=n("o0o1"),i=n.n(r),a=(n("wcNg"),n("HaE+")),o=n("VnMh"),s=n("FJ6+"),c="undefined"!=typeof __VERSION__?__VERSION__:"latest",u={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect"},l=(Object.keys(u),n("Qk7e"));function f(t,e,n){Object(l.a)(t instanceof ArrayBuffer);var r=new TextDecoder("utf8"),i=new Uint8Array(t,e,n);return r.decode(i)}function p(t,e){void 0===e&&(e=0);var n=new DataView(t);return""+String.fromCharCode(n.getUint8(e+0))+String.fromCharCode(n.getUint8(e+1))+String.fromCharCode(n.getUint8(e+2))+String.fromCharCode(n.getUint8(e+3))}var h=n("rePB"),d=n("F2Cy");function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g,m={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},y=v(v({},{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6}),m),O=n("zXfU"),_=((g={})[m.DOUBLE]=Float64Array,g[m.FLOAT]=Float32Array,g[m.UNSIGNED_SHORT]=Uint16Array,g[m.UNSIGNED_INT]=Uint32Array,g[m.UNSIGNED_BYTE]=Uint8Array,g[m.BYTE]=Int8Array,g[m.SHORT]=Int16Array,g[m.INT]=Int32Array,g),j={DOUBLE:m.DOUBLE,FLOAT:m.FLOAT,UNSIGNED_SHORT:m.UNSIGNED_SHORT,UNSIGNED_INT:m.UNSIGNED_INT,UNSIGNED_BYTE:m.UNSIGNED_BYTE,BYTE:m.BYTE,SHORT:m.SHORT,INT:m.INT},S=function(){function t(){}return t.fromTypedArray=function(t){for(var e in t=ArrayBuffer.isView(t)?t.constructor:t,_){if(_[e]===t)return e}throw new Error("Failed to convert GL type")},t.fromName=function(t){var e=j[t];if(!e)throw new Error("Failed to convert GL type");return e},t.getArrayType=function(t){switch(t){case m.UNSIGNED_SHORT_5_6_5:case m.UNSIGNED_SHORT_4_4_4_4:case m.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:var e=_[t];if(!e)throw new Error("Failed to convert GL type");return e}},t.getByteSize=function(e){return t.getArrayType(e).BYTES_PER_ELEMENT},t.validate=function(e){return Boolean(t.getArrayType(e))},t.createTypedArray=function(e,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=(n.byteLength-r)/t.getByteSize(e)),new(t.getArrayType(e))(n,r,i)},t}(),w=function(){function t(t,e){this.json=t,this.buffer=e,this.featuresLength=0,this._cachedTypedArrays={}}var e=t.prototype;return e.getExtension=function(t){return this.json.extensions&&this.json.extensions[t]},e.hasProperty=function(t){return Boolean(this.json[t])},e.getGlobalProperty=function(t,e,n){void 0===e&&(e=y.UNSIGNED_INT),void 0===n&&(n=1);var r=this.json[t];return r&&Number.isFinite(r.byteOffset)?this._getTypedArrayFromBinary(t,e,n,1,r.byteOffset):r},e.getPropertyArray=function(t,e,n){var r=this.json[t];return r&&Number.isFinite(r.byteOffset)?("componentType"in r&&(e=S.fromName(r.componentType)),this._getTypedArrayFromBinary(t,e,n,this.featuresLength,r.byteOffset)):this._getTypedArrayFromArray(t,e,r)},e.getProperty=function(t,e,n,r,i){var a=this.json[t];if(!a)return a;var o=this.getPropertyArray(t,e,n);if(1===n)return o[r];for(var s=0;s<n;++s)i[s]=o[n*r+s];return i},e._getTypedArrayFromBinary=function(t,e,n,r,i){var a=this._cachedTypedArrays,o=a[t];return o||(o=S.createTypedArray(e,this.buffer.buffer,this.buffer.byteOffset+i,r*n),a[t]=o),o},e._getTypedArrayFromArray=function(t,e,n){var r=this._cachedTypedArrays,i=r[t];return i||(i=S.createTypedArray(e,n),r[t]=i),i},t}(),x=n("KQm4"),A={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},P={SCALAR:function(t,e){return t[e]},VEC2:function(t,e){return[t[2*e+0],t[2*e+1]]},VEC3:function(t,e){return[t[3*e+0],t[3*e+1],t[3*e+2]]},VEC4:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT2:function(t,e){return[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]]},MAT3:function(t,e){return[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]]},MAT4:function(t,e){return[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]}},E={SCALAR:function(t,e,n){e[n]=t},VEC2:function(t,e,n){e[2*n+0]=t[0],e[2*n+1]=t[1]},VEC3:function(t,e,n){e[3*n+0]=t[0],e[3*n+1]=t[1],e[3*n+2]=t[2]},VEC4:function(t,e,n){e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT2:function(t,e,n){e[4*n+0]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]},MAT3:function(t,e,n){e[9*n+0]=t[0],e[9*n+1]=t[1],e[9*n+2]=t[2],e[9*n+3]=t[3],e[9*n+4]=t[4],e[9*n+5]=t[5],e[9*n+6]=t[6],e[9*n+7]=t[7],e[9*n+8]=t[8],e[9*n+9]=t[9]},MAT4:function(t,e,n){e[16*n+0]=t[0],e[16*n+1]=t[1],e[16*n+2]=t[2],e[16*n+3]=t[3],e[16*n+4]=t[4],e[16*n+5]=t[5],e[16*n+6]=t[6],e[16*n+7]=t[7],e[16*n+8]=t[8],e[16*n+9]=t[9],e[16*n+10]=t[10],e[16*n+11]=t[11],e[16*n+12]=t[12],e[16*n+13]=t[13],e[16*n+14]=t[14],e[16*n+15]=t[15]}};var T=function(t){return void 0!==t};function I(t,e,n){if(!e)return null;var r=t.getExtension("3DTILES_batch_table_hierarchy"),i=e.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),e.extensions=e.extensions||{},e.extensions["3DTILES_batch_table_hierarchy"]=i,r=i),r?function(t,e){var n,r,i,a,o=t.instancesLength,s=t.classes,c=t.classIds,u=t.parentCounts,l=t.parentIds,f=o;T(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),c=i.createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,o));if(T(u))for(T(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),u=i.createArrayBufferView(e.buffer,e.byteOffset+u.byteOffset,o)),a=new Uint16Array(o),f=0,n=0;n<o;++n)a[n]=f,f+=u[n];T(l)&&T(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,i=getBinaryAccessor(l),l=i.createArrayBufferView(e.buffer,e.byteOffset+l.byteOffset,f));var p=s.length;for(n=0;n<p;++n){var h=s[n].length,d=s[n].instances,b=getBinaryProperties(h,d,e);s[n].instances=combine(b,d)}var v=new Array(p).fill(0),g=new Uint16Array(o);for(n=0;n<o;++n)r=c[n],g[n]=v[r],++v[r];var m={classes:s,classIds:c,classIndexes:g,parentCounts:u,parentIndexes:a,parentIds:l};return function(t){for(var e=t.classIds.length,n=0;n<e;++n)R(t,n,stack)}(m),m}(r,n):null}function M(t,e,n){if(t){var r=t.parentCounts;return t.parentIds?n(t,e):r>0?function(t,e,n){var r=t.classIds,i=t.parentCounts,a=t.parentIds,o=t.parentIndexes,s=r.length,c=scratchVisited;c.length=Math.max(c.length,s);var u=++marker,l=scratchStack;l.length=0,l.push(e);for(;l.length>0;)if(e=l.pop(),c[e]!==u){c[e]=u;var f=n(t,e);if(T(f))return f;for(var p=i[e],h=o[e],d=0;d<p;++d){var b=a[h+d];b!==e&&l.push(b)}}return null}(t,e,n):function(t,e,n){var r=!0;for(;r;){var i=n(t,e);if(T(i))return i;var a=t.parentIds[e];r=a!==e,e=a}throw new Error("traverseHierarchySingleParent")}(t,e,n)}}function R(t,e,n){var r=t.parentCounts,i=t.parentIds,a=t.parentIndexes,o=t.classIds.length;if(T(i)){assert(e<o,"Parent index "+e+" exceeds the total number of instances: "+o),assert(-1===n.indexOf(e),"Circular dependency detected in the batch table hierarchy."),n.push(e);for(var s=T(r)?r[e]:1,c=T(r)?a[e]:e,u=0;u<s;++u){var l=i[c+u];l!==e&&R(t,l,n)}n.pop(e)}}function L(t){return null!=t}var C=function(t,e){return t},N={HIERARCHY:!0,extensions:!0,extras:!0},k=function(){function t(t,e,n,r){var i;for(var a in void 0===r&&(r={}),Object(l.a)(n>=0),this.json=t||{},this.binary=e,this.featureCount=n,this._extensions=(null===(i=this.json)||void 0===i?void 0:i.extensions)||{},this._properties={},this.json)N[a]||(this._properties[a]=this.json[a]);this._binaryProperties=this._initializeBinaryProperties(),r["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=I(this,this.json,this.binary))}var e=t.prototype;return e.getExtension=function(t){return this.json&&this.json.extensions&&this.json.extensions[t]},e.memorySizeInBytes=function(){return 0},e.isClass=function(t,e){return this._checkBatchId(t),Object(l.a)("string"==typeof e,e),!!this._hierarchy&&L(M(this._hierarchy,t,(function(t,n){var r=t.classIds[n];return t.classes[r].name===e})))},e.isExactClass=function(t,e){return Object(l.a)("string"==typeof e,e),this.getExactClassName(t)===e},e.getExactClassName=function(t){if(this._checkBatchId(t),this._hierarchy){var e=this._hierarchy.classIds[t];return this._hierarchy.classes[e].name}},e.hasProperty=function(t,e){return this._checkBatchId(t),Object(l.a)("string"==typeof e,e),L(this._properties[e])||this._hasPropertyInHierarchy(t,e)},e.getPropertyNames=function(t,e){var n;this._checkBatchId(t),(e=L(e)?e:[]).length=0;var r=Object.keys(this._properties);return(n=e).push.apply(n,Object(x.a)(r)),this._hierarchy&&this._getPropertyNamesInHierarchy(t,e),e},e.getProperty=function(t,e){if(this._checkBatchId(t),Object(l.a)("string"==typeof e,e),this._binaryProperties){var n=this._binaryProperties[e];if(L(n))return this._getBinaryProperty(n,t)}var r=this._properties[e];if(L(r))return C(r[t]);if(this._hierarchy){var i=this._getHierarchyProperty(t,e);if(L(i))return i}},e.setProperty=function(t,e,n){var r=this.featureCount;if(this._checkBatchId(t),Object(l.a)("string"==typeof e,e),this._binaryProperties){var i=this._binaryProperties[e];if(i)return void this._setBinaryProperty(i,t,n)}if(!this._hierarchy||!this._setHierarchyProperty(this,t,e,n)){var a=this._properties[e];L(a)||(this._properties[e]=new Array(r),a=this._properties[e]),a[t]=C(n)}},e._checkBatchId=function(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")},e._getBinaryProperty=function(t,e){return t.unpack(t.typedArray,e)},e._setBinaryProperty=function(t,e,n){t.pack(n,t.typedArray,e)},e._initializeBinaryProperties=function(){var t=null;for(var e in this._properties){var n=this._properties[e],r=this._initializeBinaryProperty(e,n);r&&((t=t||{})[e]=r)}return t},e._initializeBinaryProperty=function(t,e){if("byteOffset"in e){var n=e;Object(l.a)(this.binary,"Property "+t+" requires a batch table binary."),Object(l.a)(n.type,"Property "+t+" requires a type.");var r=function(t,e,n,r){var i=t.componentType;Object(l.a)(t.componentType);var a="string"==typeof i?S.fromName(i):i,o=A[t.type],s=P[t.type],c=E[t.type];return n+=t.byteOffset,{values:S.createTypedArray(a,e,n,o*r),type:a,size:o,unpacker:s,packer:c}}(n,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:r.values,componentCount:r.size,unpack:r.unpacker,pack:r.packer}}return null},e._hasPropertyInHierarchy=function(t,e){if(!this._hierarchy)return!1;var n=M(this._hierarchy,t,(function(t,n){var r=t.classIds[n];return L(t.classes[r].instances[e])}));return L(n)},e._getPropertyNamesInHierarchy=function(t,e){M(this._hierarchy,t,(function(t,n){var r=t.classIds[n],i=t.classes[r].instances;for(var a in i)i.hasOwnProperty(a)&&-1===e.indexOf(a)&&e.push(a)}))},e._getHierarchyProperty=function(t,e){var n=this;return M(this._hierarchy,t,(function(t,r){var i=t.classIds[r],a=t.classes[i],o=t.classIndexes[r],s=a.instances[e];return L(s)?L(s.typedArray)?n._getBinaryProperty(s,o):C(s[o]):null}))},e._setHierarchyProperty=function(t,e,n,r){var i=this,a=M(this._hierarchy,e,(function(t,a){var o=t.classIds[a],s=t.classes[o],c=t.classIndexes[a],u=s.instances[n];return!!L(u)&&(Object(l.a)(a===e,'Inherited property "'+n+'" is read-only.'),L(u.typedArray)?i._setBinaryProperty(u,c,r):u[c]=C(r),!0)}));return L(a)},t}();function D(t,e,n){void 0===n&&(n=0);var r=new DataView(e);if(t.magic=r.getUint32(n,!0),n+=4,t.version=r.getUint32(n,!0),n+=4,t.byteLength=r.getUint32(n,!0),n+=4,1!==t.version)throw new Error("3D Tile Version "+t.version+" not supported");return n}function B(t,e,n){var r,i=new DataView(e);t.header=t.header||{};var a=i.getUint32(n,!0);n+=4;var o=i.getUint32(n,!0);n+=4;var s=i.getUint32(n,!0);n+=4;var c=i.getUint32(n,!0);return n+=4,s>=570425344?(n-=8,r=a,s=o,c=0,a=0,o=0,console.warn("b3dm tile in legacy format.")):c>=570425344&&(n-=4,r=s,s=a,c=o,a=0,o=0,console.warn("b3dm tile in legacy format.")),t.header.featureTableJsonByteLength=a,t.header.featureTableBinaryByteLength=o,t.header.batchTableJsonByteLength=s,t.header.batchTableBinaryByteLength=c,t.header.batchLength=r,n}function U(t,e,n,r){return n=function(t,e,n,r){var i=t.header,a=i.featureTableJsonByteLength,o=i.featureTableBinaryByteLength,s=i.batchLength;if(t.featureTableJson={BATCH_LENGTH:s||0},a>0){var c=f(e,n,a);t.featureTableJson=JSON.parse(c)}return n+=a,t.featureTableBinary=new Uint8Array(e,n,o),n+=o}(t,e,n),n=function(t,e,n,r){var i=t.header,a=i.batchTableJsonByteLength,o=i.batchTableBinaryByteLength;if(a>0){var s=f(e,n,a);t.batchTableJson=JSON.parse(s),n+=a,o>0&&(t.batchTableBinary=new Uint8Array(e,n,o),t.batchTableBinary=new Uint8Array(t.batchTableBinary),n+=o)}return n}(t,e,n)}function V(t,e){void 0===e&&(e=[0,0,0]);var n=t>>11&31,r=t>>5&63,i=31&t;return e[0]=n<<3,e[1]=r<<2,e[2]=i<<3,e}function F(t,e,n){if(!(e||t&&t.batchIds&&n))return null;var r=t.batchIds,i=t.isRGB565,a=t.pointCount;if(r&&n){for(var o=new Uint8ClampedArray(3*a),s=0;s<a;s++){var c=r[s],u=n.getProperty(c,"dimensions").map((function(t){return 255*t}));o[3*s]=u[0],o[3*s+1]=u[1],o[3*s+2]=u[2]}return{type:y.UNSIGNED_BYTE,value:o,size:3,normalized:!0}}if(i){for(var l=new Uint8ClampedArray(3*a),f=0;f<a;f++){var p=V(e[f]);l[3*f]=p[0],l[3*f+1]=p[1],l[3*f+2]=p[2]}return{type:y.UNSIGNED_BYTE,value:l,size:3,normalized:!0}}return e&&e.length===3*a?{type:y.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:y.UNSIGNED_BYTE,value:e,size:4,normalized:!0}}var z=n("Oz/4"),H=n("a3TU");n("gOKY");function G(t,e){if(!t)throw new Error("math.gl assertion failed. "+e)}new z.a,new O.a,new z.a,new z.a,new Uint8Array(1);function Z(t,e){return void 0===e&&(e=255),Object(H.a)(t,0,e)/e*2-1}function q(t){return t<0?-1:1}function X(t,e,n,r){if(G(r),t<0||t>n||e<0||e>n)throw new Error("x and y must be unsigned normalized integers between 0 and "+n);if(r.x=Z(t,n),r.y=Z(e,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){var i=r.x;r.x=(1-Math.abs(r.y))*q(i),r.y=(1-Math.abs(i))*q(r.y)}return r.normalize()}function W(t,e,n){return X(t,e,255,n)}var K=new O.a;function J(t,e,n){return t.isQuantized?n["3d-tiles"]&&n["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,function(t,e){for(var n=new O.a,r=new Float32Array(3*t.pointCount),i=0;i<t.pointCount;i++)n.set(e[3*i],e[3*i+1],e[3*i+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(r,3*i);return r}(t,e)):{type:y.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){Object(h.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e,n,r,i){return tt.apply(this,arguments)}function tt(){return(tt=Object(a.a)(i.a.mark((function t(e,n,r,a,o){var s,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=D(e,n,r),r=B(e,n,r),r=U(e,n,r),et(e),s=nt(e),c=s.featureTable,u=s.batchTable,t.next=7,ot(e,c,u,a,o);case 7:return rt(e,c,a),it(e,c,u),at(e,c),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function nt(t){var e=new w(t.featureTableJson,t.featureTableBinary),n=e.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(n))throw new Error("POINTS_LENGTH must be defined");e.featuresLength=n,t.featuresLength=n,t.pointsLength=n,t.pointCount=n,t.rtcCenter=e.getGlobalProperty("RTC_CENTER",y.FLOAT,3);var r=function(t,e){var n=null;if(!t.batchIds&&e.hasProperty("BATCH_ID")&&(t.batchIds=e.getPropertyArray("BATCH_ID",y.UNSIGNED_SHORT,1),t.batchIds)){var r=e.getGlobalProperty("BATCH_LENGTH");if(!r)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=t.batchTableJson,a=t.batchTableBinary;n=new k(i,a,r)}return n}(t,e);return{featureTable:e,batchTable:r}}function rt(t,e,n){if(!t.attributes.positions)if(e.hasProperty("POSITION"))t.attributes.positions=e.getPropertyArray("POSITION",y.FLOAT,3);else if(e.hasProperty("POSITION_QUANTIZED")){var r=e.getPropertyArray("POSITION_QUANTIZED",y.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",y.FLOAT,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",y.FLOAT,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=J(t,r,n)}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function it(t,e,n){if(!t.attributes.colors){var r=null;e.hasProperty("RGBA")?(r=e.getPropertyArray("RGBA",y.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty("RGB")?r=e.getPropertyArray("RGB",y.UNSIGNED_BYTE,3):e.hasProperty("RGB565")&&(r=e.getPropertyArray("RGB565",y.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=F(t,r,n)}e.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=e.getGlobalProperty("CONSTANT_RGBA",y.UNSIGNED_BYTE,4))}function at(t,e){if(!t.attributes.normals){var n=null;e.hasProperty("NORMAL")?n=e.getPropertyArray("NORMAL",y.FLOAT,3):e.hasProperty("NORMAL_OCT16P")&&(n=e.getPropertyArray("NORMAL_OCT16P",y.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=function(t,e){if(!e)return null;if(t.isOctEncoded16P){for(var n=new Float32Array(3*t.pointsLength),r=0;r<t.pointsLength;r++)W(e[2*r],e[2*r+1],K),K.toArray(n,3*r);return{type:y.FLOAT,size:2,value:n}}return{type:y.FLOAT,size:2,value:e}}(t,n)}}function ot(t,e,n,r,i){return st.apply(this,arguments)}function st(){return(st=Object(a.a)(i.a.mark((function t(e,n,r,a,o){var s,c,u,l,f,p,h,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((l=e.batchTableJson&&e.batchTableJson.extensions&&e.batchTableJson.extensions["3DTILES_draco_point_compression"])&&(u=l.properties),!(f=n.getExtension("3DTILES_draco_point_compression"))){t.next=15;break}if(c=f.properties,p=f.byteOffset,h=f.byteLength,c&&Number.isFinite(p)&&h){t.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:s=e.featureTableBinary.slice(p,p+h),e.hasPositions=Number.isFinite(c.POSITION),e.hasColors=Number.isFinite(c.RGB)||Number.isFinite(c.RGBA),e.hasNormals=Number.isFinite(c.NORMAL),e.hasBatchIds=Number.isFinite(c.BATCH_ID),e.isTranslucent=Number.isFinite(c.RGBA);case 15:if(s){t.next=17;break}return t.abrupt("return",!0);case 17:return d={buffer:s,properties:Q(Q({},c),u),featureTableProperties:c,batchTableProperties:u,dequantizeInShader:!1},t.next=20,ct(e,d,a,o);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(t,e,n,r){return ut.apply(this,arguments)}function ut(){return(ut=Object(a.a)(i.a.mark((function t(e,n,r,a){var o,s,c,u,l,f,p,h,b,v,g,m,y,_,j;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.parse,delete(s=Q(Q({},r),{},{draco:Q(Q({},r.draco),{},{extraAttributes:n.batchTableProperties||{}})}))["3d-tiles"],t.next=5,o(n.buffer,d.a,s);case 5:if(c=t.sent,u=c.attributes.POSITION&&c.attributes.POSITION.value,l=c.attributes.COLOR_0&&c.attributes.COLOR_0.value,f=c.attributes.NORMAL&&c.attributes.NORMAL.value,p=c.attributes.BATCH_ID&&c.attributes.BATCH_ID.value,h=u&&c.attributes.POSITION.value.quantization,b=f&&c.attributes.NORMAL.value.quantization,h&&(v=c.POSITION.data.quantization,g=v.range,e.quantizedVolumeScale=new O.a(g,g,g),e.quantizedVolumeOffset=new O.a(v.minValues),e.quantizedRange=(1<<v.quantizationBits)-1,e.isQuantizedDraco=!0),b&&(e.octEncodedRange=(1<<c.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0),m={},n.batchTableProperties)for(y=0,_=Object.keys(n.batchTableProperties);y<_.length;y++)j=_[y],c.attributes[j]&&c.attributes[j].value&&(m[j.toLowerCase()]=c.attributes[j].value);e.attributes=Q({positions:u,colors:F(e,l),normals:f,batchIds:p},m);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var lt=n("p/I1"),ft=n("w0jg"),pt=0,ht=1;function dt(t,e,n,r){t.rotateYtoZ=!0;var i=t.byteOffset+t.byteLength-n;if(0===i)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=Object(ft.c)(e,n,i),t.gltfByteOffset=0,t.gltfByteLength=i,n%4==0||console.warn(t.type+": embedded glb is not aligned to a 4-byte boundary."),t.byteOffset+t.byteLength}function bt(t,e,n,r){return vt.apply(this,arguments)}function vt(){return(vt=Object(a.a)(i.a.mark((function t(e,n,r,a){var o,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r["3d-tiles"]||{},gt(e,n,r),!o.loadGLTF){t.next=16;break}if(s=a.parse,c=a.fetch,!e.gltfUrl){t.next=9;break}return t.next=7,c(e.gltfUrl,r);case 7:e.gltfArrayBuffer=t.sent,e.gltfByteOffset=0;case 9:if(!e.gltfArrayBuffer){t.next=16;break}return t.next=12,s(e.gltfArrayBuffer,lt.a,r,a);case 12:e.gltf=t.sent,delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(t,e,n){switch(e){case pt:var r=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),i=(new TextDecoder).decode(r);t.gltfUrl=i.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case ht:break;default:throw new Error("b3dm: Illegal glTF format field")}}function mt(t,e,n,r,i){return yt.apply(this,arguments)}function yt(){return(yt=Object(a.a)(i.a.mark((function t(e,n,r,a,o){var s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Ot(e,n,r,a,o),t.next=3,bt(e,ht,a,o);case 3:return(c=null==e||null===(s=e.gltf)||void 0===s?void 0:s.extensions)&&c.CESIUM_RTC&&(e.rtcCenter=c.CESIUM_RTC.center),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ot(t,e,n,r,i){n=dt(t,e,n=U(t,e,n=B(t,e,n=D(t,e,n))),r);var a=new w(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=a.getGlobalProperty("RTC_CENTER",y.FLOAT,3),n}var _t=n("GA6j"),jt=n("Xjzu"),St=n("Nw31"),wt=n("Ns70");function xt(t,e,n,r,i){return At.apply(this,arguments)}function At(){return(At=Object(a.a)(i.a.mark((function t(e,n,r,a,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Pt(e,n,r,a,o),t.next=3,bt(e,e.gltfFormat,a,o);case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pt(t,e,n,r,i){if(n=D(t,e,n),1!==t.version)throw new Error("Instanced 3D Model version "+t.version+" is not supported");n=B(t,e,n);var a=new DataView(e);if(t.gltfFormat=a.getUint32(n,!0),n=dt(t,e,n=U(t,e,n+=4),r),0===t.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var o=new w(t.featureTableJson,t.featureTableBinary),s=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=o.getGlobalProperty("RTC_CENTER",y.FLOAT,3);new k(t.batchTableJson,t.batchTableBinary,s);return function(t,e,n,r){for(var i=[new Array(r),t._batchTable][0],a=new O.a,o=(new O.a,new O.a,new O.a,new _t.a),s=new jt.a,c=new O.a,u={},l=new St.a,f=[],p=[],h=new O.a,d=new O.a,b=0;b<r;b++){var v=void 0;if(e.hasProperty("POSITION"))v=e.getProperty("POSITION",y.FLOAT,3,b,a);else if(e.hasProperty("POSITION_QUANTIZED")){v=e.getProperty("POSITION_QUANTIZED",y.UNSIGNED_SHORT,3,b,a);var g=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",y.FLOAT,3,h);if(!g)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var m=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",y.FLOAT,3,d);if(!m)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var _=0;_<3;_++)v[_]=v[_]/65535*m[_]+g[_]}if(!v)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");a.copy(v),u.translation=a,t.normalUp=e.getProperty("NORMAL_UP",y.FLOAT,3,b,f),t.normalRight=e.getProperty("NORMAL_RIGHT",y.FLOAT,3,b,p);if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty("NORMAL_UP_OCT32P",y.UNSIGNED_SHORT,2,f),t.octNormalRight=e.getProperty("NORMAL_RIGHT_OCT32P",y.UNSIGNED_SHORT,2,p),t.octNormalUp){if(!t.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}t.eastNorthUp?(wt.a.WGS84.eastNorthUpToFixedFrame(a,l),l.getRotationMatrix3(o)):o.identity()}!1,s.fromMatrix3(o),u.rotation=s,c.set(1,1,1);var j=e.getProperty("SCALE",y.FLOAT,1,b);Number.isFinite(j)&&c.multiplyByScalar(j);var S=e.getProperty("SCALE_NON_UNIFORM",y.FLOAT,3,b,f);S&&c.scale(S),u.scale=c;var w=e.getProperty("BATCH_ID",y.UNSIGNED_SHORT,1,b);void 0===w&&(w=b);var x=(new St.a).fromQuaternion(u.rotation);l.identity(),l.translate(u.translation),l.multiplyRight(x),l.scale(u.scale);var A=l.clone();i[b]={modelMatrix:A,batchId:w}}t.instances=i}(t,o,0,s),n}function Et(t,e,n,r,i,a){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(a.a)(i.a.mark((function t(e,n,r,a,o,s){var c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=D(e,n,r),c=new DataView(n),e.tilesLength=c.getUint32(r,!0),r+=4,e.tiles=[];case 5:if(!(e.tiles.length<e.tilesLength&&e.byteLength-r>12)){t.next=13;break}return u={},e.tiles.push(u),t.next=10,s(n,r,a,o,u);case 10:r=t.sent,t.next=5;break;case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function It(t,e,n,r,i){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(a.a)(i.a.mark((function t(e,n,r,a,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===n&&(n=0),void 0===o&&(o={}),o.byteOffset=n,o.type=p(e,n),t.t0=o.type,t.next=t.t0===u.COMPOSITE?7:t.t0===u.BATCHED_3D_MODEL?10:t.t0===u.INSTANCED_3D_MODEL?13:t.t0===u.POINT_CLOUD?16:19;break;case 7:return t.next=9,Et(o,e,n,r,a,It);case 9:return t.abrupt("return",t.sent);case 10:return t.next=12,mt(o,e,n,r,a);case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,xt(o,e,n,r,a);case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,$(o,e,n,r,a);case 18:return t.abrupt("return",t.sent);case 19:throw new Error("3DTileLoader: unknown type "+o.type);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ct(t,e){if(t.content){var n=t.content.uri||t.content.url;t.contentUrl=e.basePath+"/"+n}return t.id=t.contentUrl,t.lodMetricType=s.a.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=function(t){if(!t.contentUrl)return s.f.EMPTY;var e=t.contentUrl.split(".").pop();switch(e){case"pnts":return s.f.POINTCLOUD;case"i3dm":case"b3dm":return s.f.SCENEGRAPH;default:return e}}(t),t.refine=function(t){switch(t){case"REPLACE":case"replace":return s.e.REPLACE;case"ADD":case"add":return s.e.ADD;default:return t}}(t.refine),t}function Nt(t){var e=t.basePath,n=Ct(t.root,t),r=[];for(r.push(n);r.length>0;)for(var i,a=Rt(r.pop().children||[]);!(i=a()).done;){var o=i.value;Ct(o,{basePath:e}),r.push(o)}return n}var kt={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:c,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:function(t,e,n){return zt.apply(this,arguments)},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function Dt(t){return o.b.dirname(t.url)}function Bt(t,e,n){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(a.a)(i.a.mark((function t(e,n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={content:{featureIds:null}},0,t.next=4,It(e,0,n,r,a.content);case 4:return t.abrupt("return",a.content);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vt(t,e,n){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(a.a)(i.a.mark((function t(e,n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=JSON.parse((new TextDecoder).decode(e))).loader=n.loader||kt,a.url=r.url,a.basePath=Dt(a),a.root=Nt(a),a.type=s.c.TILES3D,a.lodMetricType=s.a.GEOMETRIC_ERROR,a.lodMetricValue=a.root.lodMetricValue,t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zt(){return(zt=Object(a.a)(i.a.mark((function t(e,n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n["3d-tiles"]||{},!("auto"===a.isTileset?r.url&&-1!==r.url.indexOf(".json"):a.isTileset)){t.next=8;break}return t.next=5,Vt(e,n,r);case 5:e=t.sent,t.next=11;break;case 8:return t.next=10,Bt(e,n,r);case 10:e=t.sent;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},rOaP:function(t,e,n){"use strict";function r(t,e){if(void 0===e&&(e=5),"string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return i(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return i(t,0,e)}return""}function i(t,e,n){if(t.byteLength<=e+n)return"";for(var r=new DataView(t),i="",a=0;a<n;a++)i+=String.fromCharCode(r.getUint8(e+a));return i}n.d(e,"a",(function(){return r}))},rp2x:function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return O}));var r,i,a,o=n("ODXe"),s=n("KQm4"),c=n("rePB"),u=n("oJMS"),l=(r={},Object(c.a)(r,3042,!1),Object(c.a)(r,32773,new Float32Array([0,0,0,0])),Object(c.a)(r,32777,32774),Object(c.a)(r,34877,32774),Object(c.a)(r,32969,1),Object(c.a)(r,32968,0),Object(c.a)(r,32971,1),Object(c.a)(r,32970,0),Object(c.a)(r,3106,new Float32Array([0,0,0,0])),Object(c.a)(r,3107,[!0,!0,!0,!0]),Object(c.a)(r,2884,!1),Object(c.a)(r,2885,1029),Object(c.a)(r,2929,!1),Object(c.a)(r,2931,1),Object(c.a)(r,2932,513),Object(c.a)(r,2928,new Float32Array([0,1])),Object(c.a)(r,2930,!0),Object(c.a)(r,3024,!0),Object(c.a)(r,36006,null),Object(c.a)(r,2886,2305),Object(c.a)(r,33170,4352),Object(c.a)(r,2849,1),Object(c.a)(r,32823,!1),Object(c.a)(r,32824,0),Object(c.a)(r,10752,0),Object(c.a)(r,32938,1),Object(c.a)(r,32939,!1),Object(c.a)(r,3089,!1),Object(c.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(c.a)(r,2960,!1),Object(c.a)(r,2961,0),Object(c.a)(r,2968,4294967295),Object(c.a)(r,36005,4294967295),Object(c.a)(r,2962,519),Object(c.a)(r,2967,0),Object(c.a)(r,2963,4294967295),Object(c.a)(r,34816,519),Object(c.a)(r,36003,0),Object(c.a)(r,36004,4294967295),Object(c.a)(r,2964,7680),Object(c.a)(r,2965,7680),Object(c.a)(r,2966,7680),Object(c.a)(r,34817,7680),Object(c.a)(r,34818,7680),Object(c.a)(r,34819,7680),Object(c.a)(r,2978,[0,0,1024,1024]),Object(c.a)(r,3333,4),Object(c.a)(r,3317,4),Object(c.a)(r,37440,!1),Object(c.a)(r,37441,!1),Object(c.a)(r,37443,37444),Object(c.a)(r,35723,4352),Object(c.a)(r,36010,null),Object(c.a)(r,35977,!1),Object(c.a)(r,3330,0),Object(c.a)(r,3332,0),Object(c.a)(r,3331,0),Object(c.a)(r,3314,0),Object(c.a)(r,32878,0),Object(c.a)(r,3316,0),Object(c.a)(r,3315,0),Object(c.a)(r,32877,0),r),f=function(t,e,n){return e?t.enable(n):t.disable(n)},p=function(t,e,n){return t.hint(n,e)},h=function(t,e,n){return t.pixelStorei(n,e)};function d(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var b=(i={},Object(c.a)(i,3042,f),Object(c.a)(i,32773,(function(t,e){return t.blendColor.apply(t,Object(s.a)(e))})),Object(c.a)(i,32777,"blendEquation"),Object(c.a)(i,34877,"blendEquation"),Object(c.a)(i,32969,"blendFunc"),Object(c.a)(i,32968,"blendFunc"),Object(c.a)(i,32971,"blendFunc"),Object(c.a)(i,32970,"blendFunc"),Object(c.a)(i,3106,(function(t,e){return t.clearColor.apply(t,Object(s.a)(e))})),Object(c.a)(i,3107,(function(t,e){return t.colorMask.apply(t,Object(s.a)(e))})),Object(c.a)(i,2884,f),Object(c.a)(i,2885,(function(t,e){return t.cullFace(e)})),Object(c.a)(i,2929,f),Object(c.a)(i,2931,(function(t,e){return t.clearDepth(e)})),Object(c.a)(i,2932,(function(t,e){return t.depthFunc(e)})),Object(c.a)(i,2928,(function(t,e){return t.depthRange.apply(t,Object(s.a)(e))})),Object(c.a)(i,2930,(function(t,e){return t.depthMask(e)})),Object(c.a)(i,3024,f),Object(c.a)(i,35723,p),Object(c.a)(i,36006,(function(t,e){var n=Object(u.b)(t)?36009:36160;return t.bindFramebuffer(n,e)})),Object(c.a)(i,2886,(function(t,e){return t.frontFace(e)})),Object(c.a)(i,33170,p),Object(c.a)(i,2849,(function(t,e){return t.lineWidth(e)})),Object(c.a)(i,32823,f),Object(c.a)(i,32824,"polygonOffset"),Object(c.a)(i,10752,"polygonOffset"),Object(c.a)(i,35977,f),Object(c.a)(i,32938,"sampleCoverage"),Object(c.a)(i,32939,"sampleCoverage"),Object(c.a)(i,3089,f),Object(c.a)(i,3088,(function(t,e){return t.scissor.apply(t,Object(s.a)(e))})),Object(c.a)(i,2960,f),Object(c.a)(i,2961,(function(t,e){return t.clearStencil(e)})),Object(c.a)(i,2968,(function(t,e){return t.stencilMaskSeparate(1028,e)})),Object(c.a)(i,36005,(function(t,e){return t.stencilMaskSeparate(1029,e)})),Object(c.a)(i,2962,"stencilFuncFront"),Object(c.a)(i,2967,"stencilFuncFront"),Object(c.a)(i,2963,"stencilFuncFront"),Object(c.a)(i,34816,"stencilFuncBack"),Object(c.a)(i,36003,"stencilFuncBack"),Object(c.a)(i,36004,"stencilFuncBack"),Object(c.a)(i,2964,"stencilOpFront"),Object(c.a)(i,2965,"stencilOpFront"),Object(c.a)(i,2966,"stencilOpFront"),Object(c.a)(i,34817,"stencilOpBack"),Object(c.a)(i,34818,"stencilOpBack"),Object(c.a)(i,34819,"stencilOpBack"),Object(c.a)(i,2978,(function(t,e){return t.viewport.apply(t,Object(s.a)(e))})),Object(c.a)(i,3333,h),Object(c.a)(i,3317,h),Object(c.a)(i,37440,h),Object(c.a)(i,37441,h),Object(c.a)(i,37443,h),Object(c.a)(i,3330,h),Object(c.a)(i,3332,h),Object(c.a)(i,3331,h),Object(c.a)(i,36010,(function(t,e){return t.bindFramebuffer(36008,e)})),Object(c.a)(i,3314,h),Object(c.a)(i,32878,h),Object(c.a)(i,3316,h),Object(c.a)(i,3315,h),Object(c.a)(i,32877,h),Object(c.a)(i,"framebuffer",(function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)})),Object(c.a)(i,"blend",(function(t,e){return e?t.enable(3042):t.disable(3042)})),Object(c.a)(i,"blendColor",(function(t,e){return t.blendColor.apply(t,Object(s.a)(e))})),Object(c.a)(i,"blendEquation",(function(t,e){e=d(e)?e:[e,e],t.blendEquationSeparate.apply(t,Object(s.a)(e))})),Object(c.a)(i,"blendFunc",(function(t,e){e=d(e)&&2===e.length?[].concat(Object(s.a)(e),Object(s.a)(e)):e,t.blendFuncSeparate.apply(t,Object(s.a)(e))})),Object(c.a)(i,"clearColor",(function(t,e){return t.clearColor.apply(t,Object(s.a)(e))})),Object(c.a)(i,"clearDepth",(function(t,e){return t.clearDepth(e)})),Object(c.a)(i,"clearStencil",(function(t,e){return t.clearStencil(e)})),Object(c.a)(i,"colorMask",(function(t,e){return t.colorMask.apply(t,Object(s.a)(e))})),Object(c.a)(i,"cull",(function(t,e){return e?t.enable(2884):t.disable(2884)})),Object(c.a)(i,"cullFace",(function(t,e){return t.cullFace(e)})),Object(c.a)(i,"depthTest",(function(t,e){return e?t.enable(2929):t.disable(2929)})),Object(c.a)(i,"depthFunc",(function(t,e){return t.depthFunc(e)})),Object(c.a)(i,"depthMask",(function(t,e){return t.depthMask(e)})),Object(c.a)(i,"depthRange",(function(t,e){return t.depthRange.apply(t,Object(s.a)(e))})),Object(c.a)(i,"dither",(function(t,e){return e?t.enable(3024):t.disable(3024)})),Object(c.a)(i,"derivativeHint",(function(t,e){t.hint(35723,e)})),Object(c.a)(i,"frontFace",(function(t,e){return t.frontFace(e)})),Object(c.a)(i,"mipmapHint",(function(t,e){return t.hint(33170,e)})),Object(c.a)(i,"lineWidth",(function(t,e){return t.lineWidth(e)})),Object(c.a)(i,"polygonOffsetFill",(function(t,e){return e?t.enable(32823):t.disable(32823)})),Object(c.a)(i,"polygonOffset",(function(t,e){return t.polygonOffset.apply(t,Object(s.a)(e))})),Object(c.a)(i,"sampleCoverage",(function(t,e){return t.sampleCoverage.apply(t,Object(s.a)(e))})),Object(c.a)(i,"scissorTest",(function(t,e){return e?t.enable(3089):t.disable(3089)})),Object(c.a)(i,"scissor",(function(t,e){return t.scissor.apply(t,Object(s.a)(e))})),Object(c.a)(i,"stencilTest",(function(t,e){return e?t.enable(2960):t.disable(2960)})),Object(c.a)(i,"stencilMask",(function(t,e){var n=e=d(e)?e:[e,e],r=Object(o.a)(n,2),i=r[0],a=r[1];t.stencilMaskSeparate(1028,i),t.stencilMaskSeparate(1029,a)})),Object(c.a)(i,"stencilFunc",(function(t,e){var n=e=d(e)&&3===e.length?[].concat(Object(s.a)(e),Object(s.a)(e)):e,r=Object(o.a)(n,6),i=r[0],a=r[1],c=r[2],u=r[3],l=r[4],f=r[5];t.stencilFuncSeparate(1028,i,a,c),t.stencilFuncSeparate(1029,u,l,f)})),Object(c.a)(i,"stencilOp",(function(t,e){var n=e=d(e)&&3===e.length?[].concat(Object(s.a)(e),Object(s.a)(e)):e,r=Object(o.a)(n,6),i=r[0],a=r[1],c=r[2],u=r[3],l=r[4],f=r[5];t.stencilOpSeparate(1028,i,a,c),t.stencilOpSeparate(1029,u,l,f)})),Object(c.a)(i,"viewport",(function(t,e){return t.viewport.apply(t,Object(s.a)(e))})),i);function v(t,e,n){return void 0!==e[t]?e[t]:n[t]}var g={blendEquation:function(t,e,n){return t.blendEquationSeparate(v(32777,e,n),v(34877,e,n))},blendFunc:function(t,e,n){return t.blendFuncSeparate(v(32969,e,n),v(32968,e,n),v(32971,e,n),v(32970,e,n))},polygonOffset:function(t,e,n){return t.polygonOffset(v(32824,e,n),v(10752,e,n))},sampleCoverage:function(t,e,n){return t.sampleCoverage(v(32938,e,n),v(32939,e,n))},stencilFuncFront:function(t,e,n){return t.stencilFuncSeparate(1028,v(2962,e,n),v(2967,e,n),v(2963,e,n))},stencilFuncBack:function(t,e,n){return t.stencilFuncSeparate(1029,v(34816,e,n),v(36003,e,n),v(36004,e,n))},stencilOpFront:function(t,e,n){return t.stencilOpSeparate(1028,v(2964,e,n),v(2965,e,n),v(2966,e,n))},stencilOpBack:function(t,e,n){return t.stencilOpSeparate(1029,v(34817,e,n),v(34818,e,n),v(34819,e,n))}},m={enable:function(t,e){return t(Object(c.a)({},e,!0))},disable:function(t,e){return t(Object(c.a)({},e,!1))},pixelStorei:function(t,e,n){return t(Object(c.a)({},e,n))},hint:function(t,e,n){return t(Object(c.a)({},e,n))},bindFramebuffer:function(t,e,n){var r;switch(e){case 36160:return t((r={},Object(c.a)(r,36006,n),Object(c.a)(r,36010,n),r));case 36009:return t(Object(c.a)({},36006,n));case 36008:return t(Object(c.a)({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t(Object(c.a)({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},Object(c.a)(n,32777,e),Object(c.a)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},Object(c.a)(r,32777,e),Object(c.a)(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},Object(c.a)(r,32969,e),Object(c.a)(r,32968,n),Object(c.a)(r,32971,e),Object(c.a)(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(c.a)(a,32969,e),Object(c.a)(a,32968,n),Object(c.a)(a,32971,r),Object(c.a)(a,32970,i),a))},clearColor:function(t,e,n,r,i){return t(Object(c.a)({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t(Object(c.a)({},2931,e))},clearStencil:function(t,e){return t(Object(c.a)({},2961,e))},colorMask:function(t,e,n,r,i){return t(Object(c.a)({},3107,[e,n,r,i]))},cullFace:function(t,e){return t(Object(c.a)({},2885,e))},depthFunc:function(t,e){return t(Object(c.a)({},2932,e))},depthRange:function(t,e,n){return t(Object(c.a)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(Object(c.a)({},2930,e))},frontFace:function(t,e){return t(Object(c.a)({},2886,e))},lineWidth:function(t,e){return t(Object(c.a)({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},Object(c.a)(r,32824,e),Object(c.a)(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},Object(c.a)(r,32938,e),Object(c.a)(r,32939,n),r))},scissor:function(t,e,n,r,i){return t(Object(c.a)({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},Object(c.a)(n,2968,e),Object(c.a)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(Object(c.a)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},Object(c.a)(i,2962,e),Object(c.a)(i,2967,n),Object(c.a)(i,2963,r),Object(c.a)(i,34816,e),Object(c.a)(i,36003,n),Object(c.a)(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(c.a)(a,1028===e?2962:34816,n),Object(c.a)(a,1028===e?2967:36003,r),Object(c.a)(a,1028===e?2963:36004,i),a))},stencilOp:function(t,e,n,r){var i;return t((i={},Object(c.a)(i,2964,e),Object(c.a)(i,2965,n),Object(c.a)(i,2966,r),Object(c.a)(i,34817,e),Object(c.a)(i,34818,n),Object(c.a)(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var a;return t((a={},Object(c.a)(a,1028===e?2964:34817,n),Object(c.a)(a,1028===e?2965:34818,r),Object(c.a)(a,1028===e?2966:34819,i),a))},viewport:function(t,e,n,r,i){return t(Object(c.a)({},2978,[e,n,r,i]))}},y=function(t,e){return t.isEnabled(e)},O=(a={},Object(c.a)(a,3042,y),Object(c.a)(a,2884,y),Object(c.a)(a,2929,y),Object(c.a)(a,3024,y),Object(c.a)(a,32823,y),Object(c.a)(a,32926,y),Object(c.a)(a,32928,y),Object(c.a)(a,3089,y),Object(c.a)(a,2960,y),Object(c.a)(a,35977,y),a)},zLVn:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))}}]);