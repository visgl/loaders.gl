"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[140],{35250:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var a=n(74848),s=n(28453);const t={},i="Binary Data",o={id:"developer-guide/concepts/binary-data",title:"Binary Data",description:"The loaders.gl API consistently uses ArrayBuffers to represent and transport binary data.",source:"@site/../docs/developer-guide/concepts/binary-data.md",sourceDirName:"developer-guide/concepts",slug:"/developer-guide/concepts/binary-data",permalink:"/docs/developer-guide/concepts/binary-data",draft:!1,unlisted:!1,editUrl:"https://github.com/visgl/loaders.gl/tree/master/website/../docs/developer-guide/concepts/binary-data.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Preferred JavaScript APIs",permalink:"/docs/developer-guide/concepts/javascript-apis"},next:{title:"Streaming",permalink:"/docs/developer-guide/concepts/streaming"}},d={},c=[{value:"Why ArrayBuffers?",id:"why-arraybuffers",level:2},{value:"ArrayBuffers and Typed Arrays",id:"arraybuffers-and-typed-arrays",level:2},{value:"Converting between ArrayBuffers and Strings",id:"converting-between-arraybuffers-and-strings",level:2},{value:"Binary Types in JavaScript",id:"binary-types-in-javascript",level:2},{value:"Converting between ArrayBuffers and other Binary Formats.",id:"converting-between-arraybuffers-and-other-binary-formats",level:2}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h1,{id:"binary-data",children:"Binary Data"}),"\n",(0,a.jsxs)(r.p,{children:["The loaders.gl API consistently uses ",(0,a.jsx)(r.code,{children:"ArrayBuffer"}),"s to represent and transport binary data."]}),"\n",(0,a.jsx)(r.h2,{id:"why-arraybuffers",children:"Why ArrayBuffers?"}),"\n",(0,a.jsx)(r.p,{children:"One of the design goals of loaders.gl is to provide applications with a single, consistent API that works across (reasonably modern) browsers, worker threads and Node.js. One of the characteristics of this API is how binary data is represented."}),"\n",(0,a.jsx)(r.p,{children:'loaders.gl "standardizes" on ArrayBuffers for a number of reasons:'}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:'ArrayBuffers are the "canonical" input format for the WebGL API, allowing efficient uploads of large binary data sets to the GPU.'}),"\n",(0,a.jsx)(r.li,{children:"ArrayBuffers allow ownership to be transferred between threads (Browser Main Thread and WebWorkers), massively improving performance when sending data back from loaders running on web worker to the application/main thread."}),"\n",(0,a.jsx)(r.li,{children:"ArrayBuffers are used to transport raw data in most newer JavaScript APIs, including WebSockets, Web Intents, XMLHttpRequest version 2 etc."}),"\n",(0,a.jsxs)(r.li,{children:["ArrayBuffers are well supported by recent Node.js versions, in fact the traditional Node.js ",(0,a.jsx)(r.code,{children:"Buffer"})," class is now backed by an ",(0,a.jsx)(r.code,{children:"ArrayBuffer"}),"."]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"arraybuffers-and-typed-arrays",children:"ArrayBuffers and Typed Arrays"}),"\n",(0,a.jsxs)(r.p,{children:["Recall that typed arrays (e.g. ",(0,a.jsx)(r.code,{children:"Float32Array"}),") are just views into array buffers. Every typed array has a ",(0,a.jsx)(r.code,{children:"buffer"})," reference."]}),"\n",(0,a.jsx)(r.p,{children:"Many loaders.gl functions directly accept typed arrays, which essentially means they accept the associated ArrayBuffer. However, be aware that typed arrays can represent partial views (i.e. they can have offsets) that sometimes need special handling in the application."}),"\n",(0,a.jsx)(r.h2,{id:"converting-between-arraybuffers-and-strings",children:"Converting between ArrayBuffers and Strings"}),"\n",(0,a.jsxs)(r.p,{children:["We use the ",(0,a.jsx)(r.code,{children:"TextEncoder"})," and ",(0,a.jsx)(r.code,{children:"TextDecoder"})," classes in the JavaScript ",(0,a.jsx)(r.a,{href:"https://github.com/inexorabletash/text-encoding",children:"string encoding/decoding library"}),"."]}),"\n",(0,a.jsx)(r.p,{children:"Since these classes are central to using ArrayBuffers correctly, loaders.gl provides polyfills for them under Node.js."}),"\n",(0,a.jsx)(r.h2,{id:"binary-types-in-javascript",children:"Binary Types in JavaScript"}),"\n",(0,a.jsx)(r.p,{children:"Binary data types in JS:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"ArrayBuffer"})}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"Uint8Array"})," and other typed arrays, plus"]}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"DataView"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"Blob"})}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"Buffer"})," nodejs"]}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:'Examples of "semi-binary" data types in JS:'}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"Array"}),": Array of bytes (elements are numbers between 0 and 255)."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"String"})," (binary): string in \u201cbinary\u201d form, 1 byte per char (2 bytes)."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"String"})," (base64): string containing the binary data encoded in a base64 form."]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"converting-between-arraybuffers-and-other-binary-formats",children:"Converting between ArrayBuffers and other Binary Formats."}),"\n",(0,a.jsxs)(r.p,{children:["Standardizing on ArrayBuffers helps streamline the loaders.gl API. But occasionally applications need to interface with APIs that accept other binary data types/formats. To support this case, loaders.gl provides a small set of utilities (non-exhaustive) for converting from and to other binary JavaScript types/formats, e.g. ",(0,a.jsx)(r.code,{children:"toArrayBuffer"}),":"]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>o});var a=n(96540);const s={},t=a.createContext(s);function i(e){const r=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:r},e.children)}}}]);