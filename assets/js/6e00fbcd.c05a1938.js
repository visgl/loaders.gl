"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[5441],{59153:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>c});var s=i(74848),o=i(28453);const r={},d="Managing Dependencies",t={id:"developer-guide/dependencies",title:"Managing Dependencies",description:"This section is work in progress, not all options are implemented/finalized",source:"@site/../docs/developer-guide/dependencies.md",sourceDirName:"developer-guide",slug:"/developer-guide/dependencies",permalink:"/docs/developer-guide/dependencies",draft:!1,unlisted:!1,editUrl:"https://github.com/visgl/loaders.gl/tree/master/website/../docs/developer-guide/dependencies.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Node.js support",permalink:"/docs/developer-guide/node"},next:{title:"Creating New Loaders and Writers",permalink:"/docs/developer-guide/creating-loaders-and-writers"}},l={},c=[{value:"Loading Dependencies from Alternate CDN",id:"loading-dependencies-from-alternate-cdn",level:3},{value:"Loading Dependencies from Your Own Server",id:"loading-dependencies-from-your-own-server",level:3},{value:"Bundling Dependencies",id:"bundling-dependencies",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"managing-dependencies",children:"Managing Dependencies"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"This section is work in progress, not all options are implemented/finalized"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Parsers and encoders for some formats are quite complex and can be quite big in terms of code size."}),"\n",(0,s.jsx)(n.h3,{id:"loading-dependencies-from-alternate-cdn",children:"Loading Dependencies from Alternate CDN"}),"\n",(0,s.jsxs)(n.p,{children:["By default, loaders.gl loads pre-built workers and a number of bigger external libraries from the ",(0,s.jsx)(n.a,{href:"https://unpkg.com/",children:"https://unpkg.com/"})," CDN."]}),"\n",(0,s.jsxs)(n.p,{children:["It is possible to specify other CDNs using ",(0,s.jsx)(n.code,{children:"options.cdn"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Keep in mind that it is typically not sufficient to point to a server that just serves the data of the files in question. Browsers do a number of security checks on cross-origin content and requires certain response headers to be properly set, and unfortunately, error messages are not always helpful."}),"\n",(0,s.jsxs)(n.p,{children:["To determine your candidate CDN service is doing what is needed, check with ",(0,s.jsx)(n.code,{children:"curl -u <url>"})," and look for headers like:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"content-type: application/javascript; charset=utf-8\naccess-control-allow-origin: *\n"})}),"\n",(0,s.jsx)(n.h3,{id:"loading-dependencies-from-your-own-server",children:"Loading Dependencies from Your Own Server"}),"\n",(0,s.jsxs)(n.p,{children:["By setting ",(0,s.jsx)(n.code,{children:"options.cdn: false"})," and doing some extra setup, you can load dependencies from your own server. This removes the impact of a potentially flaky CDN."]}),"\n",(0,s.jsx)(n.p,{children:"Options:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Load from ",(0,s.jsx)(n.code,{children:"node_modules/@loaders.gl/<module>/dist/libs/..."})]}),"\n",(0,s.jsxs)(n.li,{children:["Load from a modules directory ",(0,s.jsx)(n.code,{children:"libs/..."})]}),"\n",(0,s.jsxs)(n.li,{children:["Load from unique locations - ",(0,s.jsx)(n.code,{children:"options.modules[<dependency name>]"})," can be set to url strings."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"bundling-dependencies",children:"Bundling Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"It is also possible to include dependencies in your application bundle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"PRO: Doesn't require copying/configuring/serving supporting modules."}),"\n",(0,s.jsx)(n.li,{children:"CON: Increases the size of your application bundle"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"options.modules"})," will let your application ",(0,s.jsx)(n.code,{children:"import"})," or ",(0,s.jsx)(n.code,{children:"require"})," dependencies (thus bundling them) and supply them to loaders.gl."]}),"\n",(0,s.jsx)(n.p,{children:"See each loader module for information on its dependencies."}),"\n",(0,s.jsxs)(n.p,{children:["Example: bundling the entire ",(0,s.jsx)(n.code,{children:"draco3d"})," library:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import draco from 'draco3d';\nimport {setLoaderOptions} from '@loaders.gl/core';\nsetLoaderOptions({\n  modules: {\n    draco3d\n  }\n});\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>t});var s=i(96540);const o={},r=s.createContext(o);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);