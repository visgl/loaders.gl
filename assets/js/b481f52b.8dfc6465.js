"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[3455],{50897:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=r(62540),i=r(43023);const s={},l="TableTileSource",o={id:"modules/mvt/api-reference/table-tile-source",title:"TableTileSource",description:"The TableTileSource slices large GeoJSON datasets into small vector tiles on the fly.",source:"@site/../docs/modules/mvt/api-reference/table-tile-source.md",sourceDirName:"modules/mvt/api-reference",slug:"/modules/mvt/api-reference/table-tile-source",permalink:"/docs/modules/mvt/api-reference/table-tile-source",draft:!1,unlisted:!1,editUrl:"https://github.com/visgl/loaders.gl/tree/master/website/../docs/modules/mvt/api-reference/table-tile-source.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"MVTSource",permalink:"/docs/modules/mvt/api-reference/mvt-source"},next:{title:"CSWService \ud83d\udea7",permalink:"/docs/modules/wms/api-reference/csw-source"}},d={},c=[{value:"Install",id:"install",level:3},{value:"Usage",id:"usage",level:3},{value:"Output Format",id:"output-format",level:2},{value:"Options",id:"options",level:2},{value:"Methods",id:"methods",level:2},{value:"constructor",id:"constructor",level:3},{value:"Attribution",id:"attribution",level:2}];function a(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"tabletilesource",children:"TableTileSource"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"TableTileSource"})," slices large GeoJSON datasets into small vector tiles on the fly.\nCan enable rendering and interacting with large geospatial datasets\nin the browser without requiring data to be pre-tiled and tiles to be served from a server."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Source"}),(0,n.jsx)(t.th,{children:"Characteristic"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"File Extension"}),(0,n.jsx)(t.td,{children:"N/A - Any table with geometries"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"File Type"}),(0,n.jsx)(t.td,{children:"Binary Archive"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"File Format"}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"/docs/modules/mvt/formats/mvt",children:"Mapbox Vector Tiles"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Data Format"}),(0,n.jsx)(t.td,{children:"GeoJSON"})]})]})]}),"\n",(0,n.jsx)(t.p,{children:"Features:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Visualize bigger datasets"}),' - Useful for datasets in the "mid-size" range (perhaps from 100MB-1GB), where the dataset is "small" enough to be fully loaded into the browser,\nbut is big enough that rendering the entire dataset every frame is too slow.']}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsxs)(t.strong,{children:[(0,n.jsx)(t.code,{children:"MVTLoader"})," compatibility*"]})," - The resulting tiles conform to the output of the ",(0,n.jsx)(t.a,{href:"./mvt-loader",children:(0,n.jsx)(t.code,{children:"MVTLoader"})}),"\n(which loads pre-tiled tiles into GeoJSON format)."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Geometry simplification"})," - The geometry content in the generated tiles\nis cut out from the larger input GeoJSON, and optimized further to only\nretain the minimum level of detail appropriate for each zoom level\n(shapes are simplified and tiny polygons and line segments are filtered out)."]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"install",children:"Install"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"npm install @loaders.gl/mvt\n"})}),"\n",(0,n.jsx)(t.p,{children:"Or just import via a browser script tag:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-html",children:'<script src="https://unpkg.com/@loaders.gl/mvt/dist/dist.min.js"><\/script>\n'})}),"\n",(0,n.jsx)(t.h3,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import {createDataSource} from '@loaders.gl/core';\nimport {TableTileSource} from '@loaders.gl/mvt';\nimport {GeoJSONLoader} from '@loaders.gl/json';\n\n// build an initial index of tiles.,\nconst tileSource = createDataSource(url, [TableTileSource], {\n\tcore: {\n\t\tloaders: [GeoJSONLoader]\n\t}\n};\n\n// request a particular tile\nconst features = tileSource.getTile(z, x, y).features;\n"})}),"\n",(0,n.jsx)(t.h2,{id:"output-format",children:"Output Format"}),"\n",(0,n.jsx)(t.p,{children:"The tiles are in geojson table format."}),"\n",(0,n.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,n.jsx)(t.p,{children:"You can fine-tune the results with an options object,\nalthough the defaults are sensible and work well for most use cases."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Option"}),(0,n.jsx)(t.th,{children:"Default"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.coordinates"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"'wgs84'"})}),(0,n.jsxs)(t.td,{children:["Set to",(0,n.jsx)(t.code,{children:"'local'"})," to return tile-relative coordinates [",(0,n.jsx)(t.code,{children:"0-1"}),"]."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.maxZoom"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"14"})}),(0,n.jsx)(t.td,{children:"Max zoom to preserve detail on; can't be higher than 24"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.generateId"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"false"})}),(0,n.jsx)(t.td,{children:"Whether to generate feature ids."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.promoteId"})}),(0,n.jsx)(t.td,{children:"N/A"}),(0,n.jsx)(t.td,{children:"Name of a feature property to use for feature.id."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.tolerance"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"3"})}),(0,n.jsx)(t.td,{children:"Simplification tolerance (higher means simpler)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.indexMaxZoom"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"5"})}),(0,n.jsx)(t.td,{children:"Max zoom in the initial tile index"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.indexMaxPoints"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"100000"})}),(0,n.jsx)(t.td,{children:"Max number of points per tile in the index"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.debug"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"0"})}),(0,n.jsx)(t.td,{children:"Logging level (0 to disable, 1 or 2)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.lineMetrics"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"false"})}),(0,n.jsx)(t.td,{children:"Enable line metrics tracking for LineString/MultiLineString features"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.extent"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"4096"})}),(0,n.jsx)(t.td,{children:"tile extent (both width and height)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"table.buffer"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"64"})}),(0,n.jsx)(t.td,{children:"Tile buffer on each side"})]})]})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"import {createDataSource} from '@loaders.gl/core';\nimport {TableTileSource} from '@loaders.gl/mvt`\nconst tileSource = createDataSource(parsedGeojson, [TableTileSource], {\n\tmaxZoom: 14,      // max zoom to preserve detail on; can't be higher than 24\n\ttolerance: 3,     // simplification tolerance (higher means simpler)\n\tdebug: 0,     // logging level (0 to disable, 1 or 2)\n\tlineMetrics: false, // whether to enable line metrics tracking for LineString/MultiLineString features\n\tpromoteId: null,    // name of a feature property to promote to feature.id. Cannot be used with `generateId`\n\tgenerateId: false,  // whether to generate feature ids. Cannot be used with `promoteId`\n\tindexMaxZoom: 5,  // max zoom in the initial tile index\n\tindexMaxPoints: 100000, // max number of points per tile in the index\n\textent: 4096,     // tile extent (both width and height)\n\tbuffer: 64,   // tile buffer on each side\n});\n"})}),"\n",(0,n.jsx)(t.p,{children:"Remarks:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"generateId"})," and ",(0,n.jsx)(t.code,{children:"promoteId"})," options cannot both be specified at the same time."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"generateId"})," and ",(0,n.jsx)(t.code,{children:"promoteId"})," options ignore existing ",(0,n.jsx)(t.code,{children:"id"})," values on the feature objects."]}),"\n",(0,n.jsxs)(t.li,{children:["By default, tiles at zoom levels above ",(0,n.jsx)(t.code,{children:"indexMaxZoom"})," are generated on the fly, but you can pre-generate all possible tiles for ",(0,n.jsx)(t.code,{children:"data"})," by setting ",(0,n.jsx)(t.code,{children:"indexMaxZoom"})," and ",(0,n.jsx)(t.code,{children:"maxZoom"})," to the same value, setting ",(0,n.jsx)(t.code,{children:"indexMaxPoints"})," to ",(0,n.jsx)(t.code,{children:"0"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"TableTileSource"})," only generates tiles zoom levels up to 24."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"methods",children:"Methods"}),"\n",(0,n.jsx)(t.h3,{id:"constructor",children:"constructor"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ts",children:"new TableTileSource(geojson: GeoJSONTable | Promise<GeoJSONTable>);\n"})}),"\n",(0,n.jsx)(t.h2,{id:"attribution",children:"Attribution"}),"\n",(0,n.jsxs)(t.p,{children:["Includes a fork of Mapbox / Vladimir Agafonkin's ",(0,n.jsx)(t.a,{href:"https://github.com/mapbox/geojson-vt",children:"geojson-vt"})," module which is under ISC License."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},43023:(e,t,r)=>{r.d(t,{R:()=>l,x:()=>o});var n=r(63696);const i={},s=n.createContext(i);function l(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);