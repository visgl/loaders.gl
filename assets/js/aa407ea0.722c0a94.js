"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[3798],{88480:(e,t,r)=>{r.d(t,{Gv:()=>s,H1:()=>d,Pe:()=>f,Sv:()=>u,Td:()=>c,aC:()=>a,qf:()=>l,xZ:()=>i});const n=e=>"boolean"==typeof e,o=e=>"function"==typeof e,s=e=>null!==e&&"object"==typeof e,a=e=>s(e)&&e.constructor==={}.constructor,i=e=>Boolean(e)&&"function"==typeof e[Symbol.iterator],c=e=>e&&"function"==typeof e[Symbol.asyncIterator],u=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,l=e=>"undefined"!=typeof Blob&&e instanceof Blob,f=e=>e&&"object"==typeof e&&e.isBuffer,d=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||s(e)&&o(e.tee)&&o(e.cancel)&&o(e.getReader))(e)||(e=>s(e)&&o(e.read)&&o(e.pipe)&&n(e.readable))(e)},38313:(e,t,r)=>{function n(e,t,r){const n=r?.core?.type||r.type||"auto",o="auto"===n?function(e,t){for(const r of t)if(r.testURL&&r.testURL(e))return r;return null}(e,t):function(e,t){for(const r of t)if(r.type===e)return r;return null}(n,t);if(!o)throw new Error("Not a valid source type");return o.createDataSource(e,r)}r.d(t,{O:()=>n})},85930:(e,t,r)=>{r.d(t,{H:()=>i});var n=r(88480),o=r(22858),s=r(92263),a=r(69681);async function i(e,t,r,i){let c,u;Array.isArray(t)||(0,o.l)(t)?(c=t,u=r):(c=[],u=t);const l=(0,s.z)(u);let f=e;return"string"==typeof e&&(f=await l(e)),(0,n.qf)(e)&&(f=await l(e)),Array.isArray(c),await(0,a.q)(f,c,u)}},69681:(e,t,r)=>{r.d(t,{q:()=>z});var n=r(97354),o=r(99222);class s{terminate(){}}var a=r(46410);const i=new Map;function c(e){(0,a.v)(e.source&&!e.url||!e.source&&e.url);let t=i.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return u((t=e,`try {\n  importScripts('${t}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var t}(e.url),i.set(e.url,t)),e.source&&(t=u(e.source),i.set(e.source,t))),(0,a.v)(t),t}function u(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function l(e,t,r){void 0===t&&(t=!0);const n=r||new Set;if(e){if(f(e))n.add(e);else if(f(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const o in e)l(e[o],t,n)}else;return void 0===r?Array.from(n):[]}function f(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}var d=r(80247);const p=()=>{};class m{terminated=!1;_loadableURL="";static isSupported(){return"undefined"!=typeof Worker&&o.Bd||void 0!==s&&!o.Bd}constructor(e){const{name:t,source:r,url:n}=e;(0,a.v)(r||n),this.name=t,this.source=r,this.url=n,this.onMessage=p,this.onError=e=>d.log(e),this.worker=o.Bd?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=p,this.onError=p,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||l(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name} from ${this.url}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=c({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>d.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new s(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new s(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class h{isRunning=!0;_resolve=()=>{};_reject=()=>{};constructor(e,t){this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){(0,a.v)(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){(0,a.v)(this.isRunning),this.isRunning=!1,this._reject(e)}}var y=r(80247);class g{name="unnamed";maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return m.isSupported()}constructor(e){this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t,r){void 0===t&&(t=(e,t,r)=>e.done(r)),void 0===r&&(r=(e,t)=>e.error(t));const n=new Promise((n=>(this.jobQueue.push({name:e,onMessage:t,onError:r,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new h(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}catch(r){y.error(`Worker exception: ${r}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!o.Bd||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new m({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return o.Fr?this.maxMobileConcurrency:this.maxConcurrency}}const w={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class b{workerPools=(()=>new Map)();static isSupported(){return m.isSupported()}static getWorkerFarm(e){return void 0===e&&(e={}),b._workerFarm=b._workerFarm||new b({}),b._workerFarm.setProps(e),b._workerFarm}constructor(e){this.props={...w},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:r,url:n}=e;let o=this.workerPools.get(t);return o||(o=new g({name:t,source:r,url:n}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}var v=r(11654);var x=r(80247);async function S(e,t,r,n,s){const i=e.id,c=function(e,t){void 0===t&&(t={});const r=t[e.id]||{},n=o.Bd?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let s=r.workerUrl;if(s||"compression"!==e.id||(s=t.workerUrl),"test"===t._workerType&&(s=o.Bd?`modules/${e.module}/dist/${n}`:`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!s){let t=e.version;"latest"===t&&(t=v.x);const r=t?`@${t}`:"";s=`https://unpkg.com/@loaders.gl/${e.module}${r}/dist/${n}`}return(0,a.v)(s),s}(e,r),u=b.getWorkerFarm(r).getWorkerPool({name:i,url:c});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const l=await u.startJob("process-on-worker",_.bind(null,s));l.postMessage("process",{input:t,options:r,context:n});const f=await l.result;return await f.result}async function _(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:s,input:a,options:i}=n;try{const r=await e(a,i);t.postMessage("done",{id:s,result:r})}catch(o){const e=o instanceof Error?o.message:"unknown error";t.postMessage("error",{id:s,error:e})}break;default:x.warn(`parse-with-worker unknown message ${r}`)}}var k=r(9894);var A=r(22858),T=r(88480),M=r(91400),E=r(8001);const B=262144;const R=262144;const L=1048576;var C=r(26951),$=r(53024);function O(e,t){return C.Bd?async function*(e,t){const r=e.getReader();let n;try{for(;;){const e=n||r.read();t?._streamReadAhead&&(n=r.read());const{done:o,value:s}=await e;if(o)return;yield(0,$.XA)(s)}}catch(o){r.releaseLock()}}(e,t):async function*(e){for await(const t of e)yield(0,$.XA)(t)}(e)}function N(e,t){if("string"==typeof e)return function*(e,t){const r=t?.chunkSize||B;let n=0;const o=new TextEncoder;for(;n<e.length;){const t=Math.min(e.length-n,r),s=e.slice(n,n+t);n+=t,yield o.encode(s)}}(e,t);if(e instanceof ArrayBuffer)return function(e,t){return void 0===t&&(t={}),function*(){const{chunkSize:r=R}=t;let n=0;for(;n<e.byteLength;){const t=Math.min(e.byteLength-n,r),o=new ArrayBuffer(t),s=new Uint8Array(e,n,t);new Uint8Array(o).set(s),n+=t,yield o}}()}(e,t);if((0,T.qf)(e))return async function*(e,t){const r=t?.chunkSize||L;let n=0;for(;n<e.size;){const t=n+r,o=await e.slice(n,t).arrayBuffer();n=t,yield o}}(e,t);if((0,T.H1)(e))return O(e,t);if((0,T.Sv)(e)){return O(e.body,t)}throw new Error("makeIterator")}var U=r(45653);const j="Cannot convert supplied data type";async function W(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||n)return function(e,t){if(t.text&&"string"==typeof e)return e;if((0,T.Pe)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+n)),r}throw new Error(j)}(e,t);if((0,T.qf)(e)&&(e=await(0,U.wv)(e)),(0,T.Sv)(e)){const r=e;return await(0,U.Mz)(r),t.binary?await r.arrayBuffer():await r.text()}if((0,T.H1)(e)&&(e=N(e,r)),(0,T.xZ)(e)||(0,T.Td)(e))return(0,E.cy)(e);throw new Error(j)}var P=r(92263),I=r(3680),D=r(36970);var V=r(44029),F=r(188);async function z(e,t,r,s){!t||Array.isArray(t)||(0,A.l)(t)||(s=void 0,r=t,t=void 0),e=await e,r=r||{};const i=(0,V.Al)(e),c=function(e,t){if(e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...e]:e}return r&&r.length?r:void 0}(t,s),u=await(0,F.M)(e,c,r);return u?(s=function(e,t,r){if(r)return r;const n={fetch:(0,P.z)(t,e),...e};if(n.url){const e=(0,I.S3)(n.url);n.baseUrl=e,n.queryString=(0,I.by)(n.url),n.filename=D.iW(e),n.baseUrl=D.pD(e)}return Array.isArray(n.loaders)||(n.loaders=null),n}({url:i,_parse:z,loaders:c},r=(0,M.a5)(r,u,c,i),s||null),await async function(e,t,r,s){if(function(e,t){void 0===t&&(t=k.x),(0,a.v)(e,"no worker provided");const r=e.version}(e),r=(0,n.l)(e.options,r),(0,T.Sv)(t)){const e=t,{ok:r,redirected:n,status:o,statusText:a,type:i,url:c}=e,u=Object.fromEntries(e.headers.entries());s.response={headers:u,ok:r,redirected:n,status:o,statusText:a,type:i,url:c}}t=await W(t,e,r);const i=e;if(i.parseTextSync&&"string"==typeof t)return i.parseTextSync(t,r,s);if(function(e,t){return!!b.isSupported()&&!(!o.Bd&&!t?._nodeWorkers)&&e.worker&&t?.worker}(e,r))return await S(e,t,r,s,z);if(i.parseText&&"string"==typeof t)return await i.parseText(t,r,s);if(i.parse)return await i.parse(t,r,s);throw(0,a.v)(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}(u,e,r,s)):null}},76702:(e,t,r)=>{r.d(t,{Ph:()=>i,mk:()=>a});var n=r(22858),o=r(91400);const s=()=>{const e=(0,o.K2)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function a(e){const t=s();e=Array.isArray(e)?e:[e];for(const r of e){const e=(0,n.D)(r);t.find((t=>e===t))||t.unshift(e)}}function i(){return s()}},188:(e,t,r)=>{r.d(t,{M:()=>p});var n=r(55256),o=r(36970),s=r(95247),a=r(22858),i=r(44029),c=r(95410),u=r(76702),l=r(88480),f=r(3680);const d=/\.([^.]+)$/;async function p(e,t,r,n){if(void 0===t&&(t=[]),!h(e))return null;let o=m(e,t,{...r,nothrow:!0},n);if(o)return o;if((0,l.qf)(e)&&(o=m(e=await e.slice(0,10).arrayBuffer(),t,r,n)),!o&&!r?.nothrow)throw new Error(y(e));return o}function m(e,t,r,o){if(void 0===t&&(t=[]),!h(e))return null;if(t&&!Array.isArray(t))return(0,a.D)(t);let s=[];t&&(s=s.concat(t)),r?.ignoreRegisteredLoaders||s.push(...(0,u.Ph)()),function(e){for(const t of e)(0,a.D)(t)}(s);const c=function(e,t,r,o){const s=(0,i.Al)(e),a=(0,i.z4)(e),c=(0,f.S3)(s)||o?.url;let u=null,l="";r?.mimeType&&(u=g(t,r?.mimeType),l=`match forced by supplied MIME type ${r?.mimeType}`);u=u||function(e,t){const r=t&&d.exec(t),n=r&&r[1];return n?function(e,t){t=t.toLowerCase();for(const r of e)for(const e of r.extensions)if(e.toLowerCase()===t)return r;return null}(e,n):null}(t,c),l=l||(u?`matched url ${c}`:""),u=u||g(t,a),l=l||(u?`matched MIME type ${a}`:""),u=u||function(e,t){if(!t)return null;for(const r of e)if("string"==typeof t){if(w(t,r))return r}else if(ArrayBuffer.isView(t)){if(b(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer){if(b(t,0,r))return r}return null}(t,e),l=l||(u?`matched initial data ${v(e)}`:""),r?.fallbackMimeType&&(u=u||g(t,r?.fallbackMimeType),l=l||(u?`matched fallback MIME type ${a}`:""));l&&n.R.log(1,`selectLoader selected ${u?.name}: ${l}.`);return u}(e,s,r,o);if(!c&&!r?.nothrow)throw new Error(y(e));return c}function h(e){return!(e instanceof Response&&204===e.status)}function y(e){const t=(0,i.Al)(e),r=(0,i.z4)(e);let n="No valid loader found (";n+=t?`${o.iW(t)}, `:"no url provided, ",n+=`MIME type: ${r?`"${r}"`:"not provided"}, `;const s=e?v(e):"";return n+=s?` first bytes: "${s}"`:"first bytes: not available",n+=")",n}function g(e,t){for(const r of e){if(r.mimeTypes?.some((e=>(0,c.JQ)(t,e))))return r;if((0,c.JQ)(t,`application/x.${r.id}`))return r}return null}function w(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function b(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((r=>function(e,t,r,n){if(n instanceof ArrayBuffer)return(0,s.YV)(n,e,n.byteLength);switch(typeof n){case"function":return n(e);case"string":return n===x(e,t,n.length);default:return!1}}(e,t,0,r)))}function v(e,t){if(void 0===t&&(t=5),"string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return x(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return x(e,0,t)}return""}function x(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let o="";for(let s=0;s<r;s++)o+=String.fromCharCode(n.getUint8(t+s));return o}},44207:(e,t,r)=>{r.d(t,{t2:()=>s});var n=r(29512),o=r(45653);async function s(e,t){if("string"==typeof e){const r=(0,n.o1)(e);return function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(r)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(r,t):await fetch(r,t)}return await(0,o.wv)(e)}},92263:(e,t,r)=>{r.d(t,{z:()=>a});var n=r(88480),o=r(44207),s=r(91400);function a(e,t){const r=(0,s.pp)(),a=e||r;return"function"==typeof a.fetch?a.fetch:(0,n.Gv)(a.fetch)?e=>(0,o.t2)(e,a.fetch):t?.fetch?t?.fetch:o.t2}},22858:(e,t,r)=>{r.d(t,{D:()=>s,l:()=>o});var n=r(10981);function o(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(e?.extensions)}function s(e){let t;return(0,n.v)(e,"null loader"),(0,n.v)(o(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e?.parseTextSync||e?.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},91400:(e,t,r)=>{r.d(t,{pp:()=>d,K2:()=>f,a5:()=>p});var n=r(88480),o=r(35593),s=r(80247);const a=new o.t({id:"loaders.gl"});class i{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var c=r(26951);const u={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){this.console=s}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:c.Bd,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},l={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function f(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function d(){const e=f();return e.globalOptions=e.globalOptions||{...u},e.globalOptions}function p(e,t,r,n){return r=r||[],function(e,t){m(e,null,u,l,t);for(const r of t){const n=e&&e[r.id]||{},o=r.options&&r.options[r.id]||{},s=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};m(n,r.id,o,s,t)}}(e,r=Array.isArray(r)?r:[r]),y(t,e,n)}function m(e,t,r,o,s){const i=t||"Top level",c=t?`${t}.`:"";for(const u in e){const l=!t&&(0,n.Gv)(e[u]);if(!(u in r)&&!("baseUri"===u&&!t)&&!("workerUrl"===u&&t))if(u in o)a.warn(`${i} loader option '${c}${u}' no longer supported, use '${o[u]}'`)();else if(!l){const e=h(u,s);a.warn(`${i} loader option '${c}${u}' not recognized. ${e}`)()}}}function h(e,t){const r=e.toLowerCase();let n="";for(const o of t)for(const t in o.options){if(e===t)return`Did you mean '${o.id}.${t}'?`;const s=t.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(n=n||`Did you mean '${o.id}.${t}'?`)}return n}function y(e,t,r){const n={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new i),g(n,d()),g(n,t),n}function g(e,t){for(const r in t)if(r in t){const o=t[r];(0,n.aC)(o)&&(0,n.aC)(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}},95410:(e,t,r)=>{r.d(t,{JQ:()=>s,OA:()=>a,d_:()=>i});const n=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,o=/^([-\w.]+\/[-\w.+]+)/;function s(e,t){return e.toLowerCase()===t.toLowerCase()}function a(e){const t=o.exec(e);return t?t[1]:e}function i(e){const t=n.exec(e);return t?t[1]:""}},44029:(e,t,r)=>{r.d(t,{Al:()=>a,_E:()=>c,z4:()=>i});var n=r(88480),o=r(95410),s=r(3680);function a(e){if((0,n.Sv)(e)){return e.url}if((0,n.qf)(e)){return e.name||""}return"string"==typeof e?e:""}function i(e){if((0,n.Sv)(e)){const t=e,r=t.headers.get("content-type")||"",n=(0,s.S3)(t.url);return(0,o.OA)(r)||(0,o.d_)(n)}if((0,n.qf)(e)){return e.type||""}return"string"==typeof e?(0,o.d_)(e):""}function c(e){if((0,n.Sv)(e)){return e.headers["content-length"]||-1}if((0,n.qf)(e)){return e.size}return"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}},45653:(e,t,r)=>{r.d(t,{Mz:()=>c,wv:()=>i});var n=r(88480);class o extends Error{constructor(e,t){super(e),this.reason=t.reason,this.url=t.url,this.response=t.response}}var s=r(44029),a=r(3680);async function i(e){if((0,n.Sv)(e))return e;const t={},r=(0,s._E)(e);r>=0&&(t["content-length"]=String(r));const o=(0,s.Al)(e),a=(0,s.z4)(e);a&&(t["content-type"]=a);const i=await async function(e){const t=5;if("string"==typeof e)return`data:,${e.slice(0,t)}`;if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const r=new FileReader;r.onload=t=>e(t?.target?.result),r.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){return`data:base64,${function(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}(e.slice(0,t))}`}return null}(e);i&&(t["x-first-bytes"]=i),"string"==typeof e&&(e=(new TextEncoder).encode(e));const c=new Response(e,{headers:t});return Object.defineProperty(c,"url",{value:o}),c}async function c(e){if(!e.ok){const t=await async function(e){const r=(0,a.E1)(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${r}`;n=n.length>100?`${n.slice(0,100)}...`:n;const s={reason:e.statusText,url:e.url,response:e};try{const t=e.headers.get("Content-Type");s.reason=!e.bodyUsed&&t?.includes("application/json")?await e.json():await e.text()}catch(t){}return new o(n,s)}(e);throw t}}},3680:(e,t,r)=>{r.d(t,{E1:()=>a,S3:()=>s,by:()=>o});const n=/\?.*/;function o(e){const t=e.match(n);return t&&t[0]}function s(e){return e.replace(n,"")}function a(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}},83073:(e,t,r)=>{r.d(t,{$:()=>S});const n="undefined"!=typeof __VERSION__?__VERSION__:"latest";var o=r(10981),s=r(26951);const a=globalThis.loaders?.parseImageNode,i="undefined"!=typeof Image,c="undefined"!=typeof ImageBitmap,u=Boolean(a),l=!!s.Bd||u;var f=r(47216);const d=/^data:image\/svg\+xml/,p=/\.svg((\?|#).*)?$/;function m(e){return e&&(d.test(e)||p.test(e))}function h(e,t){if(m(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function y(e,t,r){const n=function(e,t){if(m(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(r){throw new Error(r.message)}return`data:image/svg+xml;base64,${btoa(t)}`}return h(e,t)}(e,r),o=self.URL||self.webkitURL,s="string"!=typeof n&&o.createObjectURL(n);try{return await async function(e,t){const r=new Image;if(r.src=e,t.image&&t.image.decode&&r.decode)return await r.decode(),r;return await new Promise(((e,t)=>{try{r.onload=()=>e(r),r.onerror=e=>{const r=e instanceof Error?e.message:"error";t(new Error(r))}}catch(n){t(n)}}))}(s||n,t)}finally{s&&o.revokeObjectURL(s)}}var g=r(80247);const w={};let b=!0;async function v(e,t,r){let n;if(m(r)){n=await y(e,t,r)}else n=h(e,r);const o=t&&t.imagebitmap;return await async function(e,t){void 0===t&&(t=null);!function(e){for(const t in e||w)return!1;return!0}(t)&&b||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(r){g.warn(r),b=!1}return await createImageBitmap(e)}(n,o)}var x=r(69186);const S={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:n,mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,r){const n=((t=t||{}).image||{}).type||"auto",{url:s}=r||{};let a;switch(function(e){switch(e){case"auto":case"data":return function(){if(c)return"imagebitmap";if(i)return"image";if(l)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return c||i||l;case"imagebitmap":return c;case"image":return i;case"data":return l;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}(e),e}}(n)){case"imagebitmap":a=await v(e,t,s);break;case"image":a=await y(e,t,s);break;case"data":a=await async function(e){const{mimeType:t}=(0,x.m)(e)||{},r=globalThis.loaders?.parseImageNode;return(0,o.v)(r),await r(e,t)}(e);break;default:(0,o.v)(!1)}return"data"===n&&(a=(0,f.M5)(a)),a},tests:[e=>Boolean((0,x.m)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}}},69186:(e,t,r)=>{function n(e){return function(e,t,r){void 0===r&&(r=0);const n=(o=t,[...o].map((e=>e.charCodeAt(0))));var o;for(let s=0;s<n.length;++s)if(n[s]!==e[s+r])return!1;return!0}(e,"ftyp",4)&&96&e[8]?function(e){switch((t=e,r=8,n=12,String.fromCharCode(...t.slice(r,n))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,r,n}(e):null}r.d(t,{m:()=>a});const o=!1,s=!0;function a(e){const t=i(e);return function(e){const t=i(e),r=t.byteLength>=24&&2303741511===t.getUint32(0,o);if(!r)return null;return{mimeType:"image/png",width:t.getUint32(16,o),height:t.getUint32(20,o)}}(t)||function(e){const t=i(e),r=t.byteLength>=3&&65496===t.getUint16(0,o)&&255===t.getUint8(2);if(!r)return null;const{tableMarkers:n,sofMarkers:s}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let a=2;for(;a+9<t.byteLength;){const e=t.getUint16(a,o);if(s.has(e))return{mimeType:"image/jpeg",height:t.getUint16(a+5,o),width:t.getUint16(a+7,o)};if(!n.has(e))return null;a+=2,a+=t.getUint16(a,o)}return null}(t)||function(e){const t=i(e),r=t.byteLength>=10&&1195984440===t.getUint32(0,o);if(!r)return null;return{mimeType:"image/gif",width:t.getUint16(6,s),height:t.getUint16(8,s)}}(t)||function(e){const t=i(e),r=t.byteLength>=14&&16973===t.getUint16(0,o)&&t.getUint32(2,s)===t.byteLength;if(!r)return null;return{mimeType:"image/bmp",width:t.getUint32(18,s),height:t.getUint32(22,s)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),r=n(t);if(!r)return null;return{mimeType:r.mimeType,width:0,height:0}}(t)}function i(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}},47216:(e,t,r)=>{function n(e){const t=s(e);if(!t)throw new Error("Not an image");return t}function o(e){switch(n(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function s(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}r.d(t,{M5:()=>o})},95247:(e,t,r)=>{function n(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),o=new Uint8Array(t);for(let s=0;s<n.length;++s)if(n[s]!==o[s])return!1;return!0}function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),r=t.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(r);let o=0;for(const s of t)n.set(s,o),o+=s.byteLength;return n.buffer}(t)}function s(e,t,r){const n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}r.d(t,{AQ:()=>o,YV:()=>n,_m:()=>s})},53024:(e,t,r)=>{function n(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}r.d(t,{XA:()=>n})},10981:(e,t,r)=>{function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,{v:()=>n})},26951:(e,t,r)=>{r.d(t,{Bd:()=>o});var n=r(88538);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const o=Boolean("object"!=typeof n||"[object process]"!==String(n)||n.browser),s=void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version);s&&parseFloat(s[1])},8001:(e,t,r)=>{r.d(t,{cy:()=>s,jJ:()=>o});var n=r(95247);async function o(e,t){for(;;){const{done:r,value:n}=await e.next();if(r)return void e.return();if(t(n))return}}async function s(e){const t=[];for await(const r of e)t.push(r);return(0,n.AQ)(...t)}},55256:(e,t,r)=>{r.d(t,{R:()=>a});var n=r(35593);const o="undefined"!=typeof __VERSION__?__VERSION__:"latest",s=o[0]>="0"&&o[0]<="9"?`v${o}`:"";const a=function(){const e=new n.t({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=e,globalThis.loaders.version=s,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=e,e}()},97354:(e,t,r)=>{function n(e){return e}function o(e,t){return s(e||{},t)}function s(e,t,r){if(void 0===r&&(r=0),r>3)return t;const n={...e};for(const[o,a]of Object.entries(t))a&&"object"==typeof a&&!Array.isArray(a)?n[o]=s(n[o]||{},t[o],r+1):n[o]=t[o];return n}r.d(t,{E:()=>n,l:()=>o})},29512:(e,t,r)=>{r.d(t,{o1:()=>s});let n="";const o={};function s(e){for(const t in o)if(e.startsWith(t)){const r=o[t];e=e.replace(t,r)}return e.startsWith("http://")||e.startsWith("https://")||(e=`${n}${e}`),e}},36970:(e,t,r)=>{r.d(t,{pD:()=>a,iW:()=>s,hd:()=>i});var n=r(88538);function o(){if(void 0!==n&&void 0!==n.cwd)return n.cwd();const e=window.location?.pathname;return e?.slice(0,e.lastIndexOf("/")+1)||""}function s(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function a(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}function i(){const e=[];for(let o=0;o<arguments.length;o++)e[o]=o<0||arguments.length<=o?void 0:arguments[o];let t,r="",n=!1;for(let s=e.length-1;s>=-1&&!n;s--){let a;s>=0?a=e[s]:(void 0===t&&(t=o()),a=t),0!==a.length&&(r=`${a}/${r}`,n=a.charCodeAt(0)===c)}return r=function(e,t){let r,n="",o=-1,s=0,a=!1;for(let i=0;i<=e.length;++i){if(i<e.length)r=e.charCodeAt(i);else{if(r===c)break;r=c}if(r===c){if(o===i-1||1===s);else if(o!==i-1&&2===s){if(n.length<2||!a||n.charCodeAt(n.length-1)!==u||n.charCodeAt(n.length-2)!==u)if(n.length>2){const e=n.length-1;let t=e;for(;t>=0&&n.charCodeAt(t)!==c;--t);if(t!==e){n=-1===t?"":n.slice(0,t),o=i,s=0,a=!1;continue}}else if(2===n.length||1===n.length){n="",o=i,s=0,a=!1;continue}t&&(n.length>0?n+="/..":n="..",a=!0)}else{const t=e.slice(o+1,i);n.length>0?n+=`/${t}`:n=t,a=!1}o=i,s=0}else r===u&&-1!==s?++s:s=-1}return n}(r,!n),n?`/${r}`:r.length>0?r:"."}const c=47,u=46},94104:(e,t,r)=>{r.d(t,{q:()=>s});var n=r(97354),o=r(29512);class s{static defaultOptions={core:{type:"auto",attributions:[],loadOptions:{},loaders:[]}};_needsRefresh=!0;constructor(e,t,r){this.options=r?(0,n.l)({...r,core:s.defaultOptions},t):{...t},this.data=e,this.url="string"==typeof e?(0,o.o1)(e):"",this.loadOptions={...this.options.core?.loadOptions},this.fetch=function(e){const t=e?.fetch;if(t&&"function"==typeof t)return(e,r)=>t(e,r);const r=e?.fetch;if(r&&"function"!=typeof r)return e=>fetch(e,r);return e=>fetch(e)}(this.loadOptions)}setProps(e){this.options=Object.assign(this.options,e),this.setNeedsRefresh()}setNeedsRefresh(){this._needsRefresh=!0}getNeedsRefresh(e){void 0===e&&(e=!0);const t=this._needsRefresh;return e&&(this._needsRefresh=!1),t}}},90189:(e,t,r)=>{r.d(t,{b:()=>n});class n{static type="template";static testURL=e=>!1}},276:(e,t,r)=>{r.d(t,{l:()=>o});var n=r(94104);const o={name:"ArcGISImageServer",id:"arcgis-image-server",module:"wms",version:"0.0.0",extensions:[],mimeTypes:[],type:"arcgis-image-server",fromUrl:!0,fromBlob:!1,defaultOptions:{"arcgis-image-server":{}},testURL:e=>e.toLowerCase().includes("ImageServer"),createDataSource:(e,t)=>new s(e,t)};class s extends n.q{constructor(e,t){super(e,t,o.defaultOptions)}async getMetadata(){return await this.metadata()}async getImage(e){throw new Error("not implemented")}async metadata(){throw new Error("not implemented")}exportImage(e){throw new Error("not implemented")}metadataURL(e){return`${this.url}?f=pjson`}exportImageURL(e){const t=`bbox=${e.bbox[0]},${e.bbox[1]},${e.bbox[2]},${e.bbox[3]}`,r=`size=${e.width},${e.height}`,n={...e,bbox:t,size:r};return delete n.width,delete n.height,this.getUrl("exportImage",n)}getUrl(e,t,r){let n=`${this.url}/${e}`,o=!0;for(const[s,a]of Object.entries(t))n+=o?"?":"&",o=!1,Array.isArray(a)?n+=`${s.toUpperCase()}=${a.join(",")}`:n+=`${s.toUpperCase()}=${a?String(a):""}`;return n}async checkResponse(e){if(!e.ok)throw new Error("error")}}},22631:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(10712),o=r(276);const s=[n.n,o.l];function a(e){const{type:t="auto",url:r,sources:n=s,loadOptions:o}=e,a="auto"===t?function(e,t){for(const r of t)if(r.testURL&&r.testURL(e))return r;return null}(r,n):function(e,t){for(const r of t)if(r.type===e)return r;return null}(t,n);if(!a)throw new Error("Not a valid image source type");return a.createDataSource(r,{core:{loadOptions:o}})}},10712:(e,t,r)=>{r.d(t,{n:()=>M});var n=r(94104),o=r(97354),s=r(83073);function a(e){if(Array.isArray(e))return e.map((e=>a(e)));if(e&&"object"==typeof e){const r={};for(const[n,o]of Object.entries(e))r[(t=n,"string"==typeof t?t.charAt(0).toLowerCase()+t.slice(1):t)]=a(o);return r}var t;return e}var i=r(78394);function c(e,t){if(t?._parser&&"fast-xml-parser"!==t._parser)throw new Error(t?._parser);const r=function(e,t){const r=new i.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"",...t}),n=r.parse(e);return n}(e,{allowBooleanAttributes:!0,ignoreDeclaration:!0,removeNSPrefix:t?.removeNSPrefix,textNodeName:t?.textNodeName,isArray:(e,r,n,o)=>Boolean(t?.arrayPaths?.some((e=>r===e))),...t?._fastXML});return t?.uncapitalizeKeys?a(r):r}const u={dataType:null,batchType:null,name:"XML",id:"xml",module:"xml",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!1,extensions:["xml"],mimeTypes:["application/xml","text/xml"],testText:function(e){return e.startsWith("<?xml")},options:{xml:{_parser:"fast-xml-parser",uncapitalizeKeys:!1,removeNSPrefix:!1,textNodeName:"value",arrayPaths:[]}},parse:async(e,t)=>c((new TextDecoder).decode(e),{...u.options.xml,...t?.xml}),parseTextSync:(e,t)=>c(e,{...u.options.xml,...t?.xml})};function l(e){return Array.isArray(e)?e:e?[e]:[]}function f(e){const t=l(e);return t.length>0&&t.every((e=>"string"==typeof e))?t:[]}function d(e,t){switch(void 0===t&&(t=void 0),typeof e){case"number":return e;case"string":return parseFloat(e);default:return}}function p(e,t){switch(void 0===t&&(t=void 0),typeof e){case"number":return e;case"string":return parseInt(e,10);default:return}}function m(e){switch(e){case"true":case"1":return!0;default:return!1}}function h(e,t){const r=u.parseTextSync?.(e,t),n=r.WMT_MS_Capabilities||r.WMS_Capabilities||r,o=function(e){const t={version:String(e.version||""),name:String(e.Service?.Name||"unnamed"),title:e.Service?.Title?String(e.Service?.Title):void 0,abstract:e.Service?.Abstract?String(e.Service?.Abstract):void 0,keywords:f(e.Service?.KeywordList?.Keyword),fees:e.Service?.Fees?JSON.stringify(e.Service?.Fees):void 0,accessConstraints:e.Service?.AccessConstraints?JSON.stringify(e.Service?.AccessConstraints):void 0,layerLimit:p(e.Service?.LayerLimit),maxWidth:p(e.Service?.maxWidth),maxHeight:p(e.Service?.maxHeight),layers:[],requests:y(e.Capability?.Request),exceptions:g(e.Exception)},r=l(e.Capability?.Layer);for(const n of r)t.layers.push(w(n));for(const[n,o]of Object.entries(t))void 0===o&&delete t[n];return t}(n);if(t?.inheritedLayerProps)for(const s of o.layers)b(s,null);return t?.includeRawJSON&&(o.json=n),t?.includeXMLText&&(o.xml=e),o}function y(e){const t={};for(const[r,n]of Object.entries(e||{})){const e=f(n?.Format);t[r]={mimeTypes:e}}return t}function g(e){if(l(e?.Format).length>0)return{mimeTypes:f(e)}}function w(e){const t={title:String(e?.Title||""),name:e?.Name&&String(e?.Name),abstract:e?.Name&&String(e?.Abstract),keywords:f(e.KeywordList?.Keyword)},r=e?.CRS||e?.SRS;r&&Array.isArray(r)&&r.every((e=>"string"==typeof e))&&(t.crs=r);let n=e?.EX_GeographicBoundingBox&&function(e){const{westBoundLongitude:t,northBoundLatitude:r,eastBoundLongitude:n,southBoundLatitude:o}=e;return[[t,o],[n,r]]}(e?.EX_GeographicBoundingBox);n&&(t.geographicBoundingBox=n),n=e?.LatLonBoundingBox&&function(e){const{minx:t,miny:r,maxx:n,maxy:o}=e;return[[t,r],[n,o]]}(e?.LatLonBoundingBox),n&&(t.geographicBoundingBox=n);const o=e?.BoundingBox&&(s=e?.BoundingBox,l(s).map((e=>function(e){const{CRS:t,SRS:r,minx:n,miny:o,maxx:s,maxy:a,resx:i,resy:c}=e,u={crs:t||r,boundingBox:[[d(n),d(o)],[d(s),d(a)]]};return i&&(u.xResolution=i),c&&(u.yResolution=c),u}(e))));var s;o&&o.length>0&&(t.boundingBoxes=o);const a=l(e?.Dimension).map((e=>function(e){const{name:t,units:r,value:n}=e,o={name:t,units:r,extent:n};e.unitSymbol&&(o.unitSymbol=e.unitSymbol);e.default&&(o.defaultValue=e.default);e.multipleValues&&(o.multipleValues=m(e.multipleValues));e.nearestValue&&(o.nearestValue=m(e.nearestValue));e.current&&(o.current=m(e.current));return o}(e)));a.length&&(t.dimensions=a),e?.opaque&&(t.opaque=m(e?.opaque)),e?.cascaded&&(t.cascaded=m(e?.cascaded)),e?.queryable&&(t.queryable=m(e?.queryable));const i=l(e?.Layer),c=[];for(const u of i)c.push(w(u));c.length>0&&(t.layers=c);for(const[u,l]of Object.entries(t))void 0===l&&delete t[u];return t}function b(e,t){t?.geographicBoundingBox&&!e.geographicBoundingBox&&(e.geographicBoundingBox=[...t.geographicBoundingBox]),t?.crs&&!e.crs&&(e.crs=[...t.crs]),t?.boundingBoxes&&!e.boundingBoxes&&(e.boundingBoxes=[...t.boundingBoxes]),t?.dimensions&&!e.dimensions&&(e.dimensions=[...t.dimensions]);for(const r of e.layers||[])b(r,e)}const v={dataType:null,batchType:null,id:"wms-capabilities",name:"WMS Capabilities",module:"wms",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.wms_xml","application/xml","text/xml"],testText:function(e){return e.startsWith("<?xml")},options:{wms:{}},parse:async(e,t)=>h((new TextDecoder).decode(e),t?.wms),parseTextSync:(e,t)=>h(e,t?.wms)};function x(e,t){const r=u.parseTextSync?.(e,t),n=r.FeatureInfoResponse?.FIELDS||[];return{features:(Array.isArray(n)?n:[n]).map((e=>function(e){const t=e||{};return{attributes:t,type:"",bounds:{bottom:0,top:0,left:0,right:0}}}(e)))}}const S={...v,dataType:null,id:"wms-feature-info",name:"WMS FeatureInfo",parse:async(e,t)=>x((new TextDecoder).decode(e),t),parseTextSync:(e,t)=>x(e,t)};function _(e,t){const r=u.parseTextSync?.(e,t);return r}const k={...v,dataType:null,id:"wms-layer-description",name:"WMS DescribeLayer",parse:async(e,t)=>_((new TextDecoder).decode(e),t),parseTextSync:(e,t)=>_(e,t)};const A={dataType:null,batchType:null,id:"wms-error",name:"WMS Error",module:"wms",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.se_xml","application/xml","text/xml"],testText:function(e){return e.startsWith("<?xml")},options:{wms:{throwOnError:!1}},parse:async(e,t)=>T((new TextDecoder).decode(e),t),parseSync:(e,t)=>T((new TextDecoder).decode(e),t),parseTextSync:(e,t)=>T(e,t)};function T(e,t){const r={...A.options.wms,...t?.wms},n=function(e,t){const r=u.parseTextSync?.(e,t),n=r?.ServiceExceptionReport?.ServiceException||r?.["ogc:ServiceExceptionReport"]?.["ogc:ServiceException"];return"string"==typeof n?n:n.value||n.code||"Unknown error"}(e,r),o=r.minimalErrors?n:`WMS Service error: ${n}`;if(r.throwOnError)throw new Error(o);return o}const M={name:"Web Map Service (OGC WMS)",id:"wms",module:"wms",version:"0.0.0",extensions:[],mimeTypes:[],type:"wms",fromUrl:!0,fromBlob:!1,defaultOptions:{wms:{}},testURL:e=>e.toLowerCase().includes("wms"),createDataSource:(e,t)=>new E(e,t)};class E extends n.q{capabilities=null;constructor(e,t){super(e,t,M.defaultOptions),this.substituteCRS84=t.wms?.substituteCRS84??!1,this.flipCRS=["EPSG:4326"],this.wmsParameters={layers:void 0,query_layers:void 0,styles:void 0,version:"1.3.0",crs:"EPSG:4326",format:"image/png",info_format:"text/plain",transparent:void 0,time:void 0,elevation:void 0,...t.wmsParameters,...t.wms?.wmsParameters},this.vendorParameters=t.wms?.vendorParameters||t.vendorParameters||{}}async getMetadata(){const e=await this.getCapabilities();return this.normalizeMetadata(e)}async getImage(e){const{boundingBox:t,bbox:r,...n}=e,o={bbox:t?[...t[0],...t[1]]:r,...n};return await this.getMap(o)}normalizeMetadata(e){return e}async getCapabilities(e,t){const r=this.getCapabilitiesURL(e,t),n=await this.fetch(r),o=await n.arrayBuffer();this._checkResponse(n,o);const s=await v.parse(o,this.loadOptions);return this.capabilities=s,s}async getMap(e,t){const r=this.getMapURL(e,t),n=await this.fetch(r),o=await n.arrayBuffer();this._checkResponse(n,o);try{return await s.$.parse(o,this.loadOptions)}catch{throw this._parseError(o)}}async getFeatureInfo(e,t){const r=this.getFeatureInfoURL(e,t),n=await this.fetch(r),o=await n.arrayBuffer();return this._checkResponse(n,o),await S.parse(o,this.loadOptions)}async getFeatureInfoText(e,t){const r=this.getFeatureInfoURL(e,t),n=await this.fetch(r),o=await n.arrayBuffer();return this._checkResponse(n,o),(new TextDecoder).decode(o)}async describeLayer(e,t){const r=this.describeLayerURL(e,t),n=await this.fetch(r),o=await n.arrayBuffer();return this._checkResponse(n,o),await k.parse(o,this.loadOptions)}async getLegendGraphic(e,t){const r=this.getLegendGraphicURL(e,t),n=await this.fetch(r),o=await n.arrayBuffer();this._checkResponse(n,o);try{return await s.$.parse(o,this.loadOptions)}catch{throw this._parseError(o)}}getCapabilitiesURL(e,t){const r={version:this.wmsParameters.version,...e};return this._getWMSUrl("GetCapabilities",r,t)}getMapURL(e,t){e=this._getWMS130Parameters(e);const r={version:this.wmsParameters.version,format:this.wmsParameters.format,transparent:this.wmsParameters.transparent,time:this.wmsParameters.time,elevation:this.wmsParameters.elevation,layers:this.wmsParameters.layers,styles:this.wmsParameters.styles,crs:this.wmsParameters.crs,...e};return this._getWMSUrl("GetMap",r,t)}getFeatureInfoURL(e,t){e=this._getWMS130Parameters(e);const{boundingBox:r,bbox:n}=e;e.bbox=r?[...r[0],...r[1]]:n;const o={version:this.wmsParameters.version,info_format:this.wmsParameters.info_format,layers:this.wmsParameters.layers,query_layers:this.wmsParameters.query_layers,styles:this.wmsParameters.styles,crs:this.wmsParameters.crs,...e};return this._getWMSUrl("GetFeatureInfo",o,t)}describeLayerURL(e,t){const r={version:this.wmsParameters.version,...e};return this._getWMSUrl("DescribeLayer",r,t)}getLegendGraphicURL(e,t){const r={version:this.wmsParameters.version,...e};return this._getWMSUrl("GetLegendGraphic",r,t)}_parseWMSUrl(e){const[t,r]=e.split("?"),n=r.split("&"),o={};for(const s of n){const[e,t]=s.split("=");o[e]=t}return{url:t,parameters:o}}_getWMSUrl(e,t,r){let n=this.url,o=!0;const s={service:"WMS",version:t.version,request:e,...t,...this.vendorParameters,...r},a=["transparent","time","elevation"];for(const[i,c]of Object.entries(s))a.includes(i)&&!c||(n+=o?"?":"&",o=!1,n+=this._getURLParameter(i,c,t));return encodeURI(n)}_getWMS130Parameters(e){const t={...e};return t.srs&&(t.crs=t.crs||t.srs,delete t.srs),t}_getURLParameter(e,t,r){switch(e){case"crs":"1.3.0"!==r.version?e="srs":this.substituteCRS84&&"EPSG:4326"===t&&(t="CRS:84");break;case"srs":"1.3.0"===r.version&&(e="crs");break;case"bbox":const n=this._flipBoundingBox(t,r);n&&(t=n);break;case"x":"1.3.0"===r.version&&(e="i");break;case"y":"1.3.0"===r.version&&(e="j")}return e=e.toUpperCase(),Array.isArray(t)?`${e}=${t.join(",")}`:`${e}=${t?String(t):""}`}_flipBoundingBox(e,t){if(!Array.isArray(e)||4!==e.length)return null;const r=e;return"1.3.0"===t.version&&this.flipCRS.includes(t.crs||"")&&!(this.substituteCRS84&&"EPSG:4326"===t.crs)?[r[1],r[0],r[3],r[2]]:r}async _fetchArrayBuffer(e){const t=await this.fetch(e),r=await t.arrayBuffer();return this._checkResponse(t,r),r}_checkResponse(e,t){const r=e.headers["content-type"];if(!e.ok||A.mimeTypes.includes(r)){const e=(0,o.l)(this.loadOptions,{wms:{throwOnError:!0}}),r=A.parseSync?.(t,e);throw new Error(r)}}_parseError(e){const t=A.parseSync?.(e,this.options.core?.loadOptions);return new Error(t)}}},46410:(e,t,r)=>{function n(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}r.d(t,{v:()=>n})},99222:(e,t,r)=>{r.d(t,{Bd:()=>o,Fr:()=>a,xD:()=>s});var n=r(88538);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const o="object"!=typeof n||"[object process]"!==String(n)||n.browser,s="function"==typeof importScripts,a="undefined"!=typeof window&&void 0!==window.orientation,i=void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version);i&&parseFloat(i[1])},9894:(e,t,r)=>{r.d(t,{x:()=>s});var n=r(11654),o=r(80247);const s=(globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},"undefined"==typeof __VERSION__?(o.warn("loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN."),globalThis._loadersgl_.version=n.x):globalThis._loadersgl_.version=__VERSION__),globalThis._loadersgl_.version)},11654:(e,t,r)=>{r.d(t,{x:()=>n});const n="beta"},14518:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>O,contentTitle:()=>C,default:()=>j,frontMatter:()=>L,metadata:()=>$,toc:()=>N});var n=r(62540),o=r(43023),s=r(63696),a=(r(7470),r(17817)),i=r(97564),c=r(49960),u=r(38313),l=r(10712),f=r(276),d=r(86893),p=r(56505),m=r.n(p),h=r(75293),y=r(89511);const g=h.Ay.div.withConfig({displayName:"example-panel__Container",componentId:"sc-6y4n7-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;color:#121212;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;height:calc(100vh - 105px);width:500px;.loading-indicator{margin:0;text-align:center;transition:opacity 300ms ease-out;}> .monaco-editor{height:calc(100vh - 200px) !important;width:700px !important;}"]),w=h.Ay.select.withConfig({displayName:"example-panel__DropDown",componentId:"sc-6y4n7-1"})(["margin-bottom:6px;"]),b=e=>{e={examples:{},droppedFile:null,exampleName:null,categoryName:null,onExampleChange:()=>{},...e};const[t,r]=(0,s.useState)({examples:[],categoryName:null,exampleName:null,example:null,error:null});return(0,s.useEffect)((()=>{const t=function(e,t){if(t)return{[t]:e[t]};return{...e}}(e.examples,e.format),n=e.format||e.initialCategoryName;let o=e.format?Object.keys(t[n])[0]:e.initialExampleName;const s=t[n][o];r((e=>({...e,examples:t,exampleName:o,categoryName:n,example:s})))}),[e.examples,e.format,e.initialCategoryName,e.initialExampleName]),(0,s.useEffect)((()=>{t.example&&e.onExampleChange({categoryName:t.categoryName,exampleName:t.exampleName,example:t.example})}),[t.example]),(0,n.jsxs)(g,{children:[(0,n.jsx)(x,{...t}),(0,n.jsx)(S,{examples:t.examples,categoryName:t.categoryName,exampleName:t.exampleName,onExampleChange:e=>{let{categoryName:t,exampleName:n,example:o}=e;r((e=>({...e,categoryName:t,exampleName:n,example:o})))}}),e.children]})},v=e=>(0,n.jsx)(y.Ay,{language:"json",options:{readOnly:!0},theme:"vs-dark",value:e.metadata||"No metadata available"});const x=e=>{let{categoryName:t,exampleName:r}=e;return t&&r?(0,n.jsx)("div",{children:(0,n.jsxs)("h3",{children:[r," ",(0,n.jsx)("b",{children:t})," "]})}):null},S=e=>{const{categoryName:t,exampleName:r}=e;if(!t||!r)return!1;const o=`${t}.${r}`;return(0,n.jsx)(w,{value:o,onChange:t=>{const r=t.target.value.split("."),n=r[0],o=r[1],s=e.examples[n][o];e.onExampleChange({categoryName:n,exampleName:o,example:s})},children:Object.keys(e.examples).map(((t,r)=>{const o=e.examples[t];return(0,n.jsx)("optgroup",{label:t,children:Object.keys(o).map(((e,r)=>{const o=`${t}.${e}`;return(0,n.jsx)("option",{value:o,children:`${e} (${t})`},r)}))},r)}))})};const _="WMS",k="OpenStreetMap WMS (Terrestris)",A={WMS:{"OpenStreetMap WMS (Terrestris)":{type:"wms",url:"https://ows.terrestris.de/osm/service",description:"OpenStreetMap rendered, updated weekly, covering the entire globe. Copyright OpenStreetMap.",layers:["OSM-WMS"],viewState:{}},"NOAA Composite Reflectivity WMS":{type:"wms",url:"https://opengeo.ncep.noaa.gov/geoserver/conus/conus_cref_qcd/ows",description:"Radar precipitation data covering the contiguous US. Quality Controlled 1km x 1km CONUS Radar Composite Reflectivity. This data is provided Multi-Radar-Multi-Sensor (MRMS) algorithm.",layers:["conus_cref_qcd"],viewState:{}},"NASA Global Imagery Browse Services for EOSDIS":{type:"wms",url:"https://gibs.earthdata.nasa.gov/wms/epsg4326/best/wms.cgi",description:"Over 1,000 NASA satellite imagery products, covering every part of the world. Most imagery is updated daily\u2014available within a few hours after satellite observation, and some products span almost 30 years.",layers:["Lightning"],viewState:{zoom:3}},"3DEP Elevation Index":{type:"wms",url:"https://index.nationalmap.gov/arcgis/services/3DEPElevationIndex/MapServer/WMSServer",layers:["23"],viewState:{longitude:-100,latitude:55,zoom:3},layerProps:{opacity:.5}},NASA:{type:"wms",url:"https://gibs.earthdata.nasa.gov/wms/epsg4326/best/wms.cgi",layers:["Land Cover"],viewState:{longitude:-100,latitude:55,zoom:3},layerProps:{opacity:.5}},"Trigger Error (No Layer)":{type:"wms",url:"https://geo.weather.gc.ca/geomet",layers:[],viewState:{longitude:-100,latitude:55,zoom:3}}}};var T=r(80247);const M="https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json",E={latitude:49.254,longitude:-123.13,zoom:11,maxZoom:16,pitch:45,bearing:0};function B(e){void 0===e&&(e={});const[t,r]=(0,s.useState)({imageSource:null,metadata:"",viewState:E,loading:!0,error:null}),{imageSource:o,metadata:p}=t,h=function(e){if(!e)return null;const{url:t,type:n,layers:o,opacity:s=1}=e;return[new c.T({data:t,serviceType:n,layers:o,pickable:!0,opacity:s,onImageLoadStart:()=>r((e=>({...e,loading:!0}))),onImageLoad:()=>r((e=>({...e,loading:!1}))),onMetadataLoadStart:()=>r((e=>({...e,metadata:"Loading metadata..."}))),onMetadataLoad:e=>{globalThis.document.title=e.title||"WMS",r((t=>({...t,metadata:JSON.stringify(e,null,2)})))},onClick:async e=>{let{bitmap:t,layer:n}=e;if(this.state.featureInfo)r((e=>({...e,featureInfo:null})));else if(t){const e=t.pixel[0],o=t.pixel[1],s=await n.getFeatureInfoText(e,o);T.log("Click in imagery layer",e,o,s),r((e=>({...e,featureInfo:s})))}}})]}(t.example);return(0,n.jsx)("div",{style:{position:"relative",height:"100%"},children:(0,n.jsxs)(a.A,{layers:h,viewState:t.viewState,onViewStateChange:function(e){let{viewState:t}=e;r((e=>({...e,viewState:t})))},onError:e=>r((t=>({...t,error:e.message}))),controller:{type:i.A,maxPitch:85},getTooltip:e=>{let{object:r}=e;return t?.featureInfo&&{html:`<h2>Feature Info</h2><div>${t.featureInfo}</div>`,style:{color:"#EEE",backgroundColor:"#000",fontSize:"0.8em",whiteSpace:"pre-line"}}},children:[(0,n.jsxs)(b,{examples:A,initialCategoryName:_,initialExampleName:k,onExampleChange:function(e){let{example:n}=e;const{viewState:o}=n,s={...t.viewState,...o},a=(0,u.O)(n.url,[l.n,f.l],{type:"wms"});r((e=>({...e,example:n,viewState:s,imageSource:a})))},loading:t.loading,children:[(0,n.jsx)(v,{metadata:p}),t.error?(0,n.jsx)("div",{style:{color:"red"},children:t.error}):"",(0,n.jsx)(R,{viewState:t.viewState})]}),(0,n.jsx)(d.T5,{reuseMaps:!0,mapLib:m(),mapStyle:M,preventStyleDiffing:!0})]})})}function R(e){let{viewState:t}=e;return(0,n.jsx)(n.Fragment,{})}const L={},C="WMS",$={id:"tiles/wms",title:"WMS",description:"WMSSource dynamically loads viewports from an OGC Web Map Service.",source:"@site/src/examples/tiles/wms.mdx",sourceDirName:"tiles",slug:"/tiles/wms",permalink:"/examples/tiles/wms",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebars",previous:{title:"TableTileSource",permalink:"/examples/tiles/table-tiler"},next:{title:"I3S Building Scene Layer",permalink:"/examples/i3s-building-scene-layer"}},O={},N=[];function U(e){const t={a:"a",code:"code",h1:"h1",header:"header",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"wms",children:"WMS"})}),"\n","\n",(0,n.jsx)("div",{style:{height:"calc(100vh - var(--ifm-navbar-height))"},children:(0,n.jsx)(B,{children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/docs/modules/wms/api-reference/wms-source",children:(0,n.jsx)(t.strong,{children:(0,n.jsx)(t.code,{children:"WMSSource"})})})," dynamically loads viewports from an OGC Web Map Service."]})})})]})}function j(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(U,{...e})}):U(e)}}}]);