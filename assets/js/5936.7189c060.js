"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[5936],{55230:t=>{function e(t,e,i){i=i||2;var o,s,a,l,p,d,f,y=e&&e.length,g=y?e[0]*i:t.length,v=n(t,0,g,i,!0),m=[];if(!v||v.next===v.prev)return m;if(y&&(v=function(t,e,i,r){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(h(a));for(l.sort(c),o=0;o<l.length;o++)i=u(l[o],i);return i}(t,e,v,i)),t.length>80*i){o=a=t[0],s=l=t[1];for(var x=i;x<g;x+=i)(p=t[x])<o&&(o=p),(d=t[x+1])<s&&(s=d),p>a&&(a=p),d>l&&(l=d);f=0!==(f=Math.max(a-o,l-s))?32767/f:0}return r(v,m,i,o,s,f,0),m}function n(t,e,n,i,r){var o,s;if(r===A(t,e,n,i)>0)for(o=e;o<n;o+=i)s=I(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=I(o,t[o],t[o+1],s);return s&&v(s,s.next)&&(_(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!v(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(_(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function r(t,e,n,c,u,p,h){if(t){!h&&p&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(t,c,u,p);for(var f,y,g=t;t.prev!==t.next;)if(f=t.prev,y=t.next,p?s(t,c,u,p):o(t))e.push(f.i/n|0),e.push(t.i/n|0),e.push(y.i/n|0),_(t),t=y.next,g=y.next;else if((t=y)===g){h?1===h?r(t=a(i(t),e,n),e,n,c,u,p,2):2===h&&l(t,e,n,c,u,p):r(i(t),e,n,c,u,p,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(g(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,c=i.y,u=r<o?r<s?r:s:o<s?o:s,p=a<l?a<c?a:c:l<c?l:c,d=r>o?r>s?r:s:o>s?o:s,h=a>l?a>c?a:c:l>c?l:c,y=i.next;y!==e;){if(y.x>=u&&y.x<=d&&y.y>=p&&y.y<=h&&f(r,a,o,l,s,c,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function s(t,e,n,i){var r=t.prev,o=t,s=t.next;if(g(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,c=s.x,u=r.y,p=o.y,h=s.y,y=a<l?a<c?a:c:l<c?l:c,v=u<p?u<h?u:h:p<h?p:h,m=a>l?a>c?a:c:l>c?l:c,x=u>p?u>h?u:h:p>h?p:h,S=d(y,v,e,n,i),b=d(m,x,e,n,i),w=t.prevZ,I=t.nextZ;w&&w.z>=S&&I&&I.z<=b;){if(w.x>=y&&w.x<=m&&w.y>=v&&w.y<=x&&w!==r&&w!==s&&f(a,u,l,p,c,h,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,I.x>=y&&I.x<=m&&I.y>=v&&I.y<=x&&I!==r&&I!==s&&f(a,u,l,p,c,h,I.x,I.y)&&g(I.prev,I,I.next)>=0)return!1;I=I.nextZ}for(;w&&w.z>=S;){if(w.x>=y&&w.x<=m&&w.y>=v&&w.y<=x&&w!==r&&w!==s&&f(a,u,l,p,c,h,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;I&&I.z<=b;){if(I.x>=y&&I.x<=m&&I.y>=v&&I.y<=x&&I!==r&&I!==s&&f(a,u,l,p,c,h,I.x,I.y)&&g(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function a(t,e,n){var r=t;do{var o=r.prev,s=r.next.next;!v(o,s)&&m(o,r,r.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),_(r),_(r.next),r=t=s),r=r.next}while(r!==t);return i(r)}function l(t,e,n,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&y(l,c)){var u=w(l,c);return l=i(l,l.next),u=i(u,u.next),r(l,e,n,o,s,a,0),void r(u,e,n,o,s,a,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,c=n,u=n.x,d=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&f(o<d?r:s,o,u,d,o<d?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),b(i,t)&&(l<h||l===h&&(i.x>n.x||i.x===n.x&&p(n,i)))&&(n=i,h=l)),i=i.next}while(i!==c);return n}(t,e);if(!n)return e;var r=w(n,t);return i(r,r.next),i(n,n.next)}function p(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function h(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&m(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||v(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,n,i){var r=S(g(t,e,n)),o=S(g(t,e,i)),s=S(g(n,i,t)),a=S(g(n,i,e));return r!==o&&s!==a||(!(0!==r||!x(t,n,e))||(!(0!==o||!x(t,i,e))||(!(0!==s||!x(n,t,i))||!(0!==a||!x(n,e,i)))))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function S(t){return t>0?1:t<0?-1:0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var n=new P(t.i,t.x,t.y),i=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function I(t,e,n,i){var r=new P(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(A(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(A(t,c,u,n))}var p=0;for(a=0;a<i.length;a+=3){var d=i[a]*n,h=i[a+1]*n,f=i[a+2]*n;p+=Math.abs((t[d]-t[f])*(t[h+1]-t[d+1])-(t[d]-t[h])*(t[f+1]-t[d+1]))}return 0===s&&0===p?0:Math.abs((p-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},44941:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(53439),r=n(23459),o=n(24067),s=n(26839);class a{constructor(t){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:e={}}=t;this.typedArrayManager=r.A,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:i,geometryBuffer:r,positionFormat:s,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=e,this.getGeometry=i,this.positionSize=r&&r.size||("XY"===s?2:3),this.buffers=n,this.normalize=l,r&&((0,o.A)(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(r),l||(n.vertexPositions=r)),this.geometryBuffer=n.vertexPositions,Array.isArray(a))for(const o of a)this._rebuildGeometry(o);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?(0,i.I)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:i,_attributeDefs:r,typedArrayManager:o}=this;for(const s in r)if(s in i)o.release(n[s]),n[s]=null;else{const i=r[s];i.copy=e,n[s]=o.allocate(n[s],t,i)}}_forEachGeometry(t,e,n){const{data:r,getGeometry:o}=this,{iterable:s,objectInfo:a}=(0,i.X)(r,e,n);for(const i of s){a.index++;t(o?o(i,a):null,a.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:i}=this;const{data:r,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=t||{},c={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const i=t&&this.normalizeGeometry(t);c[e]=i,n[e+1]=n[e]+(i?this.getGeometrySize(i):0)}),a,l),i=n[n.length-1];else if(n=r.startIndices,i=n[r.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof s.h){const t=4*this.positionSize;i=i||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;i=i||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;i=i||t.length/e}this._allocate(i,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=i;const u={};this._forEachGeometry(((t,r)=>{const o=c[r]||t;u.vertexStart=n[r],u.indexStart=e[r];const s=r<n.length-1?n[r+1]:i;u.geometrySize=s-n[r],u.geometryIndex=r,this.updateGeometryAttributes(o,u)}),a,l),this.vertexCount=e[e.length-1]}}},21515:(t,e,n)=>{n.d(e,{A:()=>Rt});var i=n(59452);function r({data:t,getIndex:e,dataRange:n,replace:i}){const{startRow:r=0,endRow:o=1/0}=n,s=t.length;let a=s,l=s;for(let p=0;p<s;p++){const n=e(t[p]);if(a>p&&n>=r&&(a=p),n>=o){l=p;break}}let c=a;const u=l-a!==i.length?t.slice(l):void 0;for(let p=0;p<i.length;p++)t[c++]=i[p];if(u){for(let e=0;e<u.length;e++)t[c++]=u[e];t.length=c}return{startRow:a,endRow:a+i.length}}var o=n(10688),s=n(84175),a=n(43349),l=n(9350),c=n(3459),u=n(12530),p=n(25337);var d=n(85930),h=n(53439);const f=()=>{},y={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},g={x:0,y:0,width:0,height:0};function v(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function m(t){return t&&(t.id||t.url)}function x(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[m(r)]={...r,x:o,y:n}}}class S{constructor(t,{onUpdate:e=f,onError:n=f}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._textureParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null,this.device=t,this.onUpdate=e,this.onError=n}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?m(t):t;return this._mapping[e]||g}setProps({loadOptions:t,autoPacking:e,iconAtlas:n,iconMapping:i,textureParameters:r}){t&&(this._loadOptions=t),void 0!==e&&(this._autoPacking=e),i&&(this._mapping=i),n&&(this._texture?.delete(),this._texture=null,this._externalTexture=n),r&&(this._textureParameters=r)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"==typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=(0,h.X)(t);for(const s of r){o.index++;const t=e(s,o),r=m(t);if(!t)throw new Error("Icon is missing.");if(!t.url)throw new Error("Icon url is missing.");i[r]||n[r]&&t.url===n[r].url||(i[r]={...t,source:s,sourceIndex:o.index})}return i}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:i,rowHeight:r,canvasHeight:o}=function({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[m(l)]){const{height:t,width:c}=l;i+c+e>s&&(x(n,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+c+e,o=Math.max(o,t)}}return a.length>0&&x(n,a,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:(l=o+r+e,Math.pow(2,Math.ceil(Math.log2(l))))};var l}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=r,this._mapping=t,this._xOffset=e,this._yOffset=i,this._canvasHeight=o,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._textureParameters||y})),this._texture.height!==this._canvasHeight&&(this._texture=function(t,e,n,i){const{width:r,height:o,device:s}=t,a=s.createTexture({format:"rgba8unorm",width:e,height:n,sampler:i}),l=s.createCommandEncoder();return l.copyTextureToTexture({source:t,destination:a,width:r,height:o}),l.finish(),t.destroy(),a}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||y)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of t)this._pendingCount++,(0,d.H)(n.url,this._loadOptions).then((t=>{const i=m(n),r=this._mapping[i],{x:o,y:s,width:a,height:l}=r,{data:c,width:u,height:p}=v(e,t,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-p)/2,width:u,height:p}),r.width=u,r.height=p,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const b=[0,0,0,255],w={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:b},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class I extends o.A{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\nsizeMinPixels, sizeMaxPixels\n);\nfloat instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n",fs:"#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * opacity * vColor.a;\nif (a < alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[s.A,a.A]})}initializeState(){this.state={iconManager:new S(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:b},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:i}=t,r=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=e,{iconManager:u}=this.state;if("string"==typeof o)return;const p=o||this.internalState.isAsyncPropLoading("iconAtlas");u.setProps({loadOptions:e.loadOptions,autoPacking:!p,iconAtlas:o,iconMapping:p?s:null,textureParameters:c}),p?n.iconMapping!==e.iconMapping&&r.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&u.packIcons(a,l),i.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),r.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:e,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:r,billboard:o,alphaCutoff:s}=this.props,{iconManager:a}=this.state,c=a.getTexture();if(c){const a=this.state.model;a.setBindings({iconsTexture:c}),a.setUniforms(t),a.setUniforms({iconsTextureDim:[c.width,c.height],sizeUnits:l.p5[r],sizeScale:e,sizeMinPixels:n,sizeMaxPixels:i,billboard:o,alphaCutoff:s}),a.draw(this.context.renderPass)}}_getModel(){return new u.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new p.V({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([-1,-1,1,-1,-1,1,1,1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){const e=this.getCurrentLayer()?.props.onIconError;e?e(t):c.A.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:i=e/2,anchorY:r=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-i,n/2-r]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:i,height:r}=this.state.iconManager.getIconMapping(t);return[e,n,i,r]}}I.defaultProps=w,I.layerName="IconLayer";const _=I,P=[0,0,0,255],A={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:P},getLineColor:{type:"accessor",value:P},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class C extends o.A{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-vertex-shader\nin vec3 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceRadius;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout vec2 unitPosition;\nout float innerUnitRadius;\nout float outerRadiusPixels;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nouterRadiusPixels = clamp(\nproject_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\nradiusMinPixels, radiusMaxPixels\n);\nfloat lineWidthPixels = clamp(\nproject_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\nlineWidthMinPixels, lineWidthMaxPixels\n);\nouterRadiusPixels += stroked * lineWidthPixels / 2.0;\nfloat edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\nunitPosition = edgePadding * positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\ninnerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\nif (billboard) {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = edgePadding * positions * outerRadiusPixels;\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-fragment-shader\nprecision highp float;\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin vec2 unitPosition;\nin float innerUnitRadius;\nin float outerRadiusPixels;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition;\nfloat distToCenter = length(unitPosition) * outerRadiusPixels;\nfloat inCircle = antialiasing ?\nsmoothedge(distToCenter, outerRadiusPixels) :\nstep(distToCenter, outerRadiusPixels);\nif (inCircle == 0.0) {\ndiscard;\n}\nif (stroked > 0.5) {\nfloat isLine = antialiasing ?\nsmoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\nstep(innerUnitRadius * outerRadiusPixels, distToCenter);\nif (filled) {\nfragColor = mix(vFillColor, vLineColor, isLine);\n} else {\nif (isLine == 0.0) {\ndiscard;\n}\nfragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n}\n} else if (!filled) {\ndiscard;\n} else {\nfragColor = vFillColor;\n}\nfragColor.a *= inCircle;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[s.A,a.A]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t),t.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{radiusUnits:e,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:r,stroked:o,filled:s,billboard:a,antialiasing:c,lineWidthUnits:u,lineWidthScale:p,lineWidthMinPixels:d,lineWidthMaxPixels:h}=this.props,f=this.state.model;f.setUniforms(t),f.setUniforms({stroked:o?1:0,filled:s,billboard:a,antialiasing:c,radiusUnits:l.p5[e],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:r,lineWidthUnits:l.p5[u],lineWidthScale:p,lineWidthMinPixels:d,lineWidthMaxPixels:h}),f.draw(this.context.renderPass)}_getModel(){return new u.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new p.V({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0])}}}),isInstanced:!0})}}C.defaultProps=A,C.layerName="ScatterplotLayer";const T=C,L=.75,M=[];class O extends _{getShaders(){return{...super.getShaders(),fs:"#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf) {\nfloat distance = alpha;\nalpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\nif (outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\ncolor = mix(outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(t,{index:e,target:n})=>this.encodePickingColor(e,n)}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:i}=e;i!==n.outlineColor&&(i=i.map((t=>t/255)),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!e.sdf&&e.outlineWidth&&c.A.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(t){const{sdf:e,smoothing:n,outlineWidth:i}=this.props,{outlineColor:r}=this.state,o=i?Math.max(n,L*(1-i)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:L,outlineBuffer:o,gamma:n,sdf:Boolean(e),outlineColor:r},super.draw(t),e&&i){const{iconManager:t}=this.state,e=t.getTexture(),n=this.state.model;e&&(n.setUniforms({outlineBuffer:L}),n.draw(this.context.renderPass))}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):M}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):M}}O.defaultProps={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},O.layerName="MultiIconLayer";const U=O,D=1e20;class F{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=i,this.radius=n;const a=this.size=t+4*e,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${s} ${o} ${t}px ${r}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=a+2*this.buffer,u=l+2*this.buffer,p=Math.max(c*u,0),d=new Uint8ClampedArray(p),h={data:d,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return h;const{ctx:f,buffer:y,gridInner:g,gridOuter:v}=this;f.clearRect(y,y,a,l),f.fillText(t,y,y+s);const m=f.getImageData(y,y,a,l);v.fill(D,0,p),g.fill(0,0,p);for(let x=0;x<l;x++)for(let t=0;t<a;t++){const e=m.data[4*(x*a+t)+3]/255;if(0===e)continue;const n=(x+y)*c+t+y;if(1===e)v[n]=0,g[n]=D;else{const t=.5-e;v[n]=t>0?t*t:0,g[n]=t<0?t*t:0}}z(v,0,0,c,u,c,this.f,this.v,this.z),z(g,y,y,a,l,c,this.f,this.v,this.z);for(let x=0;x<p;x++){const t=Math.sqrt(v[x])-Math.sqrt(g[x]);d[x]=Math.round(255-255*(t/this.radius+this.cutoff))}return h}}function z(t,e,n,i,r,o,s,a,l){for(let c=e;c<e+i;c++)B(t,n*o+c,o,r,s,a,l);for(let c=n;c<n+r;c++)B(t,c*o+e,1,i,s,a,l)}function B(t,e,n,i,r,o,s){o[0]=0,s[0]=-D,s[1]=D,r[0]=t[e];for(let a=1,l=0,c=0;a<i;a++){r[a]=t[e+a*n];const i=a*a;do{const t=o[l];c=(r[a]-r[t]+i-t*t)/(a-t)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=D}for(let a=0,l=0;a<i;a++){for(;s[l+1]<a;)l++;const i=o[l],c=a-i;t[e+a*n]=r[i]+c*c}}const E=[];function N(t,e,n,i){let r=0;for(let o=e;o<n;o++){const e=t[o];r+=i[e]?.layoutWidth||0}return r}function Z(t,e,n,i,r,o){let s=e,a=0;for(let l=e;l<n;l++){const e=N(t,l,l+1,r);a+e>i&&(s<l&&o.push(l),s=l,a=0),a+=e}return a}function k(t,e,n,i,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?Z(t,r,o,n,i,s):function(t,e,n,i,r,o){let s=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if(" "===t[u]?l=u+1:" "!==t[u+1]&&u+1!==n||(l=u+1),l>a){let e=N(t,a,l,r);c+e>i&&(s<a&&(o.push(a),s=a,c=0),e>i&&(e=Z(t,a,l,i,r,o),s=o[o.length-1])),a=l,c+=e}}(t,r,o,n,i,s),s}function R(t,e,n,i,r,o){let s=0,a=0;for(let l=e;l<n;l++){const e=t[l],n=i[e];n?(a||(a=n.layoutHeight),r[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(c.A.warn(`Missing character: ${e} (${e.codePointAt(0)})`)(),r[l]=s,s+=32)}o[0]=s,o[1]=a}class j{constructor(t=5){this._cache={},this._order=[],this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const W={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let V=new j(3);function G(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function $(t,e,n,i){t.font=`${i} ${n}px ${e}`,t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class H{constructor(){this.props={...W}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=V.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),n=V.get(this._key);if(n&&0===e.size)return void(this._atlas!==n&&(this._atlas=n));const i=this._generateFontAtlas(e,n);this._atlas=i,V.set(this._key,i)}_generateFontAtlas(t,e){const{fontFamily:n,fontWeight:i,fontSize:r,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=e&&e.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});$(u,n,r,i);const{mapping:p,canvasHeight:d,xOffset:h,yOffset:f}=function({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let l=0,c=s;const u=n+2*i;for(const d of t)if(!o[d]){const t=e(d);c+t+2*i>r&&(c=0,l++),o[d]={x:c+i,y:a+l*u+i,width:t,height:u,layoutWidth:t,layoutHeight:n},c+=t+2*i}return{mapping:o,xOffset:c,yOffset:a+l*u,canvasHeight:(p=a+(l+1)*u,Math.pow(2,Math.ceil(Math.log2(p))))};var p}({getFontWidth:t=>u.measureText(t).width,fontHeight:1.2*r,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(c.height!==d){const t=u.getImageData(0,0,c.width,c.height);c.height=d,u.putImageData(t,0,0)}if($(u,n,r,i),s){const e=new F({fontSize:r,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:`${i}`});for(const n of t){const{data:t,width:i,height:o,glyphTop:s}=e.draw(n);p[n].width=i,p[n].layoutOffsetY=.9*r-s;const a=u.createImageData(i,o);G(t,a),u.putImageData(a,p[n].x,p[n].y)}}else for(const y of t)u.fillText(y,p[y].x,p[y].y+o+.9*r);return{xOffset:h,yOffset:f,mapping:p,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:i,sdf:r,radius:o,cutoff:s}=this.props;return r?`${t} ${e} ${n} ${i} ${o} ${s}`:`${t} ${e} ${n} ${i}`}}const K={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Y extends o.A{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\nsizeMinPixels, sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nuniform bool stroked;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec2 pixelPosition = uv * dimensions;\nif (stroked) {\nfloat distToEdge = min(\nmin(pixelPosition.x, dimensions.x - pixelPosition.x),\nmin(pixelPosition.y, dimensions.y - pixelPosition.y)\n);\nfloat isBorder = smoothedge(distToEdge, vLineWidth);\nfragColor = mix(vFillColor, vLineColor, isBorder);\n} else {\nfragColor = vFillColor;\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[s.A,a.A]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;e.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{billboard:e,sizeScale:n,sizeUnits:i,sizeMinPixels:r,sizeMaxPixels:o,getLineWidth:s}=this.props;let{padding:a}=this.props;a.length<4&&(a=[a[0],a[1],a[0],a[1]]);const c=this.state.model;c.setUniforms(t),c.setUniforms({billboard:e,stroked:Boolean(s),padding:a,sizeUnits:l.p5[i],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:o}),c.draw(this.context.renderPass)}_getModel(){return new u.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new p.V({topology:"triangle-fan-webgl",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}Y.defaultProps=K,Y.layerName="TextBackgroundLayer";const J=Y,Q={start:1,middle:0,end:-1},X={top:1,center:0,bottom:-1},q=[0,0,0,255],tt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:q},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:W.characterSet},fontFamily:W.fontFamily,fontWeight:W.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:q},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:q},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class et extends i.A{constructor(){super(...arguments),this.getBoundingRect=(t,e)=>{let{size:[n,i]}=this.transformParagraph(t,e);const{fontSize:r}=this.state.fontAtlasManager.props;n/=r,i/=r;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(Q["function"==typeof o?o(t,e):o]-1)*n/2,(X["function"==typeof s?s(t,e):s]-1)*i/2,n,i]},this.getIconOffsets=(t,e)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:r,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(t,e),c=Q["function"==typeof n?n(t,e):n],u=X["function"==typeof i?i(t,e):i],p=r.length,d=new Array(2*p);let h=0;for(let f=0;f<p;f++){const t=(1-c)*(a-s[f])/2;d[h++]=(c-1)*a/2+t+r[f],d[h++]=(u-1)*l/2+o[f]}return d}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new H},this.props.maxWidth>0&&c.A.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:r}=this.state,o={...t,characterSet:r,fontFamily:e,fontWeight:n};if(!i.mapping)return i.setProps(o),!0;for(const s in o)if(o[s]!==i.props[s])return i.setProps(o),!0;return!1}_updateText(){const{data:t,characterSet:e}=this.props,n=t.attributes?.getText;let i,{getText:r}=this.props,o=t.startIndices;const s="auto"===e&&new Set;if(n&&o){const{texts:e,characterCount:a}=function({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,l=i?i/s:0,c=r[e]||Math.ceil((t.length-l)/a),u=o&&new Set,p=new Array(e);let d=t;if(a>1||l>0){d=new(0,t.constructor)(c);for(let e=0;e<c;e++)d[e]=t[e*a+l]}for(let h=0;h<e;h++){const t=r[h],e=r[h+1]||c,n=d.subarray(t,e);p[h]=String.fromCodePoint.apply(null,n),u&&n.forEach(u.add,u)}if(u)for(const h of u)o.add(String.fromCodePoint(h));return{texts:p,characterCount:c}}({...ArrayBuffer.isView(n)?{value:n}:n,length:t.length,startIndices:o,characterSet:s});i=a,r=(t,{index:n})=>e[n]}else{const{iterable:e,objectInfo:n}=(0,h.X)(t);o=[0],i=0;for(const t of e){n.index++;const e=Array.from(r(t,n)||"");s&&e.forEach(s.add,s),i+=e.length,o.push(i)}}this.setState({getText:r,startIndices:o,numInstances:i,characterSet:s||e})}transformParagraph(t,e){const{fontAtlasManager:n}=this.state,i=n.mapping,r=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,p=[0,0],d=[0,0];let h=0,f=0,y=0;for(let g=0;g<=s;g++){const t=o[g];if("\n"!==t&&g!==s||(y=g),y>f){const t=u?k(o,n,i,r,f,y):E;for(let n=0;n<=t.length;n++){const i=0===n?f:t[n-1],s=n<t.length?t[n]:y;R(o,i,s,r,a,d);for(let t=i;t<s;t++){const e=o[t],n=r[e]?.layoutOffsetY||0;l[t]=h+d[1]/2+n,c[t]=d[0]}h+=d[1]*e,p[0]=Math.max(p[0],d[0])}f=y}"\n"===t&&(a[f]=0,l[f]=0,c[f]=0,f++)}return p[1]=h,{x:a,y:l,rowWidth:c,size:p}}(r(t,e)||"",s,o,a*n.props.fontSize,i)}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:i,atlas:r,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:p,getAngle:d,getPixelOffset:h,getBackgroundColor:f,getBorderColor:y,getBorderWidth:g,backgroundPadding:v,background:m,billboard:x,fontSettings:S,outlineWidth:b,outlineColor:w,sizeScale:I,sizeUnits:_,sizeMinPixels:P,sizeMaxPixels:A,transitions:C,updateTriggers:T}=this.props,L=this.getSubLayerClass("characters",U),M=this.getSubLayerClass("background",J);return[m&&new M({getFillColor:f,getLineColor:y,getLineWidth:g,padding:v,getPosition:c,getSize:p,getAngle:d,getPixelOffset:h,billboard:x,sizeScale:I,sizeUnits:_,sizeMinPixels:P,sizeMaxPixels:A,transitions:C&&{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:T.getPosition,getAngle:T.getAngle,getSize:T.getSize,getFillColor:T.getBackgroundColor,getLineColor:T.getBorderColor,getLineWidth:T.getBorderWidth,getPixelOffset:T.getPixelOffset,getBoundingRect:{getText:T.getText,getTextAnchor:T.getTextAnchor,getAlignmentBaseline:T.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new L({sdf:S.sdf,smoothing:Number.isFinite(S.smoothing)?S.smoothing:W.smoothing,outlineWidth:b/(S.radius||W.radius),outlineColor:w,iconAtlas:r,iconMapping:o,getPosition:c,getColor:u,getSize:p,getAngle:d,getPixelOffset:h,billboard:x,sizeScale:I*i,sizeUnits:_,sizeMinPixels:P*i,sizeMaxPixels:A*i,transitions:C&&{getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:T.getText,getPosition:T.getPosition,getAngle:T.getAngle,getColor:T.getColor,getSize:T.getSize,getPixelOffset:T.getPixelOffset,getIconOffsets:{getTextAnchor:T.getTextAnchor,getAlignmentBaseline:T.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){c.A.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),V=new j(t)}(t)}}et.defaultProps=tt,et.layerName="TextLayer";const nt=et;var it=n(87167),rt=n(27586),ot=n(55230),st=n(1746);const at=st.rJ.CLOCKWISE,lt=st.rJ.COUNTER_CLOCKWISE,ct={isClosed:!0};function ut(t){return"positions"in t?t.positions:t}function pt(t){return"holeIndices"in t?t.holeIndices:null}function dt(t,e,n,i,r){let o=e;const s=n.length;for(let a=0;a<s;a++)for(let e=0;e<i;e++)t[o++]=n[a][e]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let a=0;a<i;a++)t[o++]=n[0][a]||0;return ct.start=e,ct.end=o,ct.size=i,(0,st.UD)(t,r,ct),o}function ht(t,e,n,i,r=0,o,s){const a=(o=o||n.length)-r;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[r+c];if(!function(t,e,n,i){for(let r=0;r<e;r++)if(t[n+r]!==t[i-e+r])return!1;return!0}(n,i,r,o))for(let c=0;c<i;c++)t[l++]=n[r+c];return ct.start=e,ct.end=l,ct.size=i,(0,st.UD)(t,s,ct),l}function ft(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],i=[];if("positions"in t){const{positions:r,holeIndices:o}=t;if(o){let t=0;for(let s=0;s<=o.length;s++)t=ht(n,t,r,e,o[s-1],o[s],0===s?at:lt),i.push(t);return i.pop(),{positions:n,holeIndices:i}}t=r}if(!function(t){return Array.isArray(t[0])}(t))return ht(n,0,t,e,0,n.length,at),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let r=0;for(const[o,s]of t.entries())r=dt(n,r,s,e,0===o?at:lt),i.push(r);return i.pop(),{positions:n,holeIndices:i}}return dt(n,0,t,e,at),n}function yt(t,e,n){const i=t.length/3;let r=0;for(let o=0;o<i;o++){const s=(o+1)%i;r+=t[3*o+e]*t[3*s+n],r-=t[3*s+e]*t[3*o+n]}return Math.abs(r/2)}function gt(t,e,n,i){const r=t.length/3;for(let o=0;o<r;o++){const r=3*o,s=t[r+0],a=t[r+1],l=t[r+2];t[r+e]=s,t[r+n]=a,t[r+i]=l}}var vt=n(44941);class mt extends vt.A{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=ft(t,this.positionSize);return this.opts.resolution?(0,st.wk)(ut(e),pt(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?(0,st.Eg)(ut(e),pt(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(xt(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return ut(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&xt(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else{const n=t;this._updateIndices(n,e),this._updatePositions(n,e),this._updateVertexValid(n,e)}}_updateIndices(t,{geometryIndex:e,vertexStart:n,indexStart:i}){const{attributes:r,indexStarts:o,typedArrayManager:s}=this;let a=r.indices;if(!a||!t)return;let l=i;const c=function(t,e,n,i){let r=pt(t);r&&(r=r.map((t=>t/e)));let o=ut(t);const s=i&&3===e;if(n){const t=o.length;o=o.slice();const i=[];for(let r=0;r<t;r+=e){i[0]=o[r],i[1]=o[r+1],s&&(i[2]=o[r+2]);const t=n(i);o[r]=t[0],o[r+1]=t[1],s&&(o[r+2]=t[2])}}if(s){const t=yt(o,0,1),e=yt(o,0,2),i=yt(o,1,2);if(!t&&!e&&!i)return[];t>e&&t>i||(e>i?(n||(o=o.slice()),gt(o,0,2,1)):(n||(o=o.slice()),gt(o,2,0,1)))}return ot(o,r,e)}(t,this.positionSize,this.opts.preproject,this.opts.full3d);a=s.allocate(a,i+c.length,{copy:!0});for(let u=0;u<c.length;u++)a[l++]=c[u]+n;o[e+1]=i+c.length,r.indices=a}_updatePositions(t,{vertexStart:e,geometrySize:n}){const{attributes:{positions:i},positionSize:r}=this;if(!i||!t)return;const o=ut(t);for(let s=e,a=0;a<n;s++,a++){const t=o[a*r],e=o[a*r+1],n=r>2?o[a*r+2]:0;i[3*s]=t,i[3*s+1]=e,i[3*s+2]=n}}_updateVertexValid(t,{vertexStart:e,geometrySize:n}){const{positionSize:i}=this,r=this.attributes.vertexValid,o=t&&pt(t);if(t&&t.edgeTypes?r.set(t.edgeTypes,e):r.fill(1,e,e+n),o)for(let s=0;s<o.length;s++)r[e+o[s]/i-1]=0;r[e+n-1]=0}}function xt(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const St="uniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\nin vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project_uCommonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (extruded) {\npos.z += props.elevations * elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",bt=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${St}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`,wt=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${St}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`,It=[0,0,0,255],_t={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:It},getLineColor:{type:"accessor",value:It},material:!0},Pt={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class At extends o.A{getShaders(t){return super.getShaders({vs:"top"===t?bt:wt,fs:"#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[s.A,rt.K,a.A]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const{viewport:t}=this.context;let{coordinateSystem:e}=this.props;const{_full3d:n}=this.props;let i;t.isGeospatial&&e===l.rf.DEFAULT&&(e=l.rf.LNGLAT),e===l.rf.LNGLAT&&(i=n?t.projectPosition.bind(t):t.projectFlat.bind(t)),this.setState({numInstances:0,polygonTesselator:new mt({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const r=this.getAttributeManager(),o=!0;r.remove(["instancePickingColors"]),r.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:Pt,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,stepMode:"dynamic",transition:Pt,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Pt,accessor:"getFillColor",defaultValue:It},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:Pt,accessor:"getLineColor",defaultValue:It},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n)}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const e=this.props.data;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw({uniforms:t}){const{extruded:e,filled:n,wireframe:i,elevationScale:r}=this.props,{topModel:o,sideModel:s,wireframeModel:a,polygonTesselator:l}=this.state,c={...t,extruded:Boolean(e),elevationScale:r};a&&i&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),a.draw(this.context.renderPass)),s&&n&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(c),s.draw(this.context.renderPass)),o&&n&&(o.setVertexCount(l.vertexCount),o.setUniforms(c),o.draw(this.context.renderPass))}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:i}=t,r=this.getAttributeManager();(i.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(this.state.models?.forEach((t=>t.destroy())),this.setState(this._getModels()),r.invalidateAll())}updateGeometry({props:t,oldProps:e,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,i=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:t,filled:e,extruded:n}=this.props;let i,r,o;if(e){const e=this.getShaders("top");e.defines.NON_INSTANCED_MODEL=1;const n=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new u.K(this.context.device,{...e,id:`${t}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:n,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const e=this.getAttributeManager().getBufferLayouts({isInstanced:!0});r=new u.K(this.context.device,{...this.getShaders("side"),id:`${t}-side`,bufferLayout:e,uniforms:{isWireframe:!1},geometry:new p.V({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),o=new u.K(this.context.device,{...this.getShaders("side"),id:`${t}-wireframe`,bufferLayout:e,uniforms:{isWireframe:!0},geometry:new p.V({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[r,o,i].filter(Boolean),topModel:i,sideModel:r,wireframeModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}At.defaultProps=_t,At.layerName="SolidPolygonLayer";const Ct=At,Tt={circle:{type:T,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:_,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:nt,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Lt={type:it.A,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Mt={type:Ct,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Ot({type:t,props:e}){const n={};for(const i in e)n[i]=t.defaultProps[e[i]];return n}function Ut(t,e){const{transitions:n,updateTriggers:i}=t.props,r={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),r.updateTriggers[s]=i[o],n&&(r.transitions[s]=n[o])),r[s]=a}return r}function Dt(t,e,n={}){const i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:o=t.length}=n;for(let s=r;s<o;s++){const n=t[s],{geometry:r}=n;if(r)if("GeometryCollection"===r.type){c.A.assert(Array.isArray(r.geometries),"GeoJSON does not have geometries array");const{geometries:t}=r;for(let r=0;r<t.length;r++){Ft(t[r],i,e,n,s)}}else Ft(r,i,e,n,s)}return i}function Ft(t,e,n,i,r){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:p}=e;if(function(t,e){let n=zt[t];c.A.assert(n,`Unknown GeoJSON type ${t}`);for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,s))switch(o){case"Point":a.push(n({geometry:t},i,r));break;case"MultiPoint":s.forEach((t=>{a.push(n({geometry:{type:"Point",coordinates:t}},i,r))}));break;case"LineString":l.push(n({geometry:t},i,r));break;case"MultiLineString":s.forEach((t=>{l.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"Polygon":u.push(n({geometry:t},i,r)),s.forEach((t=>{p.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"MultiPolygon":s.forEach((t=>{u.push(n({geometry:{type:"Polygon",coordinates:t}},i,r)),t.forEach((t=>{p.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}))}))}else c.A.warn(`${o} coordinates are malformed`)()}const zt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Bt(t){return t.geometry.coordinates}function Et(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:i,lines:r,polygons:o}=t,s=function(t,e){const n={points:null,lines:null,polygons:null};for(const i in n){const r=t[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(3*r.length);const o=[];for(let t=0;t<r.length;t++)e(r[t],o),n[i][3*t+0]=o[0],n[i][3*t+1]=o[1],n[i][3*t+2]=o[2]}return n}(t,e);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:3,value:s.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:3,value:s.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Nt=["points","linestrings","polygons"],Zt={...Ot(Tt.circle),...Ot(Tt.icon),...Ot(Tt.text),...Ot(Lt),...Ot(Mt),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class kt extends i.A{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:t,changeFlags:e}){if(!e.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:e}):this._updateStateJSON({props:t,changeFlags:e})}_updateStateBinary({props:t,changeFlags:e}){const n=Et(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:e}){const n=function(t){if(Array.isArray(t))return t;switch(c.A.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return c.A.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(t.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(e.dataChanged)){const t=this.state.features;for(const e in t)o[e]=t[e].slice(),s[e]=[];for(const a of e.dataChanged){const e=Dt(n,i,a);for(const n in t)s[n].push(r({data:o[n],getIndex:t=>t.__source.index,dataRange:a,replace:e[n]}))}}else o=Dt(n,i);const a=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:i,lineFeatures:r,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=i,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Bt,n.lines.data=r,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Bt,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Bt,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Bt,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:i}=e;return e.featureType=Nt.find((t=>i.id.startsWith(`${this.id}-${t}-`))),n>=0&&i.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e=`${this.id}-points-`,n="points"===t.featureType;for(const i of this.getSubLayers())i.id.startsWith(e)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,i="polygons-fill",r=this.shouldRenderSubLayer(i,n.polygons?.data)&&this.getSubLayerClass(i,Mt.type);if(r){const o=Ut(this,Mt.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new r(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,i="polygons-stroke",r="linestrings",o=!t&&e&&this.shouldRenderSubLayer(i,n.polygonsOutline?.data)&&this.getSubLayerClass(i,Lt.type),s=this.shouldRenderSubLayer(r,n.lines?.data)&&this.getSubLayerClass(r,Lt.type);if(o||s){const t=Ut(this,Lt.props);return[o&&new o(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=e.points.data.findIndex((t=>t.__source.index===i)));const r=new Set(t.split("+")),o=[];for(const s of r){const t=`points-${s}`,r=Tt[s],a=r&&this.shouldRenderSubLayer(t,e.points?.data)&&this.getSubLayerClass(t,r.type);if(a){const l=Ut(this,r.props);let c=e.points;if("text"===s&&n){const{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new a(l,this.getSubLayerProps({id:t,updateTriggers:l.updateTriggers,highlightedObjectIndex:i}),c))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"==typeof t?(e,n)=>{const{data:i,index:r}=n,o=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,i=t.featureIds.value[n];return-1!==n?function(t,e,n){const i={properties:{...t.properties[e]}};for(const r in t.numericProps)i.properties[r]=t.numericProps[r].value[n];return i}(t,i,n):null}(i,r);return t(o,n)}:super.getSubLayerAccessor(t)}}kt.layerName="GeoJsonLayer",kt.defaultProps=Zt;const Rt=kt},87167:(t,e,n)=>{n.d(e,{A:()=>v});var i=n(10688),r=n(84175),o=n(43349),s=n(9350),a=n(25337),l=n(12530),c=n(44941),u=n(1746);class p extends c.A{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?function(t,e,n,i){let r;if(Array.isArray(t[0])){const n=t.length*e;r=new Array(n);for(let i=0;i<t.length;i++)for(let n=0;n<e;n++)r[i*e+n]=t[i][n]||0}else r=t;return n?(0,u.Mk)(r,{size:e,gridResolution:n}):i?(0,u.Iy)(r,{size:e}):r}(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(d(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&d(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,i=!!t&&this.isClosed(t),{vertexStart:r,geometrySize:o}=e;n.fill(0,r,r+o),i?(n[r]=4,n[r+o-2]=4):(n[r]+=1,n[r+o-2]+=2),n[r+o-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:r}=e,o=new Array(3);for(let s=i,a=0;a<r;s++,a++)this.getPointOnPath(t,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,n=[]){const{positionSize:i}=this;e*i>=t.length&&(e+=1-t.length/i);const r=e*i;return n[0]=t[r],n[1]=t[r+1],n[2]=3===i&&t[r+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function d(t){return Array.isArray(t[0])}const h=[0,0,0,255],f={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:h},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},y={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class g extends i.A{getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = capType;\n} else {\nvJointType = jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\nwidthMinPixels, widthMaxPixels) / 2.0);\nvec3 width;\nif (billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nuniform float miterLimit;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[r.A,o.A]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const t=!0;this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:y,accessor:"getPath",update:this.calculatePositions,noAlloc:t,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:t},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:y,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:y,defaultValue:h},instancePickingColors:{size:4,type:"uint8",accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n)}}),this.setState({pathTesselator:new p({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,r=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:r.getPath,buffers:r,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||i.invalidateAll()}n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const e=this.props.data;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:e,capRounded:n,billboard:i,miterLimit:r,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props,u=this.state.model;u.setUniforms(t),u.setUniforms({jointType:Number(e),capType:Number(n),billboard:i,widthUnits:s.p5[o],widthScale:a,miterLimit:r,widthMinPixels:l,widthMaxPixels:c}),u.draw(this.context.renderPass)}_getModel(){return new l.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new a.V({topology:"triangle-list",attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}g.defaultProps=f,g.layerName="PathLayer";const v=g},1746:(t,e,n)=>{n.d(e,{rJ:()=>i,wk:()=>k,Eg:()=>K,Mk:()=>E,Iy:()=>H,hY:()=>a,IC:()=>s,UD:()=>r});const i={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function r(t,e,n={}){const i=function(t,e={}){return Math.sign(s(t,e))}(t,n);return i!==e&&(function(t,e){const{start:n=0,end:i=t.length,size:r=2}=e,o=(i-n)/r,s=Math.floor(o/2);for(let a=0;a<s;++a){const e=n+a*r,i=n+(o-1-a)*r;for(let n=0;n<r;++n){const r=t[e+n];t[e+n]=t[i+n],t[i+n]=r}}}(t,n),!0)}const o={x:0,y:1,z:2};function s(t,e={}){const{start:n=0,end:i=t.length,plane:r="xy"}=e,s=e.size||2;let a=0;const l=o[r[0]],c=o[r[1]];for(let o=n,u=i-s;o<i;o+=s)a+=(t[o+l]-t[u+l])*(t[o+c]+t[u+c]),u=o;return a/2}function a(t,e,n=2,i,r="xy"){const o=e&&e.length,s=o?e[0]*n:t.length;let a=l(t,0,s,n,!0,i&&i[0],r);const c=[];if(!a||a.next===a.prev)return c;let p,d,h,f,v,m,S;if(o&&(a=function(t,e,n,i,r,o){const s=[];let a,c,u,p,d;for(a=0,c=e.length;a<c;a++)u=e[a]*i,p=a<c-1?e[a+1]*i:t.length,d=l(t,u,p,i,!1,r&&r[a+1],o),d===d.next&&(d.steiner=!0),s.push(x(d));for(s.sort(y),a=0;a<s.length;a++)n=g(s[a],n);return n}(t,e,a,n,i,r)),t.length>80*n){f=d=t[0],v=h=t[1];for(let e=n;e<s;e+=n)m=t[e],S=t[e+1],m<f&&(f=m),S<v&&(v=S),m>d&&(d=m),S>h&&(h=S);p=Math.max(d-f,h-v),p=0!==p?32767/p:0}return u(a,c,n,f,v,p,0),c}function l(t,e,n,i,r,a,l){let c,u;void 0===a&&(a=s(t,{start:e,end:n,size:i,plane:l}));let p=o[l[0]],d=o[l[1]];if(r===a<0)for(c=e;c<n;c+=i)u=L(c,t[c+p],t[c+d],u);else for(c=n-i;c>=e;c-=i)u=L(c,t[c+p],t[c+d],u);return u&&I(u,u.next)&&(M(u),u=u.next),u}function c(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!I(i,i.next)&&0!==w(i.prev,i,i.next))i=i.next;else{if(M(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function u(t,e,n,i,r,o,s){if(!t)return;!s&&o&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=m(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,o,s,a,l,c=1;do{for(r=t,t=null,l=null,i=0;r;){for(i++,s=r,o=0,n=0;n<c&&(o++,s=s.nextZ,s);n++);for(a=c;o>0||a>0&&s;)0!==o&&(0===a||!s||r.z<=s.z)?(e=r,r=r.nextZ,o--):(e=s,s=s.nextZ,a--),l?l.nextZ=e:t=e,e.prevZ=l,l=e;r=s}l.nextZ=null,c*=2}while(i>1)}(r)}(t,i,r,o);let a,l,y=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,o?d(t,i,r,o):p(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),M(t),t=l.next,y=l.next;else if((t=l)===y){s?1===s?u(t=h(c(t),e,n),e,n,i,r,o,2):2===s&&f(t,e,n,i,r,o):u(c(t),e,n,i,r,o,1);break}}function p(t){const e=t.prev,n=t,i=t.next;if(w(e,n,i)>=0)return!1;const r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,c=i.y,u=r<o?r<s?r:s:o<s?o:s,p=a<l?a<c?a:c:l<c?l:c,d=r>o?r>s?r:s:o>s?o:s,h=a>l?a>c?a:c:l>c?l:c;let f=i.next;for(;f!==e;){if(f.x>=u&&f.x<=d&&f.y>=p&&f.y<=h&&S(r,a,o,l,s,c,f.x,f.y)&&w(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function d(t,e,n,i){const r=t.prev,o=t,s=t.next;if(w(r,o,s)>=0)return!1;const a=r.x,l=o.x,c=s.x,u=r.y,p=o.y,d=s.y,h=a<l?a<c?a:c:l<c?l:c,f=u<p?u<d?u:d:p<d?p:d,y=a>l?a>c?a:c:l>c?l:c,g=u>p?u>d?u:d:p>d?p:d,v=m(h,f,e,n,i),x=m(y,g,e,n,i);let b=t.prevZ,I=t.nextZ;for(;b&&b.z>=v&&I&&I.z<=x;){if(b.x>=h&&b.x<=y&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&S(a,u,l,p,c,d,b.x,b.y)&&w(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,I.x>=h&&I.x<=y&&I.y>=f&&I.y<=g&&I!==r&&I!==s&&S(a,u,l,p,c,d,I.x,I.y)&&w(I.prev,I,I.next)>=0)return!1;I=I.nextZ}for(;b&&b.z>=v;){if(b.x>=h&&b.x<=y&&b.y>=f&&b.y<=g&&b!==r&&b!==s&&S(a,u,l,p,c,d,b.x,b.y)&&w(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;I&&I.z<=x;){if(I.x>=h&&I.x<=y&&I.y>=f&&I.y<=g&&I!==r&&I!==s&&S(a,u,l,p,c,d,I.x,I.y)&&w(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function h(t,e,n){let i=t;do{const r=i.prev,o=i.next.next;!I(r,o)&&_(r,i,i.next,o)&&C(r,o)&&C(o,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),M(i),M(i.next),i=t=o),i=i.next}while(i!==t);return c(i)}function f(t,e,n,i,r,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&b(s,t)){let a=T(s,t);return s=c(s,s.next),a=c(a,a.next),u(s,e,n,i,r,o,0),void u(a,e,n,i,r,o,0)}t=t.next}s=s.next}while(s!==t)}function y(t,e){return t.x-e.x}function g(t,e){const n=function(t,e){let n=e;const i=t.x,r=t.y;let o,s=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>s&&(s=t,o=n.x<n.next.x?n:n.next,t===i))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u,p=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&S(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),C(n,t)&&(u<p||u===p&&(n.x>o.x||n.x===o.x&&v(o,n)))&&(o=n,p=u)),n=n.next}while(n!==a);return o}(t,e);if(!n)return e;const i=T(n,t);return c(i,i.next),c(n,n.next)}function v(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function m(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function x(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function S(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(C(t,e)&&C(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||I(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function I(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,i){const r=A(w(t,e,n)),o=A(w(t,e,i)),s=A(w(n,i,t)),a=A(w(n,i,e));return r!==o&&s!==a||(!(0!==r||!P(t,n,e))||(!(0!==o||!P(t,i,e))||(!(0!==s||!P(n,t,i))||!(0!==a||!P(n,e,i)))))}function P(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function C(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function T(t,e){const n=new O(t.i,t.x,t.y),i=new O(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function L(t,e,n,i){const r=new O(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}class O{constructor(t,e,n){this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=t,this.x=e,this.y=n}}function U(t,e,n,i,r=[]){let o,s;if(8&n)o=(i[3]-t[1])/(e[1]-t[1]),s=3;else if(4&n)o=(i[1]-t[1])/(e[1]-t[1]),s=1;else if(2&n)o=(i[2]-t[0])/(e[0]-t[0]),s=2;else{if(!(1&n))return null;o=(i[0]-t[0])/(e[0]-t[0]),s=0}for(let a=0;a<t.length;a++)r[a]=(1&s)===a?i[s]:o*(e[a]-t[a])+t[a];return r}function D(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function F(t,e){const n=e.length,i=t.length;if(i>0){let r=!0;for(let o=0;o<n;o++)if(t[i-n+o]!==e[o]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)t[i+r]=e[r];return!0}function z(t,e){const n=e.length;for(let i=0;i<n;i++)t[i]=e[i]}function B(t,e,n,i,r=[]){const o=i+e*n;for(let s=0;s<n;s++)r[s]=t[o+s];return r}function E(t,e){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},l=(a-s)/n;let c=[];const u=[c],p=B(t,0,n,s);let d,h;const f=j(p,r,o,[]),y=[];F(c,p);for(let g=1;g<l;g++){for(d=B(t,g,n,s,d),h=D(d,f);h;){U(p,d,h,f,y);const t=D(y,f);t&&(U(p,y,t,f,y),h=t),F(c,y),z(p,y),W(f,r,h),i&&c.length>n&&(c=[],u.push(c),F(c,p)),h=D(d,f)}F(c,d),z(p,d)}return i?u:u[0]}const N=0,Z=1;function k(t,e=null,n){if(!t.length)return[];const{size:i=2,gridResolution:r=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:t,types:s?new Array(t.length/i).fill(Z):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:t,types:e,holes:n}=l.shift();V(t,i,n[0]||t.length,c),u=j(c[0],r,o,u);const p=D(c[1],u);if(p){let r=R(t,e,i,0,n[0]||t.length,u,p);const o={pos:r[0].pos,types:r[0].types,holes:[]},a={pos:r[1].pos,types:r[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)r=R(t,e,i,n[l],n[l+1]||t.length,u,p),r[0]&&(o.holes.push(o.pos.length),o.pos=G(o.pos,r[0].pos),s&&(o.types=G(o.types,r[0].types))),r[1]&&(a.holes.push(a.pos.length),a.pos=G(a.pos,r[1].pos),s&&(a.types=G(a.types,r[1].types)))}else{const i={positions:t};s&&(i.edgeTypes=e),n.length&&(i.holeIndices=n),a.push(i)}}return a}function R(t,e,n,i,r,o,s){const a=(r-i)/n,l=[],c=[],u=[],p=[],d=[];let h,f,y;const g=B(t,a-1,n,i);let v=Math.sign(8&s?g[1]-o[3]:g[0]-o[2]),m=e&&e[a-1],x=0,S=0;for(let b=0;b<a;b++)h=B(t,b,n,i,h),f=Math.sign(8&s?h[1]-o[3]:h[0]-o[2]),y=e&&e[i/n+b],f&&v&&v!==f&&(U(g,h,s,o,d),F(l,d)&&u.push(m),F(c,d)&&p.push(m)),f<=0?(F(l,h)&&u.push(y),x-=f):u.length&&(u[u.length-1]=N),f>=0?(F(c,h)&&p.push(y),S+=f):p.length&&(p[p.length-1]=N),z(g,h),v=f,m=y;return[x?{pos:l,types:e&&u}:null,S?{pos:c,types:e&&p}:null]}function j(t,e,n,i){const r=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=r,i[1]=o,i[2]=r+e,i[3]=o+e,i}function W(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function V(t,e,n,i){let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=e){const e=t[l],n=t[l+1];r=e<r?e:r,o=e>o?e:o,s=n<s?n:s,a=n>a?n:a}return i[0][0]=r,i[0][1]=s,i[1][0]=o,i[1][1]=a,i}function G(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}const $=85.051129;function H(t,e){const{size:n=2,startIndex:i=0,endIndex:r=t.length,normalize:o=!0}=e||{},s=t.slice(i,r);Q(s,n,0,r-i);const a=E(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)X(l,n);return a}function K(t,e=null,n){const{size:i=2,normalize:r=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let l=0,c=0;for(let p=0;p<=e.length;p++){const r=e[p]||t.length,o=c,u=Y(t,i,l,r);for(let e=u;e<r;e++)s[c++]=t[e];for(let e=l;e<u;e++)s[c++]=t[e];Q(s,i,o,c),J(s,i,o,c,n?.maxLatitude),l=r,a[p]=c}a.pop();const u=k(s,a,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(r)for(const p of u)X(p.positions,i);return u}function Y(t,e,n,i){let r=-1,o=-1;for(let s=n+1;s<i;s+=e){const e=Math.abs(t[s]);e>r&&(r=e,o=s-1)}return o}function J(t,e,n,i,r=$){const o=t[n],s=t[i-e];if(Math.abs(o-s)>180){const i=B(t,0,e,n);i[0]+=360*Math.round((s-o)/360),F(t,i),i[1]=Math.sign(i[1])*r,F(t,i),i[0]=o,F(t,i)}}function Q(t,e,n,i){let r,o=t[0];for(let s=n;s<i;s+=e){r=t[s];const e=r-o;(e>180||e<-180)&&(r-=360*Math.round(e/360)),t[s]=o=r}}function X(t,e){let n;const i=t.length/e;for(let o=0;o<i&&(n=t[o*e],(n+180)%360==0);o++);const r=360*-Math.round(n/360);if(0!==r)for(let o=0;o<i;o++)t[o*e]+=r}},14957:(t,e,n)=>{n.d(e,{B_:()=>u,Hg:()=>h});var i=n(46252),r=n(41559),o=n(64570),s=n(37589),a=n(54109),l=n(40945),c=n(96566);class u{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){const{type:t}=this;return s.pe.isSparseUnion(t)||s.pe.isDenseUnion(t)?this.children.some((t=>t.nullable)):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){if(s.pe.isUnion(this.type))return this.children.reduce(((t,e)=>t+e.nullCount),0);let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=0===t.length?0:this.length-(0,a.pO)(t,this.offset,this.offset+this.length)),e}constructor(t,e,n,i,r,o=[],a){let l;this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof u?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=(0,s.nO)(t),r&&((l=r[0])&&(this.valueOffsets=l),(l=r[1])&&(this.values=l),(l=r[2])&&(this.nullBitmap=l),(l=r[3])&&(this.typeIds=l)))}getValid(t){const{type:e}=this;if(s.pe.isUnion(e)){const n=e,i=this.children[n.typeIdToChildIndex[this.typeIds[t]]],o=n.mode===r.R.Dense?this.valueOffsets[t]:t;return i.getValid(o)}if(this.nullable&&this.nullCount>0){const e=this.offset+t;return!!(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){let n;const{type:i}=this;if(s.pe.isUnion(i)){const o=i,s=this.children[o.typeIdToChildIndex[this.typeIds[t]]],a=o.mode===r.R.Dense?this.valueOffsets[t]:t;n=s.getValid(a),s.setValid(a,e)}else{let{nullBitmap:i}=this;const{offset:r,length:o}=this,s=r+t,l=1<<s%8,c=s>>3;(!i||i.byteLength<=c)&&(i=new Uint8Array((r+o+63&-64)>>3).fill(255),this.nullCount>0?(i.set((0,a.mu)(r,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:i})):Object.assign(this,{nullBitmap:i,_nullCount:0}));const u=i[c];n=!!(u&l),i[c]=e?u|l:u&~l}return n!==!!e&&(this._nullCount=this.nullCount+(e?-1:1)),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,r=this,o=this.children){return new u(t,e,n,i,r,o,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,o=+(0===this._nullCount)-1,s=16===i?n:1,a=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,o,a,0===r.length||this.valueOffsets?r:this._sliceChildren(r,s*t,s*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===o.ZU.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set((0,a.mu)(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[o.NZ.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:s}=this;return(r=s[o.NZ.TYPE])&&(s[o.NZ.TYPE]=r.subarray(t,t+e)),(r=s[o.NZ.OFFSET])&&(s[o.NZ.OFFSET]=r.subarray(t,t+e+1))||(r=s[o.NZ.DATA])&&(s[o.NZ.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),s}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}u.prototype.children=Object.freeze([]);class p extends l.l{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new u(e,n,i,i)}visitBool(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length>>3,nullCount:s=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,s,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,s,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,s,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.data),r=(0,c.Fo)(t.nullBitmap),o=(0,c.f$)(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,s,a,[o,i,r])}visitLargeUtf8(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.data),r=(0,c.Fo)(t.nullBitmap),o=(0,c.gW)(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,s,a,[o,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.data),r=(0,c.Fo)(t.nullBitmap),o=(0,c.f$)(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,s,a,[o,i,r])}visitLargeBinary(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.data),r=(0,c.Fo)(t.nullBitmap),o=(0,c.gW)(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,s,a,[o,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=(0,c.Fo)(t.nullBitmap),o=(0,c.f$)(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,s,a,[o,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=(0,c.Fo)(t.nullBitmap),{length:o=i.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:s=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,s,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=(0,c.Q_)(e.ArrayType,t.typeIds),{length:o=r.length,nullCount:a=-1}=t;if(s.pe.isSparseUnion(e))return new u(e,n,o,a,[void 0,void 0,void 0,r],i);const l=(0,c.f$)(t.valueOffsets);return new u(e,n,o,a,[l,void 0,void 0,r],i)}visitDictionary(t){const{type:e,offset:n=0}=t,r=(0,c.Fo)(t.nullBitmap),o=(0,c.Q_)(e.indices.ArrayType,t.data),{dictionary:s=new i.M([(new p).visit({type:e.dictionary})])}=t,{length:a=o.length,nullCount:l=(t.nullBitmap?-1:0)}=t;return new u(e,n,a,l,[void 0,o,r],[],s)}visitInterval(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,r,i])}visitDuration(t){const{type:e,offset:n=0}=t,i=(0,c.Fo)(t.nullBitmap),r=(0,c.Q_)(e.ArrayType,t.data),{length:o=r.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,s,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new p).visit({type:e.valueType})}=t,r=(0,c.Fo)(t.nullBitmap),{length:o=i.length/(0,s.nO)(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,o,a,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new p).visit({type:e.childType})}=t,r=(0,c.Fo)(t.nullBitmap),o=(0,c.f$)(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new u(e,n,s,a,[o,void 0,r],[i])}}const d=new p;function h(t){return d.visit(t)}},64570:(t,e,n)=>{var i,r;n.d(e,{NZ:()=>r,ZU:()=>i}),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"}(i||(i={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(r||(r={}))},34603:(t,e,n)=>{var i;n.d(e,{f:()=>i}),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(i||(i={}))},37730:(t,e,n)=>{var i;n.d(e,{a:()=>i}),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(i||(i={}))},71916:(t,e,n)=>{var i;n.d(e,{W:()=>i}),function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(i||(i={}))},67144:(t,e,n)=>{var i;n.d(e,{j:()=>i}),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(i||(i={}))},46734:(t,e,n)=>{var i;n.d(e,{y:()=>i}),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(i||(i={}))},41559:(t,e,n)=>{var i;n.d(e,{R:()=>i}),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(i||(i={}))},80382:(t,e,n)=>{n.d(e,{M:()=>m,g:()=>y});var i,r,o=n(14957),s=n(62559),a=n(46252),l=n(9624),c=n(37589),u=n(40881),p=n(30414),d=n(99468),h=n(20599),f=n(39754);class y{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof l.S))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,o.Hg)({nullCount:0,type:new c._k(this.schema.fields),children:this.schema.fields.map((t=>(0,o.Hg)({type:t.type,nullCount:0})))})]=t,!(this.data instanceof o.B_))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=g(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:i,length:r}=Object.keys(e).reduce(((t,n,i)=>(t.children[i]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[i]=l.D.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new l.S(n),a=(0,o.Hg)({type:new c._k(n),length:r,children:i,nullCount:0});[this.schema,this.data]=g(s,a.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=v(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return p.K.visit(this.data,t)}at(t){return this.get((0,u.nU)(t,this.numRows))}set(t,e){return d.KJ.visit(this.data,t,e)}indexOf(t,e){return h.K.visit(this.data,t,e)}[Symbol.iterator](){return f.K.visit(new a.M([this.data]))}toArray(){return[...this]}concat(...t){return new s.XI(this.schema,[this,...t])}slice(t,e){const[n]=new a.M([this.data]).slice(t,e).data;return new y(this.schema,n)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new a.M([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){e||(e=new a.M([(0,o.Hg)({type:new c.Uv,length:this.numRows})]));const r=n.fields.slice(),s=i.children.slice(),u=r[t].clone({type:e.type});[r[t],s[t]]=[u,e.data[0]],n=new l.S(r,new Map(this.schema.metadata)),i=(0,o.Hg)({type:new c._k(r),children:s})}return new y(n,i)}select(t){const e=this.schema.select(t),n=new c._k(e.fields),i=[];for(const r of t){const t=this.schema.fields.findIndex((t=>t.name===r));~t&&(i[t]=this.data.children[t])}return new y(e,(0,o.Hg)({type:n,length:this.numRows,children:i}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map((t=>this.data.children[t])).filter(Boolean),i=(0,o.Hg)({type:new c._k(e.fields),length:this.numRows,children:n});return new y(e,i)}}function g(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[l,c]of t.fields.entries()){const t=e[l];t&&t.length===n||(r[l]=c.clone({nullable:!0}),s[l]=null!==(i=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:(0,o.Hg)({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),(0,o.Hg)({type:new c._k(r),length:n,children:s})]}function v(t,e,n=new Map){var i,r;if((null!==(i=null==t?void 0:t.length)&&void 0!==i?i:0)>0&&(null==t?void 0:t.length)===(null==e?void 0:e.length))for(let o=-1,s=t.length;++o<s;){const{type:i}=t[o],s=e[o];for(const t of[s,...(null===(r=null==s?void 0:s.dictionary)||void 0===r?void 0:r.data)||[]])v(i.children,null==t?void 0:t.children,n);if(c.pe.isDictionary(i)){const{id:t}=i;if(n.has(t)){if(n.get(t)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null==s?void 0:s.dictionary)&&n.set(t,s.dictionary)}}return n}i=Symbol.toStringTag,y[i]=((r=y.prototype)._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,"RecordBatch");class m extends y{constructor(t){const e=t.fields.map((t=>(0,o.Hg)({type:t.type})));super(t,(0,o.Hg)({type:new c._k(t.fields),nullCount:0,children:e}))}}},12740:(t,e,n)=>{n.d(e,{Rt:()=>p,wQ:()=>a});var i=n(46252),r=n(29624),o=n(30414),s=n(99468);const a=Symbol.for("keys"),l=Symbol.for("vals"),c=Symbol.for("kKeysAsStrings"),u=Symbol.for("_kKeysAsStrings");class p{constructor(t){return this[a]=new i.M([t.children[0]]).memoize(),this[l]=t.children[1],new Proxy(this,new h)}get[c](){return this[u]||(this[u]=Array.from(this[a].toArray(),String))}[Symbol.iterator](){return new d(this[a],this[l])}get size(){return this[a].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[a],e=this[l],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=o.K.visit(e,i);return n}toString(){return`{${[...this].map((([t,e])=>`${(0,r.U)(t)}: ${(0,r.U)(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class d{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),o.K.visit(this.vals,t)]})}}class h{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[c]}has(t,e){return t[c].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[c].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[c].indexOf(e);if(-1!==n){const i=o.K.visit(Reflect.get(t,l),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[c].indexOf(e);return-1!==i?(s.KJ.visit(Reflect.get(t,l),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}Object.defineProperties(p.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[a]:{writable:!0,enumerable:!1,configurable:!1,value:null},[l]:{writable:!0,enumerable:!1,configurable:!1,value:null},[u]:{writable:!0,enumerable:!1,configurable:!1,value:null}})},36933:(t,e,n)=>{n.d(e,{_:()=>l});var i=n(29624),r=n(30414),o=n(99468);const s=Symbol.for("parent"),a=Symbol.for("rowIndex");class l{constructor(t,e){return this[s]=t,this[a]=e,new Proxy(this,new u)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[a],e=this[s],n=e.type.children,i={};for(let o=-1,s=n.length;++o<s;)i[n[o].name]=r.K.visit(e.children[o],t);return i}toString(){return`{${[...this].map((([t,e])=>`${(0,i.U)(t)}: ${(0,i.U)(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new c(this[s],this[a])}}class c{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,r.K.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(l.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[s]:{writable:!0,enumerable:!1,configurable:!1,value:null},[a]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class u{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[s].type.children.map((t=>t.name))}has(t,e){return-1!==t[s].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[s].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[s].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=r.K.visit(t[s].children[n],t[a]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[s].type.children.findIndex((t=>t.name===e));return-1!==i?(o.KJ.visit(t[s].children[i],t[a],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}},9624:(t,e,n)=>{n.d(e,{D:()=>s,S:()=>o});var i=n(71916),r=n(37589);class o{constructor(t=[],e,n,r=i.W.V5){this.fields=t||[],this.metadata=e||new Map,n||(n=l(this.fields)),this.dictionaries=n,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new o(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new o(e,this.metadata)}assign(...t){const e=t[0]instanceof o?t[0]:Array.isArray(t[0])?new o(t[0]):new o(t),n=[...this.fields],i=a(a(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:a(a(new Map,n[e].metadata),t.metadata)}))&&!1})),s=l(r,new Map);return new o([...n,...r],i,new Map([...this.dictionaries,...s]))}}o.prototype.fields=null,o.prototype.metadata=null,o.prototype.dictionaries=null;class s{static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new s(`${e}`,n,i,r)}constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,s.new(e,n,i,r)}}function a(t,e){return new Map([...t||new Map,...e||new Map])}function l(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(r.pe.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&l(i.children,e)}return e}s.prototype.type=null,s.prototype.name=null,s.prototype.nullable=null,s.prototype.metadata=null},62559:(t,e,n)=>{n.d(e,{XI:()=>D});var i=n(64570),r=n(14957),o=n(46252),s=n(9624),a=n(37589),l=n(40945);class c extends l.l{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function u(t,e){return e instanceof t.constructor}function p(t,e){return t===e||u(t,e)}function d(t,e){return t===e||u(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function h(t,e){return t===e||u(t,e)&&t.precision===e.precision}function f(t,e){return t===e||u(t,e)&&t.unit===e.unit}function y(t,e){return t===e||u(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function g(t,e){return t===e||u(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function v(t,e){return t===e||u(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&S.compareManyFields(t.children,e.children)}function m(t,e){return t===e||u(t,e)&&t.unit===e.unit}function x(t,e){return t===e||u(t,e)&&t.unit===e.unit}c.prototype.visitNull=p,c.prototype.visitBool=p,c.prototype.visitInt=d,c.prototype.visitInt8=d,c.prototype.visitInt16=d,c.prototype.visitInt32=d,c.prototype.visitInt64=d,c.prototype.visitUint8=d,c.prototype.visitUint16=d,c.prototype.visitUint32=d,c.prototype.visitUint64=d,c.prototype.visitFloat=h,c.prototype.visitFloat16=h,c.prototype.visitFloat32=h,c.prototype.visitFloat64=h,c.prototype.visitUtf8=p,c.prototype.visitLargeUtf8=p,c.prototype.visitBinary=p,c.prototype.visitLargeBinary=p,c.prototype.visitFixedSizeBinary=function(t,e){return t===e||u(t,e)&&t.byteWidth===e.byteWidth},c.prototype.visitDate=f,c.prototype.visitDateDay=f,c.prototype.visitDateMillisecond=f,c.prototype.visitTimestamp=y,c.prototype.visitTimestampSecond=y,c.prototype.visitTimestampMillisecond=y,c.prototype.visitTimestampMicrosecond=y,c.prototype.visitTimestampNanosecond=y,c.prototype.visitTime=g,c.prototype.visitTimeSecond=g,c.prototype.visitTimeMillisecond=g,c.prototype.visitTimeMicrosecond=g,c.prototype.visitTimeNanosecond=g,c.prototype.visitDecimal=p,c.prototype.visitList=function(t,e){return t===e||u(t,e)&&t.children.length===e.children.length&&S.compareManyFields(t.children,e.children)},c.prototype.visitStruct=function(t,e){return t===e||u(t,e)&&t.children.length===e.children.length&&S.compareManyFields(t.children,e.children)},c.prototype.visitUnion=v,c.prototype.visitDenseUnion=v,c.prototype.visitSparseUnion=v,c.prototype.visitDictionary=function(t,e){return t===e||u(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&S.visit(t.indices,e.indices)&&S.visit(t.dictionary,e.dictionary)},c.prototype.visitInterval=m,c.prototype.visitIntervalDayTime=m,c.prototype.visitIntervalYearMonth=m,c.prototype.visitDuration=x,c.prototype.visitDurationSecond=x,c.prototype.visitDurationMillisecond=x,c.prototype.visitDurationMicrosecond=x,c.prototype.visitDurationNanosecond=x,c.prototype.visitFixedSizeList=function(t,e){return t===e||u(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&S.compareManyFields(t.children,e.children)},c.prototype.visitMap=function(t,e){return t===e||u(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&S.compareManyFields(t.children,e.children)};const S=new c;function b(t,e){return S.compareSchemas(t,e)}var w=n(80382);function I(t,e){return function(t,e){const n=[...t.fields],i=[],o={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s=0,l=0,c=-1;const u=e.length;let p,d=[];for(;o.numBatches-- >0;){for(l=Number.POSITIVE_INFINITY,c=-1;++c<u;)d[c]=p=e[c].shift(),l=Math.min(l,p?p.length:l);Number.isFinite(l)&&(d=_(n,l,d,e,o),l>0&&(i[s++]=(0,r.Hg)({type:new a._k(n),length:l,nullCount:0,children:d.slice()})))}return[t=t.assign(n),i.map((e=>new w.g(t,e)))]}(t,e.map((t=>t.data.concat())))}function _(t,e,n,i,o){var s;const a=(e+63&-64)>>3;for(let l=-1,c=i.length;++l<c;){const c=n[l],u=null==c?void 0:c.length;if(u>=e)u===e?n[l]=c:(n[l]=c.slice(0,e),o.numBatches=Math.max(o.numBatches,i[l].unshift(c.slice(e,u-e))));else{const i=t[l];t[l]=i.clone({nullable:!0}),n[l]=null!==(s=null==c?void 0:c._changeLengthAndBackfillNullBitmap(e))&&void 0!==s?s:(0,r.Hg)({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}var P,A,C=n(66575),T=n(30414),L=n(99468),M=n(20599),O=n(39754),U=n(40881);class D{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new s.S([]),this._offsets=[0],this;let i,l;t[0]instanceof s.S&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(l=t.pop());const c=t=>{if(t){if(t instanceof w.g)return[t];if(t instanceof D)return t.batches;if(t instanceof r.B_){if(t.type instanceof a._k)return[new w.g(new s.S(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>c(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>c(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new o.M([t[e]]))),r=null!=i?i:new s.S(e.map(((t,e)=>new s.D(String(t),n[e].type,n[e].nullable)))),[,a]=I(r,n);return 0===a.length?[new w.g(t)]:a}}}return[]},u=t.flatMap((t=>c(t)));if(i=null!==(n=null!=i?i:null===(e=u[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new s.S([]),!(i instanceof s.S))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const r of u){if(!(r instanceof w.g))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!b(i,r.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=u,this._offsets=null!=l?l:(0,C.X1)(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=(0,C.IC)(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}at(t){return this.get((0,U.nU)(t,this.numRows))}set(t,e){}indexOf(t,e){return-1}[Symbol.iterator](){return this.batches.length>0?O.K.visit(new o.M(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new D(e,n.map((t=>new w.g(e,t))))}slice(t,e){const n=this.schema;[t,e]=(0,U.BS)({length:this.numRows},t,e);const i=(0,C.Zh)(this.data,this._offsets,t,e);return new D(n,i.map((t=>new w.g(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=(0,r.Hg)({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new o.M(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new o.M([(0,r.Hg)({type:new a.Uv,length:this.numRows})]));const s=n.fields.slice(),l=s[t].clone({type:e.type}),c=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[s[t],c[t]]=[l,e],[n,i]=I(n,c)}return new D(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new D(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,o]=t,s=e.findIndex((t=>t.name===n.name));return~s?o[s]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),o=[...e.map(((t,e)=>[e,i[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new D(...I(r,o))}}P=Symbol.toStringTag,D[P]=((A=D.prototype).schema=null,A.batches=[],A._offsets=new Uint32Array([0]),A._nullCount=-1,A[Symbol.isConcatSpreadable]=!0,A.isValid=(0,C.QS)(C.bQ),A.get=(0,C.QS)(T.K.getVisitFn(i.ZU.Struct)),A.set=(0,C.Xu)(L.KJ.getVisitFn(i.ZU.Struct)),A.indexOf=(0,C.i6)(M.K.getVisitFn(i.ZU.Struct)),"Table")},37589:(t,e,n)=>{n.d(e,{$G:()=>H,$b:()=>yt,AY:()=>B,Ai:()=>z,B8:()=>vt,BS:()=>Y,CG:()=>Z,Dc:()=>lt,H:()=>ct,IX:()=>ht,Jb:()=>Q,ML:()=>ut,OD:()=>tt,P_:()=>N,Pv:()=>St,R8:()=>et,Rf:()=>W,SS:()=>j,Uv:()=>F,V:()=>ot,Vw:()=>E,WD:()=>wt,Ww:()=>q,Y1:()=>bt,YE:()=>J,_k:()=>mt,bT:()=>Pt,cS:()=>G,dw:()=>gt,gP:()=>xt,gX:()=>it,gh:()=>$,jB:()=>pt,k:()=>nt,k4:()=>at,l5:()=>k,nO:()=>At,nt:()=>V,pe:()=>D,pk:()=>dt,qY:()=>st,tX:()=>ft,x:()=>X,yI:()=>K,yS:()=>rt,yv:()=>R});var i,r,o,s,a,l,c,u,p,d,h,f,y,g,v,m,x,S,b,w,I,_,P,A=n(44293),C=n(64570),T=n(41559),L=n(67144),M=n(34603),O=n(46734),U=n(37730);class D{static isNull(t){return(null==t?void 0:t.typeId)===C.ZU.Null}static isInt(t){return(null==t?void 0:t.typeId)===C.ZU.Int}static isFloat(t){return(null==t?void 0:t.typeId)===C.ZU.Float}static isBinary(t){return(null==t?void 0:t.typeId)===C.ZU.Binary}static isLargeBinary(t){return(null==t?void 0:t.typeId)===C.ZU.LargeBinary}static isUtf8(t){return(null==t?void 0:t.typeId)===C.ZU.Utf8}static isLargeUtf8(t){return(null==t?void 0:t.typeId)===C.ZU.LargeUtf8}static isBool(t){return(null==t?void 0:t.typeId)===C.ZU.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===C.ZU.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===C.ZU.Date}static isTime(t){return(null==t?void 0:t.typeId)===C.ZU.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===C.ZU.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===C.ZU.Interval}static isDuration(t){return(null==t?void 0:t.typeId)===C.ZU.Duration}static isList(t){return(null==t?void 0:t.typeId)===C.ZU.List}static isStruct(t){return(null==t?void 0:t.typeId)===C.ZU.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===C.ZU.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===C.ZU.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===C.ZU.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===C.ZU.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===C.ZU.Dictionary}static isDenseUnion(t){return D.isUnion(t)&&t.mode===T.R.Dense}static isSparseUnion(t){return D.isUnion(t)&&t.mode===T.R.Sparse}constructor(t){this.typeId=t}}i=Symbol.toStringTag,D[i]=((P=D.prototype).children=null,P.ArrayType=Array,P.OffsetArrayType=Int32Array,P[Symbol.toStringTag]="DataType");class F extends D{constructor(){super(C.ZU.Null)}toString(){return"Null"}}r=Symbol.toStringTag,F[r]=(t=>t[Symbol.toStringTag]="Null")(F.prototype);class z extends D{constructor(t,e){super(C.ZU.Int),this.isSigned=t,this.bitWidth=e}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}o=Symbol.toStringTag,z[o]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(z.prototype);class B extends z{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class E extends z{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class N extends z{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Z extends z{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class k extends z{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class R extends z{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class j extends z{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class W extends z{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(B.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(E.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(N.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Z.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(k.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(R.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(j.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(W.prototype,"ArrayType",{value:BigUint64Array});class V extends D{constructor(t){super(C.ZU.Float),this.precision=t}get ArrayType(){switch(this.precision){case L.j.HALF:return Uint16Array;case L.j.SINGLE:return Float32Array;case L.j.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}s=Symbol.toStringTag,V[s]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(V.prototype);class G extends V{constructor(){super(L.j.HALF)}}class $ extends V{constructor(){super(L.j.SINGLE)}}class H extends V{constructor(){super(L.j.DOUBLE)}}Object.defineProperty(G.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty($.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(H.prototype,"ArrayType",{value:Float64Array});class K extends D{constructor(){super(C.ZU.Binary)}toString(){return"Binary"}}a=Symbol.toStringTag,K[a]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(K.prototype);class Y extends D{constructor(){super(C.ZU.LargeBinary)}toString(){return"LargeBinary"}}l=Symbol.toStringTag,Y[l]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(Y.prototype);class J extends D{constructor(){super(C.ZU.Utf8)}toString(){return"Utf8"}}c=Symbol.toStringTag,J[c]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(J.prototype);class Q extends D{constructor(){super(C.ZU.LargeUtf8)}toString(){return"LargeUtf8"}}u=Symbol.toStringTag,Q[u]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(Q.prototype);class X extends D{constructor(){super(C.ZU.Bool)}toString(){return"Bool"}}p=Symbol.toStringTag,X[p]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(X.prototype);class q extends D{constructor(t,e,n=128){super(C.ZU.Decimal),this.scale=t,this.precision=e,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}d=Symbol.toStringTag,q[d]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(q.prototype);class tt extends D{constructor(t){super(C.ZU.Date),this.unit=t}toString(){return`Date${32*(this.unit+1)}<${M.f[this.unit]}>`}get ArrayType(){return this.unit===M.f.DAY?Int32Array:BigInt64Array}}h=Symbol.toStringTag,tt[h]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(tt.prototype);class et extends tt{constructor(){super(M.f.DAY)}}class nt extends tt{constructor(){super(M.f.MILLISECOND)}}class it extends D{constructor(t,e){super(C.ZU.Time),this.unit=t,this.bitWidth=e}toString(){return`Time${this.bitWidth}<${O.y[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}f=Symbol.toStringTag,it[f]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(it.prototype);class rt extends it{constructor(){super(O.y.SECOND,32)}}class ot extends it{constructor(){super(O.y.MILLISECOND,32)}}class st extends it{constructor(){super(O.y.MICROSECOND,64)}}class at extends it{constructor(){super(O.y.NANOSECOND,64)}}class lt extends D{constructor(t,e){super(C.ZU.Timestamp),this.unit=t,this.timezone=e}toString(){return`Timestamp<${O.y[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}y=Symbol.toStringTag,lt[y]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(lt.prototype);class ct extends lt{constructor(t){super(O.y.SECOND,t)}}class ut extends lt{constructor(t){super(O.y.MILLISECOND,t)}}class pt extends lt{constructor(t){super(O.y.MICROSECOND,t)}}class dt extends lt{constructor(t){super(O.y.NANOSECOND,t)}}class ht extends D{constructor(t){super(C.ZU.Interval),this.unit=t}toString(){return`Interval<${U.a[this.unit]}>`}}g=Symbol.toStringTag,ht[g]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(ht.prototype);class ft extends ht{constructor(){super(U.a.DAY_TIME)}}class yt extends ht{constructor(){super(U.a.YEAR_MONTH)}}class gt extends D{constructor(t){super(C.ZU.Duration),this.unit=t}toString(){return`Duration<${O.y[this.unit]}>`}}v=Symbol.toStringTag,gt[v]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(gt.prototype);class vt extends D{constructor(t){super(C.ZU.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}m=Symbol.toStringTag,vt[m]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(vt.prototype);class mt extends D{constructor(t){super(C.ZU.Struct),this.children=t}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}x=Symbol.toStringTag,mt[x]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(mt.prototype);class xt extends D{constructor(t,e,n){super(C.ZU.Union),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}S=Symbol.toStringTag,xt[S]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(xt.prototype);class St extends D{constructor(t){super(C.ZU.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}b=Symbol.toStringTag,St[b]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(St.prototype);class bt extends D{constructor(t,e){super(C.ZU.FixedSizeList),this.listSize=t,this.children=[e]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}w=Symbol.toStringTag,bt[w]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(bt.prototype);class wt extends D{constructor(t,e=!1){var n,i,r;if(super(C.ZU.Map),this.children=[t],this.keysSorted=e,t&&(t.name="entries",null===(n=null==t?void 0:t.type)||void 0===n?void 0:n.children)){const e=null===(i=null==t?void 0:t.type)||void 0===i?void 0:i.children[0];e&&(e.name="key");const n=null===(r=null==t?void 0:t.type)||void 0===r?void 0:r.children[1];n&&(n.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}I=Symbol.toStringTag,wt[I]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(wt.prototype);const It=(_t=-1,()=>++_t);var _t;class Pt extends D{constructor(t,e,n,i){super(C.ZU.Dictionary),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?It():(0,A.i)(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function At(t){const e=t;switch(t.typeId){case C.ZU.Decimal:return t.bitWidth/32;case C.ZU.Interval:return 1+e.unit;case C.ZU.FixedSizeList:return e.listSize;case C.ZU.FixedSizeBinary:return e.byteWidth;default:return 1}}_=Symbol.toStringTag,Pt[_]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Pt.prototype)},44293:(t,e,n)=>{function i(t){if("bigint"==typeof t&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function r(t,e){return i(t/e)+i(t%e)/i(e)}n.d(e,{g:()=>r,i:()=>i})},54109:(t,e,n)=>{function i(t,e,n,i){return!!(n&1<<i)}function r(t,e,n,i){return(n&1<<i)>>i}function o(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const o=new Uint8Array(r);return o.set(t%8==0?n.subarray(t>>3):s(new a(n,t,e,null,i)).subarray(0,r)),o}return n}function s(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}n.d(e,{FQ:()=>s,Jz:()=>i,kE:()=>a,mu:()=>o,pO:()=>l});class a{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function l(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const o of new a(t,e,n-e,t,r))i+=o;return i}const i=n>>3<<3,o=e+(e%8==0?0:8-e%8);return l(t,e,o)+l(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),s=void 0===n?t.byteLength:r+n;for(;s-r>=4;)i+=c(o.getUint32(r)),r+=4;for(;s-r>=2;)i+=c(o.getUint16(r)),r+=2;for(;s-r>=1;)i+=c(o.getUint8(r)),r+=1;return i}(t,o>>3,i-o>>3)}function c(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}},96566:(t,e,n)=>{n.d(e,{Fo:()=>d,Fw:()=>v,Mr:()=>a,Q_:()=>c,Yk:()=>m,f$:()=>u,gW:()=>p,tL:()=>y,vd:()=>l});var i=n(34629),r=n(51181),o=n(85982);const s="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function a(t,e,n=0,i=e.byteLength){const r=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,r),s=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return o.set(s,n),t}function l(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,o;for(let s,a,l=0,c=0,u=t.length;++l<u;)s=e[c],a=t[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset?a&&(e[++c]=a):(({byteOffset:n,byteLength:r}=s),({byteOffset:i,byteLength:o}=a),n+r<i||i+o<n?a&&(e[++c]=a):e[c]=new Uint8Array(s.buffer,n,i-n+o));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,o,s,l=0,c=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const p=n.length;++c<p;){if(r=n[c],o=r.subarray(0,Math.min(r.length,u-l)),u<=l+o.length){o.length<r.length?n[c]=r.subarray(o.length):o.length===r.length&&c++,s?a(s,o,l):s=o;break}a(s||(s=new Uint8Array(u)),o,l),l+=o.length}return[s||new Uint8Array(0),n.slice(c),i-(s?s.byteLength:0)]}function c(t,e){let n=(0,o.o_)(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=(0,r.A)(n)),n instanceof ArrayBuffer||n instanceof s?new t(n):(0,o.rv)(n)?c(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const u=t=>c(Int32Array,t),p=t=>c(BigInt64Array,t),d=t=>c(Uint8Array,t),h=t=>(t.next(),t);function*f(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof s?n(e):(0,o.xZ)(e)?e:n(e);return yield*h(function*(e){let n=null;do{n=e.next(yield c(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}const y=t=>f(Uint8Array,t);function g(t,e){return(0,i.__asyncGenerator)(this,arguments,(function*(){if((0,o.yL)(e))return yield(0,i.__await)(yield(0,i.__await)(yield*(0,i.__asyncDelegator)((0,i.__asyncValues)(g(t,yield(0,i.__await)(e))))));const n=function(t){return(0,i.__asyncGenerator)(this,arguments,(function*(){yield yield(0,i.__await)(yield(0,i.__await)(t))}))},r="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof s?n(e):(0,o.xZ)(e)?function(t){return(0,i.__asyncGenerator)(this,arguments,(function*(){yield(0,i.__await)(yield*(0,i.__asyncDelegator)((0,i.__asyncValues)(h(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):(0,o.Td)(e)?e:n(e);return yield(0,i.__await)(yield*(0,i.__asyncDelegator)((0,i.__asyncValues)(h(function(e){return(0,i.__asyncGenerator)(this,arguments,(function*(){let n=null;do{n=yield(0,i.__await)(e.next(yield yield(0,i.__await)(c(t,n))))}while(!n.done)}))}(r[Symbol.asyncIterator]()))))),yield(0,i.__await)(new t)}))}const v=t=>g(Uint8Array,t);function m(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}},66575:(t,e,n)=>{n.d(e,{IC:()=>o,QS:()=>u,X1:()=>s,Xu:()=>p,Zh:()=>a,bQ:()=>c,i6:()=>d,rV:()=>i,wY:()=>r});class i{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function r(t){return t.some((t=>t.nullable))}function o(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function s(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function a(t,e,n,i){const r=[];for(let o=-1,s=t.length;++o<s;){const s=t[o],a=e[o],{length:l}=s;if(a>=i)break;if(n>=a+l)continue;if(a>=n&&a+l<=i){r.push(s);continue}const c=Math.max(0,n-a),u=Math.min(i-a,l);r.push(s.slice(c,u-c))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function l(t,e,n,i){let r=0,o=0,s=e.length-1;do{if(r>=s-1)return n<e[s]?i(t,r,n-e[r]):null;o=r+Math.trunc(.5*(s-r)),n<e[o]?s=o:r=o}while(r<s)}function c(t,e){return t.getValid(e)}function u(t){function e(e,n,i){return t(e[n],i)}return function(t){return l(this.data,this._offsets,t,e)}}function p(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const o=l(r,this._offsets,t,n);return e=void 0,o}}function d(t){let e;function n(n,i,r){let o=r,s=0,a=0;for(let l=i-1,c=n.length;++l<c;){const i=n[l];if(~(s=t(i,e,o)))return a+s;o=0,a+=i.length}return-1}return function(t,i){e=t;const r=this.data,o="number"!=typeof i?n(r,0,0):l(r,this._offsets,i,n);return e=void 0,o}}},85982:(t,e,n)=>{n.d(e,{Rv:()=>y,Td:()=>c,es:()=>h,hy:()=>g,o_:()=>p,qO:()=>u,rv:()=>v,xZ:()=>l,yL:()=>a,zP:()=>d});const i=t=>"number"==typeof t,r=t=>"boolean"==typeof t,o=t=>"function"==typeof t,s=t=>null!=t&&Object(t)===t,a=t=>s(t)&&o(t.then),l=t=>s(t)&&o(t[Symbol.iterator]),c=t=>s(t)&&o(t[Symbol.asyncIterator]),u=t=>s(t)&&s(t.schema),p=t=>s(t)&&"done"in t&&"value"in t,d=t=>s(t)&&o(t.stat)&&i(t.fd),h=t=>s(t)&&y(t.body),f=t=>"_getDOMStream"in t&&"_getNodeStream"in t,y=t=>s(t)&&o(t.cancel)&&o(t.getReader)&&!f(t),g=t=>s(t)&&o(t.read)&&o(t.pipe)&&r(t.readable)&&!f(t),v=t=>s(t)&&o(t.clear)&&o(t.bytes)&&o(t.position)&&o(t.setPosition)&&o(t.capacity)&&o(t.getBufferIdentifier)&&o(t.createLong)},56714:(t,e,n)=>{n.d(e,{V:()=>o,z:()=>s});const i=new Float64Array(1),r=new Uint32Array(i.buffer);function o(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function s(t){if(t!=t)return 32256;i[0]=t;const e=(2147483648&r[1])>>16&65535;let n=2146435072&r[1],o=0;return n>=1089470464?r[0]>0?n=31744:(n=(2080374784&n)>>16,o=(1048575&r[1])>>10):n<=1056964608?(o=1048576+(1048575&r[1]),o=1048576+(o<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,o=512+(1048575&r[1])>>10),e|n|65535&o}},29624:(t,e,n)=>{n.d(e,{U:()=>r});const i=void 0;function r(t){if(null===t)return"null";if(t===i)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map((t=>r(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}},51181:(t,e,n)=>{n.d(e,{A:()=>s,_:()=>r});const i=new TextDecoder("utf-8"),r=t=>i.decode(t),o=new TextEncoder,s=t=>o.encode(t)},40881:(t,e,n)=>{n.d(e,{BS:()=>l,L:()=>p,nU:()=>c});var i=n(46252),r=n(12740),o=n(36933),s=n(96566);let a;function l(t,e,n,i){const{length:r=0}=t;let o="number"!=typeof e?0:e,s="number"!=typeof n?r:n;return o<0&&(o=(o%r+r)%r),s<0&&(s=(s%r+r)%r),s<o&&(a=o,o=s,s=a),s>r&&(s=r),i?i(t,o,s):[o,s]}const c=(t,e)=>t<0?e+t:t,u=t=>t!=t;function p(t){if("object"!==typeof t||null===t)return u(t)?u:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&(0,s.Yk)(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=p(i);return d(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=p(t[n]);return d(e)}(t):t instanceof i.M?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=p(t.get(n));return d(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let r=-1,o=n.length;++r<o;)i[r]=p(t[n[r]]);return d(i,n)}(t,!0)}function d(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return h(t,n,n.keys());case r.Rt:case o._:case Object:case void 0:return h(t,n,e||Object.keys(n))}return n instanceof i.M&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function h(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let s=0;const a=t.length;let l=o.next(),c=i.next(),u=r.next();for(;s<a&&!c.done&&!u.done&&!l.done&&(c.value===u.value&&t[s](l.value));++s,c=i.next(),u=r.next(),l=o.next());return!!(s===a&&c.done&&u.done&&l.done)||(i.return&&i.return(),r.return&&r.return(),o.return&&o.return(),!1)}},46252:(t,e,n)=>{n.d(e,{M:()=>y,g:()=>v});var i,r=n(64570),o=n(40881),s=n(37589),a=n(14957),l=n(66575),c=n(30414),u=n(99468),p=n(20599),d=n(39754);const h={},f={};class y{constructor(t){var e,n,i;const r=t[0]instanceof y?t.flatMap((t=>t.data)):t;if(0===r.length||r.some((t=>!(t instanceof a.B_))))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n}=h[o.typeId],i=r[0];this.isValid=t=>(0,l.bQ)(i,t),this.get=e=>t(i,e),this.set=(t,n)=>e(i,t,n),this.indexOf=t=>n(i,t),this._offsets=[0,i.length];break}default:Object.setPrototypeOf(this,f[o.typeId]),this._offsets=(0,l.X1)(r)}this.data=r,this.type=o,this.stride=(0,s.nO)(o),this.numChildren=null!==(i=null===(n=o.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce(((t,e)=>t+e.byteLength),0)}get nullable(){return(0,l.wY)(this.data)}get nullCount(){return(0,l.IC)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${r.ZU[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}at(t){return this.get((0,o.nU)(t,this.length))}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>-1}[Symbol.iterator](){return d.K.visit(this)}concat(...t){return new y(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new y((0,o.BS)(this,t,e,(({data:t,_offsets:e},n,i)=>(0,l.Zh)(t,e,n,i))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:o}=this;switch(t.typeId){case r.ZU.Int:case r.ZU.Float:case r.ZU.Decimal:case r.ZU.Time:case r.ZU.Timestamp:switch(e.length){case 0:return new o;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,{values:e,length:n})=>(t.array.set(e.subarray(0,n*i),t.offset),t.offset+=n*i,t)),{array:new o(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new y(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!s.pe.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(s.pe.isDictionary(this.type)){const t=new g(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new y(e)}return new g(this)}unmemoize(){if(s.pe.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new y(e)}return this}}i=Symbol.toStringTag,y[i]=(t=>{t.type=s.pe.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(r.ZU).map((t=>r.ZU[t])).filter((t=>"number"==typeof t&&t!==r.ZU.NONE));for(const n of e){const e=c.K.getVisitFnByTypeId(n),i=u.KJ.getVisitFnByTypeId(n),r=p.K.getVisitFnByTypeId(n);h[n]={get:e,set:i,indexOf:r},f[n]=Object.create(t,{isValid:{value:(0,l.QS)(l.bQ)},get:{value:(0,l.QS)(c.K.getVisitFnByTypeId(n))},set:{value:(0,l.Xu)(u.KJ.getVisitFnByTypeId(n))},indexOf:{value:(0,l.i6)(p.K.getVisitFnByTypeId(n))}})}return"Vector"})(y.prototype);class g extends y{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new g(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new y(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function v(t){if(t){if(t instanceof a.B_)return new y([t]);if(t instanceof y)return new y(t.data);if(t.type instanceof s.pe)return new y([(0,a.Hg)(t)]);if(Array.isArray(t))return new y(t.flatMap((t=>{return(e=t)instanceof a.B_?[e]:e instanceof y?e.data:v(e).data;var e})));if(ArrayBuffer.isView(t)){t instanceof DataView&&(t=new Uint8Array(t.buffer));const e={offset:0,length:t.length,nullCount:-1,data:t};if(t instanceof Int8Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.AY}))]);if(t instanceof Int16Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.Vw}))]);if(t instanceof Int32Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.P_}))]);if(t instanceof BigInt64Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.CG}))]);if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.l5}))]);if(t instanceof Uint16Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.yv}))]);if(t instanceof Uint32Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.SS}))]);if(t instanceof BigUint64Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.Rf}))]);if(t instanceof Float32Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.gh}))]);if(t instanceof Float64Array)return new y([(0,a.Hg)(Object.assign(Object.assign({},e),{type:new s.$G}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}},40945:(t,e,n)=>{n.d(e,{l:()=>u});var i=n(64570),r=n(67144),o=n(46734),s=n(34603),a=n(37730),l=n(41559),c=n(37589);class u{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){if("number"==typeof e)return p(t,e,n);if("string"==typeof e&&e in i.ZU)return p(t,i.ZU[e],n);if(e&&e instanceof c.pe)return p(t,d(e),n);if((null==e?void 0:e.type)&&e.type instanceof c.pe)return p(t,d(e.type),n);return p(t,i.ZU.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return p(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitLargeUtf8(t,...e){return null}visitBinary(t,...e){return null}visitLargeBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitDuration(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function p(t,e,n=!0){let r=null;switch(e){case i.ZU.Null:r=t.visitNull;break;case i.ZU.Bool:r=t.visitBool;break;case i.ZU.Int:r=t.visitInt;break;case i.ZU.Int8:r=t.visitInt8||t.visitInt;break;case i.ZU.Int16:r=t.visitInt16||t.visitInt;break;case i.ZU.Int32:r=t.visitInt32||t.visitInt;break;case i.ZU.Int64:r=t.visitInt64||t.visitInt;break;case i.ZU.Uint8:r=t.visitUint8||t.visitInt;break;case i.ZU.Uint16:r=t.visitUint16||t.visitInt;break;case i.ZU.Uint32:r=t.visitUint32||t.visitInt;break;case i.ZU.Uint64:r=t.visitUint64||t.visitInt;break;case i.ZU.Float:r=t.visitFloat;break;case i.ZU.Float16:r=t.visitFloat16||t.visitFloat;break;case i.ZU.Float32:r=t.visitFloat32||t.visitFloat;break;case i.ZU.Float64:r=t.visitFloat64||t.visitFloat;break;case i.ZU.Utf8:r=t.visitUtf8;break;case i.ZU.LargeUtf8:r=t.visitLargeUtf8;break;case i.ZU.Binary:r=t.visitBinary;break;case i.ZU.LargeBinary:r=t.visitLargeBinary;break;case i.ZU.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case i.ZU.Date:r=t.visitDate;break;case i.ZU.DateDay:r=t.visitDateDay||t.visitDate;break;case i.ZU.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case i.ZU.Timestamp:r=t.visitTimestamp;break;case i.ZU.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case i.ZU.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case i.ZU.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case i.ZU.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case i.ZU.Time:r=t.visitTime;break;case i.ZU.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case i.ZU.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case i.ZU.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case i.ZU.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case i.ZU.Decimal:r=t.visitDecimal;break;case i.ZU.List:r=t.visitList;break;case i.ZU.Struct:r=t.visitStruct;break;case i.ZU.Union:r=t.visitUnion;break;case i.ZU.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case i.ZU.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case i.ZU.Dictionary:r=t.visitDictionary;break;case i.ZU.Interval:r=t.visitInterval;break;case i.ZU.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case i.ZU.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case i.ZU.Duration:r=t.visitDuration;break;case i.ZU.DurationSecond:r=t.visitDurationSecond||t.visitDuration;break;case i.ZU.DurationMillisecond:r=t.visitDurationMillisecond||t.visitDuration;break;case i.ZU.DurationMicrosecond:r=t.visitDurationMicrosecond||t.visitDuration;break;case i.ZU.DurationNanosecond:r=t.visitDurationNanosecond||t.visitDuration;break;case i.ZU.FixedSizeList:r=t.visitFixedSizeList;break;case i.ZU.Map:r=t.visitMap}if("function"==typeof r)return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${i.ZU[e]}'`)}function d(t){switch(t.typeId){case i.ZU.Null:return i.ZU.Null;case i.ZU.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?i.ZU.Int8:i.ZU.Uint8;case 16:return n?i.ZU.Int16:i.ZU.Uint16;case 32:return n?i.ZU.Int32:i.ZU.Uint32;case 64:return n?i.ZU.Int64:i.ZU.Uint64}return i.ZU.Int}case i.ZU.Float:switch(t.precision){case r.j.HALF:return i.ZU.Float16;case r.j.SINGLE:return i.ZU.Float32;case r.j.DOUBLE:return i.ZU.Float64}return i.ZU.Float;case i.ZU.Binary:return i.ZU.Binary;case i.ZU.LargeBinary:return i.ZU.LargeBinary;case i.ZU.Utf8:return i.ZU.Utf8;case i.ZU.LargeUtf8:return i.ZU.LargeUtf8;case i.ZU.Bool:return i.ZU.Bool;case i.ZU.Decimal:return i.ZU.Decimal;case i.ZU.Time:switch(t.unit){case o.y.SECOND:return i.ZU.TimeSecond;case o.y.MILLISECOND:return i.ZU.TimeMillisecond;case o.y.MICROSECOND:return i.ZU.TimeMicrosecond;case o.y.NANOSECOND:return i.ZU.TimeNanosecond}return i.ZU.Time;case i.ZU.Timestamp:switch(t.unit){case o.y.SECOND:return i.ZU.TimestampSecond;case o.y.MILLISECOND:return i.ZU.TimestampMillisecond;case o.y.MICROSECOND:return i.ZU.TimestampMicrosecond;case o.y.NANOSECOND:return i.ZU.TimestampNanosecond}return i.ZU.Timestamp;case i.ZU.Date:switch(t.unit){case s.f.DAY:return i.ZU.DateDay;case s.f.MILLISECOND:return i.ZU.DateMillisecond}return i.ZU.Date;case i.ZU.Interval:switch(t.unit){case a.a.DAY_TIME:return i.ZU.IntervalDayTime;case a.a.YEAR_MONTH:return i.ZU.IntervalYearMonth}return i.ZU.Interval;case i.ZU.Duration:switch(t.unit){case o.y.SECOND:return i.ZU.DurationSecond;case o.y.MILLISECOND:return i.ZU.DurationMillisecond;case o.y.MICROSECOND:return i.ZU.DurationMicrosecond;case o.y.NANOSECOND:return i.ZU.DurationNanosecond}return i.ZU.Duration;case i.ZU.Map:return i.ZU.Map;case i.ZU.List:return i.ZU.List;case i.ZU.Struct:return i.ZU.Struct;case i.ZU.Union:switch(t.mode){case l.R.Dense:return i.ZU.DenseUnion;case l.R.Sparse:return i.ZU.SparseUnion}return i.ZU.Union;case i.ZU.FixedSizeBinary:return i.ZU.FixedSizeBinary;case i.ZU.FixedSizeList:return i.ZU.FixedSizeList;case i.ZU.Dictionary:return i.ZU.Dictionary}throw new Error(`Unrecognized type '${i.ZU[t.typeId]}'`)}u.prototype.visitInt8=null,u.prototype.visitInt16=null,u.prototype.visitInt32=null,u.prototype.visitInt64=null,u.prototype.visitUint8=null,u.prototype.visitUint16=null,u.prototype.visitUint32=null,u.prototype.visitUint64=null,u.prototype.visitFloat16=null,u.prototype.visitFloat32=null,u.prototype.visitFloat64=null,u.prototype.visitDateDay=null,u.prototype.visitDateMillisecond=null,u.prototype.visitTimestampSecond=null,u.prototype.visitTimestampMillisecond=null,u.prototype.visitTimestampMicrosecond=null,u.prototype.visitTimestampNanosecond=null,u.prototype.visitTimeSecond=null,u.prototype.visitTimeMillisecond=null,u.prototype.visitTimeMicrosecond=null,u.prototype.visitTimeNanosecond=null,u.prototype.visitDenseUnion=null,u.prototype.visitSparseUnion=null,u.prototype.visitIntervalDayTime=null,u.prototype.visitIntervalYearMonth=null,u.prototype.visitDuration=null,u.prototype.visitDurationSecond=null,u.prototype.visitDurationMillisecond=null,u.prototype.visitDurationMicrosecond=null,u.prototype.visitDurationNanosecond=null},30414:(t,e,n)=>{n.d(e,{K:()=>Q});var i=n(96566),r=n(44293);const o=Symbol.for("isArrowBigNum");function s(t,...e){return 0===e.length?Object.setPrototypeOf((0,i.Q_)(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function a(...t){return s.apply(this,t)}function l(...t){return s.apply(this,t)}function c(...t){return s.apply(this,t)}s.prototype[o]=!0,s.prototype.toJSON=function(){return`"${d(this)}"`},s.prototype.valueOf=function(t){return p(this,t)},s.prototype.toString=function(){return d(this)},s.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return p(this);case"string":return d(this);case"default":return function(t){if(8===t.byteLength){return new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}return d(t)}(this)}return d(this)},Object.setPrototypeOf(a.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(l.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(c.prototype,Object.create(Uint32Array.prototype)),Object.assign(a.prototype,s.prototype,{constructor:a,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(l.prototype,s.prototype,{constructor:l,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(c.prototype,s.prototype,{constructor:c,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const u=BigInt(4294967296)*BigInt(4294967296)-BigInt(1);function p(t,e){const{buffer:n,byteOffset:i,byteLength:o,signed:s}=t,a=new BigUint64Array(n,i,o/8),l=s&&a.at(-1)&BigInt(1)<<BigInt(63);let c=BigInt(0),p=0;if(l){for(const t of a)c|=(t^u)*(BigInt(1)<<BigInt(64*p++));c*=BigInt(-1),c-=BigInt(1)}else for(const r of a)c|=r*(BigInt(1)<<BigInt(64*p++));if("number"==typeof e){const t=BigInt(Math.pow(10,e)),n=c/t,i=c%t;return(0,r.i)(n)+(0,r.i)(i)/(0,r.i)(t)}return(0,r.i)(c)}function d(t){if(8===t.byteLength){return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`}if(!t.signed)return h(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return h(t);e=e.slice();let n=1;for(let i=0;i<e.length;i++){const t=e[i],r=~t+n;e[i]=r,n&=0===t?1:0}return`-${h(e)}`}function h(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const s=i.length-1;do{for(n[0]=i[o=0];o<s;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return null!=e?e:"0"}class f{static new(t,e){switch(e){case!0:return new a(t);case!1:return new l(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new a(t)}return 16===t.byteLength?new c(t):new l(t)}static signed(t){return new a(t)}static unsigned(t){return new l(t)}static decimal(t){return new c(t)}constructor(t,e){return f.new(t,e)}}var y=n(46252),g=n(40945),v=n(12740),m=n(36933),x=n(51181),S=n(56714),b=n(67144),w=n(34603),I=n(46734),_=n(41559),P=n(37730);class A extends g.l{}function C(t){return(e,n)=>e.getValid(n)?t(e,n):null}const T=(t,e,n)=>{if(n+1>=e.length)return null;const i=(0,r.i)(e[n]),o=(0,r.i)(e[n+1]);return t.subarray(i,o)},L=({values:t},e)=>((t,e)=>864e5*t[e])(t,e),M=({values:t},e)=>(0,r.i)(t[e]),O=({stride:t,values:e},n)=>e[t*n],U=({values:t},e)=>t[e],D=({values:t,valueOffsets:e},n)=>T(t,e,n),F=({values:t,valueOffsets:e},n)=>{const i=T(t,e,n);return null!==i?(0,x._)(i):null},z=({values:t},e)=>1e3*(0,r.i)(t[e]),B=({values:t},e)=>(0,r.i)(t[e]),E=({values:t},e)=>(0,r.g)(t[e],BigInt(1e3)),N=({values:t},e)=>(0,r.g)(t[e],BigInt(1e6)),Z=({values:t},e)=>t[e],k=({values:t},e)=>t[e],R=({values:t},e)=>t[e],j=({values:t},e)=>t[e],W=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Q.visit(i,t.valueOffsets[e])},V=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Q.visit(i,e)},G=({values:t},e)=>t.subarray(2*e,2*(e+1)),$=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},H=({values:t},e)=>t[e],K=({values:t},e)=>t[e],Y=({values:t},e)=>t[e],J=({values:t},e)=>t[e];A.prototype.visitNull=C(((t,e)=>null)),A.prototype.visitBool=C((({offset:t,values:e},n)=>{const i=t+n;return!!(e[i>>3]&1<<i%8)})),A.prototype.visitInt=C((({values:t},e)=>t[e])),A.prototype.visitInt8=C(O),A.prototype.visitInt16=C(O),A.prototype.visitInt32=C(O),A.prototype.visitInt64=C(U),A.prototype.visitUint8=C(O),A.prototype.visitUint16=C(O),A.prototype.visitUint32=C(O),A.prototype.visitUint64=C(U),A.prototype.visitFloat=C((({type:t,values:e},n)=>t.precision!==b.j.HALF?e[n]:(0,S.V)(e[n]))),A.prototype.visitFloat16=C((({stride:t,values:e},n)=>(0,S.V)(e[t*n]))),A.prototype.visitFloat32=C(O),A.prototype.visitFloat64=C(O),A.prototype.visitUtf8=C(F),A.prototype.visitLargeUtf8=C(F),A.prototype.visitBinary=C(D),A.prototype.visitLargeBinary=C(D),A.prototype.visitFixedSizeBinary=C((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),A.prototype.visitDate=C(((t,e)=>t.type.unit===w.f.DAY?L(t,e):M(t,e))),A.prototype.visitDateDay=C(L),A.prototype.visitDateMillisecond=C(M),A.prototype.visitTimestamp=C(((t,e)=>{switch(t.type.unit){case I.y.SECOND:return z(t,e);case I.y.MILLISECOND:return B(t,e);case I.y.MICROSECOND:return E(t,e);case I.y.NANOSECOND:return N(t,e)}})),A.prototype.visitTimestampSecond=C(z),A.prototype.visitTimestampMillisecond=C(B),A.prototype.visitTimestampMicrosecond=C(E),A.prototype.visitTimestampNanosecond=C(N),A.prototype.visitTime=C(((t,e)=>{switch(t.type.unit){case I.y.SECOND:return Z(t,e);case I.y.MILLISECOND:return k(t,e);case I.y.MICROSECOND:return R(t,e);case I.y.NANOSECOND:return j(t,e)}})),A.prototype.visitTimeSecond=C(Z),A.prototype.visitTimeMillisecond=C(k),A.prototype.visitTimeMicrosecond=C(R),A.prototype.visitTimeNanosecond=C(j),A.prototype.visitDecimal=C((({values:t,stride:e},n)=>f.decimal(t.subarray(e*n,e*(n+1))))),A.prototype.visitList=C(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:o,[e*i+1]:s}=n,a=r[0].slice(o,s-o);return new y.M([a])})),A.prototype.visitStruct=C(((t,e)=>new m._(t,e))),A.prototype.visitUnion=C(((t,e)=>t.type.mode===_.R.Dense?W(t,e):V(t,e))),A.prototype.visitDenseUnion=C(W),A.prototype.visitSparseUnion=C(V),A.prototype.visitDictionary=C(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),A.prototype.visitInterval=C(((t,e)=>t.type.unit===P.a.DAY_TIME?G(t,e):$(t,e))),A.prototype.visitIntervalDayTime=C(G),A.prototype.visitIntervalYearMonth=C($),A.prototype.visitDuration=C(((t,e)=>{switch(t.type.unit){case I.y.SECOND:return H(t,e);case I.y.MILLISECOND:return K(t,e);case I.y.MICROSECOND:return Y(t,e);case I.y.NANOSECOND:return J(t,e)}})),A.prototype.visitDurationSecond=C(H),A.prototype.visitDurationMillisecond=C(K),A.prototype.visitDurationMicrosecond=C(Y),A.prototype.visitDurationNanosecond=C(J),A.prototype.visitFixedSizeList=C(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new y.M([r])})),A.prototype.visitMap=C(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:o}=n,s=i[0];return new v.Rt(s.slice(r,o-r))}));const Q=new A},20599:(t,e,n)=>{n.d(e,{K:()=>p});var i=n(64570),r=n(40945),o=n(30414),s=n(54109),a=n(40881);class l extends r.l{}function c(t,e,n){if(void 0===e)return-1;if(null===e)switch(t.typeId){case i.ZU.Union:case i.ZU.Dictionary:break;default:return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new s.kE(n,t.offset+(e||0),t.length,n,s.Jz)){if(!r)return i;++i}return-1}(t,n)}const r=o.K.getVisitFn(t),l=(0,a.L)(e);for(let i=(n||0)-1,o=t.length;++i<o;)if(l(r(t,i)))return i;return-1}function u(t,e,n){const i=o.K.getVisitFn(t),r=(0,a.L)(e);for(let o=(n||0)-1,s=t.length;++o<s;)if(r(i(t,o)))return o;return-1}l.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},l.prototype.visitBool=c,l.prototype.visitInt=c,l.prototype.visitInt8=c,l.prototype.visitInt16=c,l.prototype.visitInt32=c,l.prototype.visitInt64=c,l.prototype.visitUint8=c,l.prototype.visitUint16=c,l.prototype.visitUint32=c,l.prototype.visitUint64=c,l.prototype.visitFloat=c,l.prototype.visitFloat16=c,l.prototype.visitFloat32=c,l.prototype.visitFloat64=c,l.prototype.visitUtf8=c,l.prototype.visitLargeUtf8=c,l.prototype.visitBinary=c,l.prototype.visitLargeBinary=c,l.prototype.visitFixedSizeBinary=c,l.prototype.visitDate=c,l.prototype.visitDateDay=c,l.prototype.visitDateMillisecond=c,l.prototype.visitTimestamp=c,l.prototype.visitTimestampSecond=c,l.prototype.visitTimestampMillisecond=c,l.prototype.visitTimestampMicrosecond=c,l.prototype.visitTimestampNanosecond=c,l.prototype.visitTime=c,l.prototype.visitTimeSecond=c,l.prototype.visitTimeMillisecond=c,l.prototype.visitTimeMicrosecond=c,l.prototype.visitTimeNanosecond=c,l.prototype.visitDecimal=c,l.prototype.visitList=c,l.prototype.visitStruct=c,l.prototype.visitUnion=c,l.prototype.visitDenseUnion=u,l.prototype.visitSparseUnion=u,l.prototype.visitDictionary=c,l.prototype.visitInterval=c,l.prototype.visitIntervalDayTime=c,l.prototype.visitIntervalYearMonth=c,l.prototype.visitDuration=c,l.prototype.visitDurationSecond=c,l.prototype.visitDurationMillisecond=c,l.prototype.visitDurationMicrosecond=c,l.prototype.visitDurationNanosecond=c,l.prototype.visitFixedSizeList=c,l.prototype.visitMap=c;const p=new l},39754:(t,e,n)=>{n.d(e,{K:()=>u});var i=n(40945),r=n(67144),o=n(37589),s=n(66575);class a extends i.l{}function l(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(o.pe.isInt(e)&&64!==e.bitWidth||o.pe.isTime(e)&&64!==e.bitWidth||o.pe.isFloat(e)&&e.precision!==r.j.HALF))return new s.rV(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new s.rV(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new c(r)}))}class c{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}a.prototype.visitNull=l,a.prototype.visitBool=l,a.prototype.visitInt=l,a.prototype.visitInt8=l,a.prototype.visitInt16=l,a.prototype.visitInt32=l,a.prototype.visitInt64=l,a.prototype.visitUint8=l,a.prototype.visitUint16=l,a.prototype.visitUint32=l,a.prototype.visitUint64=l,a.prototype.visitFloat=l,a.prototype.visitFloat16=l,a.prototype.visitFloat32=l,a.prototype.visitFloat64=l,a.prototype.visitUtf8=l,a.prototype.visitLargeUtf8=l,a.prototype.visitBinary=l,a.prototype.visitLargeBinary=l,a.prototype.visitFixedSizeBinary=l,a.prototype.visitDate=l,a.prototype.visitDateDay=l,a.prototype.visitDateMillisecond=l,a.prototype.visitTimestamp=l,a.prototype.visitTimestampSecond=l,a.prototype.visitTimestampMillisecond=l,a.prototype.visitTimestampMicrosecond=l,a.prototype.visitTimestampNanosecond=l,a.prototype.visitTime=l,a.prototype.visitTimeSecond=l,a.prototype.visitTimeMillisecond=l,a.prototype.visitTimeMicrosecond=l,a.prototype.visitTimeNanosecond=l,a.prototype.visitDecimal=l,a.prototype.visitList=l,a.prototype.visitStruct=l,a.prototype.visitUnion=l,a.prototype.visitDenseUnion=l,a.prototype.visitSparseUnion=l,a.prototype.visitDictionary=l,a.prototype.visitInterval=l,a.prototype.visitIntervalDayTime=l,a.prototype.visitIntervalYearMonth=l,a.prototype.visitDuration=l,a.prototype.visitDurationSecond=l,a.prototype.visitDurationMillisecond=l,a.prototype.visitDurationMicrosecond=l,a.prototype.visitDurationNanosecond=l,a.prototype.visitFixedSizeList=l,a.prototype.visitMap=l;const u=new a},99468:(t,e,n)=>{n.d(e,{$V:()=>V,D:()=>b,Eh:()=>D,Fb:()=>O,Iq:()=>M,Jr:()=>k,KF:()=>U,KJ:()=>$,Kx:()=>z,NY:()=>Z,R1:()=>N,RP:()=>T,RR:()=>R,Ry:()=>P,V_:()=>L,XU:()=>_,bE:()=>C,eQ:()=>S,gh:()=>j,h7:()=>x,ib:()=>F,lE:()=>W,rU:()=>G,ws:()=>A});var i=n(46252),r=n(40945),o=n(44293),s=n(51181),a=n(56714),l=n(67144),c=n(34603),u=n(46734),p=n(41559),d=n(37730);class h extends r.l{}function f(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const y=(t,e,n,i)=>{if(n+1<e.length){const r=(0,o.i)(e[n]),s=(0,o.i)(e[n+1]);t.set(i.subarray(0,s-r),r)}},g=({values:t},e,n)=>{t[e]=n},v=({values:t},e,n)=>{t[e]=n},m=({values:t},e,n)=>{t[e]=(0,a.z)(n)},x=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.floor(n/864e5)})(t,e,n.valueOf())},S=({values:t},e,n)=>{t[e]=BigInt(n)},b=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},w=({values:t,valueOffsets:e},n,i)=>y(t,e,n,i),I=({values:t,valueOffsets:e},n,i)=>y(t,e,n,(0,s.A)(i)),_=(t,e,n)=>{t.type.unit===c.f.DAY?x(t,e,n):S(t,e,n)},P=({values:t},e,n)=>{t[e]=BigInt(n/1e3)},A=({values:t},e,n)=>{t[e]=BigInt(n)},C=({values:t},e,n)=>{t[e]=BigInt(1e3*n)},T=({values:t},e,n)=>{t[e]=BigInt(1e6*n)},L=(t,e,n)=>{switch(t.type.unit){case u.y.SECOND:return P(t,e,n);case u.y.MILLISECOND:return A(t,e,n);case u.y.MICROSECOND:return C(t,e,n);case u.y.NANOSECOND:return T(t,e,n)}},M=({values:t},e,n)=>{t[e]=n},O=({values:t},e,n)=>{t[e]=n},U=({values:t},e,n)=>{t[e]=n},D=({values:t},e,n)=>{t[e]=n},F=(t,e,n)=>{switch(t.type.unit){case u.y.SECOND:return M(t,e,n);case u.y.MILLISECOND:return O(t,e,n);case u.y.MICROSECOND:return U(t,e,n);case u.y.NANOSECOND:return D(t,e,n)}},z=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},B=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];$.visit(r,t.valueOffsets[e],n)},E=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];$.visit(r,e,n)},N=(t,e,n)=>{t.type.unit===d.a.DAY_TIME?Z(t,e,n):k(t,e,n)},Z=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},k=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12},R=({values:t},e,n)=>{t[e]=n},j=({values:t},e,n)=>{t[e]=n},W=({values:t},e,n)=>{t[e]=n},V=({values:t},e,n)=>{t[e]=n},G=(t,e,n)=>{switch(t.type.unit){case u.y.SECOND:return R(t,e,n);case u.y.MILLISECOND:return j(t,e,n);case u.y.MICROSECOND:return W(t,e,n);case u.y.NANOSECOND:return V(t,e,n)}};h.prototype.visitBool=f((({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)})),h.prototype.visitInt=f(g),h.prototype.visitInt8=f(g),h.prototype.visitInt16=f(g),h.prototype.visitInt32=f(g),h.prototype.visitInt64=f(g),h.prototype.visitUint8=f(g),h.prototype.visitUint16=f(g),h.prototype.visitUint32=f(g),h.prototype.visitUint64=f(g),h.prototype.visitFloat=f(((t,e,n)=>{switch(t.type.precision){case l.j.HALF:return m(t,e,n);case l.j.SINGLE:case l.j.DOUBLE:return v(t,e,n)}})),h.prototype.visitFloat16=f(m),h.prototype.visitFloat32=f(v),h.prototype.visitFloat64=f(v),h.prototype.visitUtf8=f(I),h.prototype.visitLargeUtf8=f(I),h.prototype.visitBinary=f(w),h.prototype.visitLargeBinary=f(w),h.prototype.visitFixedSizeBinary=f(b),h.prototype.visitDate=f(_),h.prototype.visitDateDay=f(x),h.prototype.visitDateMillisecond=f(S),h.prototype.visitTimestamp=f(L),h.prototype.visitTimestampSecond=f(P),h.prototype.visitTimestampMillisecond=f(A),h.prototype.visitTimestampMicrosecond=f(C),h.prototype.visitTimestampNanosecond=f(T),h.prototype.visitTime=f(F),h.prototype.visitTimeSecond=f(M),h.prototype.visitTimeMillisecond=f(O),h.prototype.visitTimeMicrosecond=f(U),h.prototype.visitTimeNanosecond=f(D),h.prototype.visitDecimal=f(z),h.prototype.visitList=f(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,o=$.getVisitFn(i);if(Array.isArray(n))for(let s=-1,a=r[e],l=r[e+1];a<l;)o(i,a++,n[++s]);else for(let s=-1,a=r[e],l=r[e+1];a<l;)o(i,a++,n.get(++s))})),h.prototype.visitStruct=f(((t,e,n)=>{const r=t.type.children.map((t=>$.getVisitFn(t.type))),o=n instanceof Map?(s=e,a=n,(t,e,n,i)=>e&&t(e,s,a.get(n.name))):n instanceof i.M?((t,e)=>(n,i,r,o)=>i&&n(i,t,e.get(o)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,o)=>i&&n(i,t,e[o]))(e,n):((t,e)=>(n,i,r,o)=>i&&n(i,t,e[r.name]))(e,n);var s,a;t.type.children.forEach(((e,n)=>o(r[n],t.children[n],e,n)))})),h.prototype.visitUnion=f(((t,e,n)=>{t.type.mode===p.R.Dense?B(t,e,n):E(t,e,n)})),h.prototype.visitDenseUnion=f(B),h.prototype.visitSparseUnion=f(E),h.prototype.visitDictionary=f(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),h.prototype.visitInterval=f(N),h.prototype.visitIntervalDayTime=f(Z),h.prototype.visitIntervalYearMonth=f(k),h.prototype.visitDuration=f(G),h.prototype.visitDurationSecond=f(R),h.prototype.visitDurationMillisecond=f(j),h.prototype.visitDurationMicrosecond=f(W),h.prototype.visitDurationNanosecond=f(V),h.prototype.visitFixedSizeList=f(((t,e,n)=>{const{stride:i}=t,r=t.children[0],o=$.getVisitFn(r);if(Array.isArray(n))for(let s=-1,a=e*i;++s<i;)o(r,a+s,n[s]);else for(let s=-1,a=e*i;++s<i;)o(r,a+s,n.get(s))})),h.prototype.visitMap=f(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,o=$.getVisitFn(i);let{[e]:s,[e+1]:a}=r;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(o(i,s,c),++s>=a)break}));const $=new h}}]);